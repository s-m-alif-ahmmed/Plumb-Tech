var Dl="2.1.12";const un="[data-trix-attachment]",fo={preview:{presentation:"gallery",caption:{name:!0,size:!0}},file:{caption:{size:!0}}},Ht={default:{tagName:"div",parse:!1},quote:{tagName:"blockquote",nestable:!0},heading1:{tagName:"h1",terminal:!0,breakOnReturn:!0,group:!1},code:{tagName:"pre",terminal:!0,htmlAttributes:["language"],text:{plaintext:!0}},bulletList:{tagName:"ul",parse:!1},bullet:{tagName:"li",listAttribute:"bulletList",group:!1,nestable:!0,test(i){return Ko(i.parentNode)===Ht[this.listAttribute].tagName}},numberList:{tagName:"ol",parse:!1},number:{tagName:"li",listAttribute:"numberList",group:!1,nestable:!0,test(i){return Ko(i.parentNode)===Ht[this.listAttribute].tagName}},attachmentGallery:{tagName:"div",exclusive:!0,terminal:!0,parse:!1,group:!1}},Ko=i=>{var e;return i==null||(e=i.tagName)===null||e===void 0?void 0:e.toLowerCase()},$o=navigator.userAgent.match(/android\s([0-9]+.*Chrome)/i),ar=$o&&parseInt($o[1]);var fi={composesExistingText:/Android.*Chrome/.test(navigator.userAgent),recentAndroid:ar&&ar>12,samsungAndroid:ar&&navigator.userAgent.match(/Android.*SM-/),forcesObjectResizing:/Trident.*rv:11/.test(navigator.userAgent),supportsInputEvents:typeof InputEvent<"u"&&["data","getTargetRanges","inputType"].every(i=>i in InputEvent.prototype)},Ys={ADD_ATTR:["language"],SAFE_FOR_XML:!1,RETURN_DOM:!0},Y={attachFiles:"Attach Files",bold:"Bold",bullets:"Bullets",byte:"Byte",bytes:"Bytes",captionPlaceholder:"Add a captionâ€¦",code:"Code",heading1:"Heading",indent:"Increase Level",italic:"Italic",link:"Link",numbers:"Numbers",outdent:"Decrease Level",quote:"Quote",redo:"Redo",remove:"Remove",strike:"Strikethrough",undo:"Undo",unlink:"Unlink",url:"URL",urlPlaceholder:"Enter a URLâ€¦",GB:"GB",KB:"KB",MB:"MB",PB:"PB",TB:"TB"};const Rl=[Y.bytes,Y.KB,Y.MB,Y.GB,Y.TB,Y.PB];var Ks={prefix:"IEC",precision:2,formatter(i){switch(i){case 0:return"0 ".concat(Y.bytes);case 1:return"1 ".concat(Y.byte);default:let e;this.prefix==="SI"?e=1e3:this.prefix==="IEC"&&(e=1024);const t=Math.floor(Math.log(i)/Math.log(e)),n=(i/Math.pow(e,t)).toFixed(this.precision).replace(/0*$/,"").replace(/\.$/,"");return"".concat(n," ").concat(Rl[t])}}};const zi="\uFEFF",ze="Â ",$s=function(i){for(const e in i){const t=i[e];this[e]=t}return this},po=document.documentElement,Ll=po.matches,bt=function(i){let{onElement:e,matchingSelector:t,withCallback:n,inPhase:r,preventDefault:o,times:a}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const u=e||po,p=t,v=r==="capturing",y=function(k){a!=null&&--a==0&&y.destroy();const D=Ve(k.target,{matchingSelector:p});D!=null&&(n==null||n.call(D,k,D),o&&k.preventDefault())};return y.destroy=()=>u.removeEventListener(i,y,v),u.addEventListener(i,y,v),y},Zn=function(i){let{onElement:e,bubbles:t,cancelable:n,attributes:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const o=e??po;t=t!==!1,n=n!==!1;const a=document.createEvent("Events");return a.initEvent(i,t,n),r!=null&&$s.call(a,r),o.dispatchEvent(a)},Xs=function(i,e){if((i==null?void 0:i.nodeType)===1)return Ll.call(i,e)},Ve=function(i){let{matchingSelector:e,untilNode:t}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};for(;i&&i.nodeType!==Node.ELEMENT_NODE;)i=i.parentNode;if(i!=null){if(e==null)return i;if(i.closest&&t==null)return i.closest(e);for(;i&&i!==t;){if(Xs(i,e))return i;i=i.parentNode}}},go=i=>document.activeElement!==i&&cn(i,document.activeElement),cn=function(i,e){if(i&&e)for(;e;){if(e===i)return!0;e=e.parentNode}},cr=function(i){var e;if((e=i)===null||e===void 0||!e.parentNode)return;let t=0;for(i=i.previousSibling;i;)t++,i=i.previousSibling;return t},Je=i=>{var e;return i==null||(e=i.parentNode)===null||e===void 0?void 0:e.removeChild(i)},Mi=function(i){let{onlyNodesOfType:e,usingFilter:t,expandEntityReferences:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=(()=>{switch(e){case"element":return NodeFilter.SHOW_ELEMENT;case"text":return NodeFilter.SHOW_TEXT;case"comment":return NodeFilter.SHOW_COMMENT;default:return NodeFilter.SHOW_ALL}})();return document.createTreeWalker(i,r,t??null,n===!0)},Ut=i=>{var e;return i==null||(e=i.tagName)===null||e===void 0?void 0:e.toLowerCase()},Z=function(i){let e,t,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};typeof i=="object"?(n=i,i=n.tagName):n={attributes:n};const r=document.createElement(i);if(n.editable!=null&&(n.attributes==null&&(n.attributes={}),n.attributes.contenteditable=n.editable),n.attributes)for(e in n.attributes)t=n.attributes[e],r.setAttribute(e,t);if(n.style)for(e in n.style)t=n.style[e],r.style[e]=t;if(n.data)for(e in n.data)t=n.data[e],r.dataset[e]=t;return n.className&&n.className.split(" ").forEach(o=>{r.classList.add(o)}),n.textContent&&(r.textContent=n.textContent),n.childNodes&&[].concat(n.childNodes).forEach(o=>{r.appendChild(o)}),r};let zn;const ti=function(){if(zn!=null)return zn;zn=[];for(const i in Ht){const e=Ht[i];e.tagName&&zn.push(e.tagName)}return zn},lr=i=>En(i==null?void 0:i.firstChild),Xo=function(i){let{strict:e}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{strict:!0};return e?En(i):En(i)||!En(i.firstChild)&&function(t){return ti().includes(Ut(t))&&!ti().includes(Ut(t.firstChild))}(i)},En=i=>_l(i)&&(i==null?void 0:i.data)==="block",_l=i=>(i==null?void 0:i.nodeType)===Node.COMMENT_NODE,Tn=function(i){let{name:e}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(i)return ei(i)?i.data===zi?!e||i.parentNode.dataset.trixCursorTarget===e:void 0:Tn(i.firstChild)},hn=i=>Xs(i,un),Gs=i=>ei(i)&&(i==null?void 0:i.data)==="",ei=i=>(i==null?void 0:i.nodeType)===Node.TEXT_NODE,mo={level2Enabled:!0,getLevel(){return this.level2Enabled&&fi.supportsInputEvents?2:0},pickFiles(i){const e=Z("input",{type:"file",multiple:!0,hidden:!0,id:this.fileInputId});e.addEventListener("change",()=>{i(e.files),Je(e)}),Je(document.getElementById(this.fileInputId)),document.body.appendChild(e),e.click()}};var Ri={removeBlankTableCells:!1,tableCellSeparator:" | ",tableRowSeparator:`
`},fn={bold:{tagName:"strong",inheritable:!0,parser(i){const e=window.getComputedStyle(i);return e.fontWeight==="bold"||e.fontWeight>=600}},italic:{tagName:"em",inheritable:!0,parser:i=>window.getComputedStyle(i).fontStyle==="italic"},href:{groupTagName:"a",parser(i){const e="a:not(".concat(un,")"),t=i.closest(e);if(t)return t.getAttribute("href")}},strike:{tagName:"del",inheritable:!0},frozen:{style:{backgroundColor:"highlight"}}},Qs={getDefaultHTML:()=>`<div class="trix-button-row">
      <span class="trix-button-group trix-button-group--text-tools" data-trix-button-group="text-tools">
        <button type="button" class="trix-button trix-button--icon trix-button--icon-bold" data-trix-attribute="bold" data-trix-key="b" title="`.concat(Y.bold,'" tabindex="-1">').concat(Y.bold,`</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-italic" data-trix-attribute="italic" data-trix-key="i" title="`).concat(Y.italic,'" tabindex="-1">').concat(Y.italic,`</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-strike" data-trix-attribute="strike" title="`).concat(Y.strike,'" tabindex="-1">').concat(Y.strike,`</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-link" data-trix-attribute="href" data-trix-action="link" data-trix-key="k" title="`).concat(Y.link,'" tabindex="-1">').concat(Y.link,`</button>
      </span>

      <span class="trix-button-group trix-button-group--block-tools" data-trix-button-group="block-tools">
        <button type="button" class="trix-button trix-button--icon trix-button--icon-heading-1" data-trix-attribute="heading1" title="`).concat(Y.heading1,'" tabindex="-1">').concat(Y.heading1,`</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-quote" data-trix-attribute="quote" title="`).concat(Y.quote,'" tabindex="-1">').concat(Y.quote,`</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-code" data-trix-attribute="code" title="`).concat(Y.code,'" tabindex="-1">').concat(Y.code,`</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-bullet-list" data-trix-attribute="bullet" title="`).concat(Y.bullets,'" tabindex="-1">').concat(Y.bullets,`</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-number-list" data-trix-attribute="number" title="`).concat(Y.numbers,'" tabindex="-1">').concat(Y.numbers,`</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-decrease-nesting-level" data-trix-action="decreaseNestingLevel" title="`).concat(Y.outdent,'" tabindex="-1">').concat(Y.outdent,`</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-increase-nesting-level" data-trix-action="increaseNestingLevel" title="`).concat(Y.indent,'" tabindex="-1">').concat(Y.indent,`</button>
      </span>

      <span class="trix-button-group trix-button-group--file-tools" data-trix-button-group="file-tools">
        <button type="button" class="trix-button trix-button--icon trix-button--icon-attach" data-trix-action="attachFiles" title="`).concat(Y.attachFiles,'" tabindex="-1">').concat(Y.attachFiles,`</button>
      </span>

      <span class="trix-button-group-spacer"></span>

      <span class="trix-button-group trix-button-group--history-tools" data-trix-button-group="history-tools">
        <button type="button" class="trix-button trix-button--icon trix-button--icon-undo" data-trix-action="undo" data-trix-key="z" title="`).concat(Y.undo,'" tabindex="-1">').concat(Y.undo,`</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-redo" data-trix-action="redo" data-trix-key="shift+z" title="`).concat(Y.redo,'" tabindex="-1">').concat(Y.redo,`</button>
      </span>
    </div>

    <div class="trix-dialogs" data-trix-dialogs>
      <div class="trix-dialog trix-dialog--link" data-trix-dialog="href" data-trix-dialog-attribute="href">
        <div class="trix-dialog__link-fields">
          <input type="url" name="href" class="trix-input trix-input--dialog" placeholder="`).concat(Y.urlPlaceholder,'" aria-label="').concat(Y.url,`" data-trix-validate-href required data-trix-input>
          <div class="trix-button-group">
            <input type="button" class="trix-button trix-button--dialog" value="`).concat(Y.link,`" data-trix-method="setAttribute">
            <input type="button" class="trix-button trix-button--dialog" value="`).concat(Y.unlink,`" data-trix-method="removeAttribute">
          </div>
        </div>
      </div>
    </div>`)};const qr={interval:5e3};var pi=Object.freeze({__proto__:null,attachments:fo,blockAttributes:Ht,browser:fi,css:{attachment:"attachment",attachmentCaption:"attachment__caption",attachmentCaptionEditor:"attachment__caption-editor",attachmentMetadata:"attachment__metadata",attachmentMetadataContainer:"attachment__metadata-container",attachmentName:"attachment__name",attachmentProgress:"attachment__progress",attachmentSize:"attachment__size",attachmentToolbar:"attachment__toolbar",attachmentGallery:"attachment-gallery"},dompurify:Ys,fileSize:Ks,input:mo,keyNames:{8:"backspace",9:"tab",13:"return",27:"escape",37:"left",39:"right",46:"delete",68:"d",72:"h",79:"o"},lang:Y,parser:Ri,textAttributes:fn,toolbar:Qs,undo:qr});class xt{static proxyMethod(e){const{name:t,toMethod:n,toProperty:r,optional:o}=Ol(e);this.prototype[t]=function(){let a,u;var p,v;return n?u=o?(p=this[n])===null||p===void 0?void 0:p.call(this):this[n]():r&&(u=this[r]),o?(a=(v=u)===null||v===void 0?void 0:v[t],a?Go.call(a,u,arguments):void 0):(a=u[t],Go.call(a,u,arguments))}}}const Ol=function(i){const e=i.match(Pl);if(!e)throw new Error("can't parse @proxyMethod expression: ".concat(i));const t={name:e[4]};return e[2]!=null?t.toMethod=e[1]:t.toProperty=e[1],e[3]!=null&&(t.optional=!0),t},{apply:Go}=Function.prototype,Pl=new RegExp("^(.+?)(\\(\\))?(\\?)?\\.(.+?)$");var ur,hr,dr;class ci extends xt{static box(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return e instanceof this?e:this.fromUCS2String(e==null?void 0:e.toString())}static fromUCS2String(e){return new this(e,Wr(e))}static fromCodepoints(e){return new this(zr(e),e)}constructor(e,t){super(...arguments),this.ucs2String=e,this.codepoints=t,this.length=this.codepoints.length,this.ucs2Length=this.ucs2String.length}offsetToUCS2Offset(e){return zr(this.codepoints.slice(0,Math.max(0,e))).length}offsetFromUCS2Offset(e){return Wr(this.ucs2String.slice(0,Math.max(0,e))).length}slice(){return this.constructor.fromCodepoints(this.codepoints.slice(...arguments))}charAt(e){return this.slice(e,e+1)}isEqualTo(e){return this.constructor.box(e).ucs2String===this.ucs2String}toJSON(){return this.ucs2String}getCacheKey(){return this.ucs2String}toString(){return this.ucs2String}}const Ml=((ur=Array.from)===null||ur===void 0?void 0:ur.call(Array,"ðŸ‘¼").length)===1,Nl=((hr=" ".codePointAt)===null||hr===void 0?void 0:hr.call(" ",0))!=null,Il=((dr=String.fromCodePoint)===null||dr===void 0?void 0:dr.call(String,32,128124))===" ðŸ‘¼";let Wr,zr;Wr=Ml&&Nl?i=>Array.from(i).map(e=>e.codePointAt(0)):function(i){const e=[];let t=0;const{length:n}=i;for(;t<n;){let r=i.charCodeAt(t++);if(55296<=r&&r<=56319&&t<n){const o=i.charCodeAt(t++);(64512&o)==56320?r=((1023&r)<<10)+(1023&o)+65536:t--}e.push(r)}return e},zr=Il?i=>String.fromCodePoint(...Array.from(i||[])):function(i){return(()=>{const e=[];return Array.from(i).forEach(t=>{let n="";t>65535&&(t-=65536,n+=String.fromCharCode(t>>>10&1023|55296),t=56320|1023&t),e.push(n+String.fromCharCode(t))}),e})().join("")};let Fl=0;class bn extends xt{static fromJSONString(e){return this.fromJSON(JSON.parse(e))}constructor(){super(...arguments),this.id=++Fl}hasSameConstructorAs(e){return this.constructor===(e==null?void 0:e.constructor)}isEqualTo(e){return this===e}inspect(){const e=[],t=this.contentsForInspection()||{};for(const n in t){const r=t[n];e.push("".concat(n,"=").concat(r))}return"#<".concat(this.constructor.name,":").concat(this.id).concat(e.length?" ".concat(e.join(", ")):"",">")}contentsForInspection(){}toJSONString(){return JSON.stringify(this)}toUTF16String(){return ci.box(this)}getCacheKey(){return this.id.toString()}}const pn=function(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];if(i.length!==e.length)return!1;for(let t=0;t<i.length;t++)if(i[t]!==e[t])return!1;return!0},bo=function(i){const e=i.slice(0);for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e.splice(...n),e},Bl=/[\u05BE\u05C0\u05C3\u05D0-\u05EA\u05F0-\u05F4\u061B\u061F\u0621-\u063A\u0640-\u064A\u066D\u0671-\u06B7\u06BA-\u06BE\u06C0-\u06CE\u06D0-\u06D5\u06E5\u06E6\u200F\u202B\u202E\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE72\uFE74\uFE76-\uFEFC]/,jl=function(){const i=Z("input",{dir:"auto",name:"x",dirName:"x.dir"}),e=Z("textarea",{dir:"auto",name:"y",dirName:"y.dir"}),t=Z("form");t.appendChild(i),t.appendChild(e);const n=function(){try{return new FormData(t).has(e.dirName)}catch{return!1}}(),r=function(){try{return i.matches(":dir(ltr),:dir(rtl)")}catch{return!1}}();return n?function(o){return e.value=o,new FormData(t).get(e.dirName)}:r?function(o){return i.value=o,i.matches(":dir(rtl)")?"rtl":"ltr"}:function(o){const a=o.trim().charAt(0);return Bl.test(a)?"rtl":"ltr"}}();let fr=null,pr=null,gr=null,Ci=null;const Vr=()=>(fr||(fr=Hl().concat(Ul())),fr),At=i=>Ht[i],Ul=()=>(pr||(pr=Object.keys(Ht)),pr),Jr=i=>fn[i],Hl=()=>(gr||(gr=Object.keys(fn)),gr),Zs=function(i,e){ql(i).textContent=e.replace(/%t/g,i)},ql=function(i){const e=document.createElement("style");e.setAttribute("type","text/css"),e.setAttribute("data-tag-name",i.toLowerCase());const t=Wl();return t&&e.setAttribute("nonce",t),document.head.insertBefore(e,document.head.firstChild),e},Wl=function(){const i=Qo("trix-csp-nonce")||Qo("csp-nonce");if(i){const{nonce:e,content:t}=i;return e==""?t:e}},Qo=i=>document.head.querySelector("meta[name=".concat(i,"]")),Zo={"application/x-trix-feature-detection":"test"},ta=function(i){const e=i.getData("text/plain"),t=i.getData("text/html");if(!e||!t)return e==null?void 0:e.length;{const{body:n}=new DOMParser().parseFromString(t,"text/html");if(n.textContent===e)return!n.querySelector("*")}},ea=/Mac|^iP/.test(navigator.platform)?i=>i.metaKey:i=>i.ctrlKey,vo=i=>setTimeout(i,1),na=function(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const e={};for(const t in i){const n=i[t];e[t]=n}return e},_n=function(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Object.keys(i).length!==Object.keys(e).length)return!1;for(const t in i)if(i[t]!==e[t])return!1;return!0},lt=function(i){if(i!=null)return Array.isArray(i)||(i=[i,i]),[ts(i[0]),ts(i[1]!=null?i[1]:i[0])]},Oe=function(i){if(i==null)return;const[e,t]=lt(i);return Yr(e,t)},Ni=function(i,e){if(i==null||e==null)return;const[t,n]=lt(i),[r,o]=lt(e);return Yr(t,r)&&Yr(n,o)},ts=function(i){return typeof i=="number"?i:na(i)},Yr=function(i,e){return typeof i=="number"?i===e:_n(i,e)};class ia extends xt{constructor(){super(...arguments),this.update=this.update.bind(this),this.selectionManagers=[]}start(){this.started||(this.started=!0,document.addEventListener("selectionchange",this.update,!0))}stop(){if(this.started)return this.started=!1,document.removeEventListener("selectionchange",this.update,!0)}registerSelectionManager(e){if(!this.selectionManagers.includes(e))return this.selectionManagers.push(e),this.start()}unregisterSelectionManager(e){if(this.selectionManagers=this.selectionManagers.filter(t=>t!==e),this.selectionManagers.length===0)return this.stop()}notifySelectionManagersOfSelectionChange(){return this.selectionManagers.map(e=>e.selectionDidChange())}update(){this.notifySelectionManagersOfSelectionChange()}reset(){this.update()}}const gn=new ia,ra=function(){const i=window.getSelection();if(i.rangeCount>0)return i},ni=function(){var i;const e=(i=ra())===null||i===void 0?void 0:i.getRangeAt(0);if(e&&!zl(e))return e},oa=function(i){const e=window.getSelection();return e.removeAllRanges(),e.addRange(i),gn.update()},zl=i=>es(i.startContainer)||es(i.endContainer),es=i=>!Object.getPrototypeOf(i),Qn=i=>i.replace(new RegExp("".concat(zi),"g"),"").replace(new RegExp("".concat(ze),"g")," "),yo=new RegExp("[^\\S".concat(ze,"]")),Ao=i=>i.replace(new RegExp("".concat(yo.source),"g")," ").replace(/\ {2,}/g," "),ns=function(i,e){if(i.isEqualTo(e))return["",""];const t=mr(i,e),{length:n}=t.utf16String;let r;if(n){const{offset:o}=t,a=i.codepoints.slice(0,o).concat(i.codepoints.slice(o+n));r=mr(e,ci.fromCodepoints(a))}else r=mr(e,i);return[t.utf16String.toString(),r.utf16String.toString()]},mr=function(i,e){let t=0,n=i.length,r=e.length;for(;t<n&&i.charAt(t).isEqualTo(e.charAt(t));)t++;for(;n>t+1&&i.charAt(n-1).isEqualTo(e.charAt(r-1));)n--,r--;return{utf16String:i.slice(t,n),offset:t}};class oe extends bn{static fromCommonAttributesOfObjects(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];if(!e.length)return new this;let t=Vn(e[0]),n=t.getKeys();return e.slice(1).forEach(r=>{n=t.getKeysCommonToHash(Vn(r)),t=t.slice(n)}),t}static box(e){return Vn(e)}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(...arguments),this.values=Li(e)}add(e,t){return this.merge(Vl(e,t))}remove(e){return new oe(Li(this.values,e))}get(e){return this.values[e]}has(e){return e in this.values}merge(e){return new oe(Jl(this.values,Yl(e)))}slice(e){const t={};return Array.from(e).forEach(n=>{this.has(n)&&(t[n]=this.values[n])}),new oe(t)}getKeys(){return Object.keys(this.values)}getKeysCommonToHash(e){return e=Vn(e),this.getKeys().filter(t=>this.values[t]===e.values[t])}isEqualTo(e){return pn(this.toArray(),Vn(e).toArray())}isEmpty(){return this.getKeys().length===0}toArray(){if(!this.array){const e=[];for(const t in this.values){const n=this.values[t];e.push(e.push(t,n))}this.array=e.slice(0)}return this.array}toObject(){return Li(this.values)}toJSON(){return this.toObject()}contentsForInspection(){return{values:JSON.stringify(this.values)}}}const Vl=function(i,e){const t={};return t[i]=e,t},Jl=function(i,e){const t=Li(i);for(const n in e){const r=e[n];t[n]=r}return t},Li=function(i,e){const t={};return Object.keys(i).sort().forEach(n=>{n!==e&&(t[n]=i[n])}),t},Vn=function(i){return i instanceof oe?i:new oe(i)},Yl=function(i){return i instanceof oe?i.values:i};class wo{static groupObjects(){let e,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],{depth:n,asTree:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};r&&n==null&&(n=0);const o=[];return Array.from(t).forEach(a=>{var u;if(e){var p,v,y;if((p=a.canBeGrouped)!==null&&p!==void 0&&p.call(a,n)&&(v=(y=e[e.length-1]).canBeGroupedWith)!==null&&v!==void 0&&v.call(y,a,n))return void e.push(a);o.push(new this(e,{depth:n,asTree:r})),e=null}(u=a.canBeGrouped)!==null&&u!==void 0&&u.call(a,n)?e=[a]:o.push(a)}),e&&o.push(new this(e,{depth:n,asTree:r})),o}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],{depth:t,asTree:n}=arguments.length>1?arguments[1]:void 0;this.objects=e,n&&(this.depth=t,this.objects=this.constructor.groupObjects(this.objects,{asTree:n,depth:this.depth+1}))}getObjects(){return this.objects}getDepth(){return this.depth}getCacheKey(){const e=["objectGroup"];return Array.from(this.getObjects()).forEach(t=>{e.push(t.getCacheKey())}),e.join("/")}}class Kl extends xt{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];super(...arguments),this.objects={},Array.from(e).forEach(t=>{const n=JSON.stringify(t);this.objects[n]==null&&(this.objects[n]=t)})}find(e){const t=JSON.stringify(e);return this.objects[t]}}class $l{constructor(e){this.reset(e)}add(e){const t=is(e);this.elements[t]=e}remove(e){const t=is(e),n=this.elements[t];if(n)return delete this.elements[t],n}reset(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return this.elements={},Array.from(e).forEach(t=>{this.add(t)}),e}}const is=i=>i.dataset.trixStoreKey;class Ii extends xt{isPerforming(){return this.performing===!0}hasPerformed(){return this.performed===!0}hasSucceeded(){return this.performed&&this.succeeded}hasFailed(){return this.performed&&!this.succeeded}getPromise(){return this.promise||(this.promise=new Promise((e,t)=>(this.performing=!0,this.perform((n,r)=>{this.succeeded=n,this.performing=!1,this.performed=!0,this.succeeded?e(r):t(r)})))),this.promise}perform(e){return e(!1)}release(){var e,t;(e=this.promise)===null||e===void 0||(t=e.cancel)===null||t===void 0||t.call(e),this.promise=null,this.performing=null,this.performed=null,this.succeeded=null}}Ii.proxyMethod("getPromise().then"),Ii.proxyMethod("getPromise().catch");class vn extends xt{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(...arguments),this.object=e,this.options=t,this.childViews=[],this.rootView=this}getNodes(){return this.nodes||(this.nodes=this.createNodes()),this.nodes.map(e=>e.cloneNode(!0))}invalidate(){var e;return this.nodes=null,this.childViews=[],(e=this.parentView)===null||e===void 0?void 0:e.invalidate()}invalidateViewForObject(e){var t;return(t=this.findViewForObject(e))===null||t===void 0?void 0:t.invalidate()}findOrCreateCachedChildView(e,t,n){let r=this.getCachedViewForObject(t);return r?this.recordChildView(r):(r=this.createChildView(...arguments),this.cacheViewForObject(r,t)),r}createChildView(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};t instanceof wo&&(n.viewClass=e,e=Xl);const r=new e(t,n);return this.recordChildView(r)}recordChildView(e){return e.parentView=this,e.rootView=this.rootView,this.childViews.push(e),e}getAllChildViews(){let e=[];return this.childViews.forEach(t=>{e.push(t),e=e.concat(t.getAllChildViews())}),e}findElement(){return this.findElementForObject(this.object)}findElementForObject(e){const t=e==null?void 0:e.id;if(t)return this.rootView.element.querySelector("[data-trix-id='".concat(t,"']"))}findViewForObject(e){for(const t of this.getAllChildViews())if(t.object===e)return t}getViewCache(){return this.rootView!==this?this.rootView.getViewCache():this.isViewCachingEnabled()?(this.viewCache||(this.viewCache={}),this.viewCache):void 0}isViewCachingEnabled(){return this.shouldCacheViews!==!1}enableViewCaching(){this.shouldCacheViews=!0}disableViewCaching(){this.shouldCacheViews=!1}getCachedViewForObject(e){var t;return(t=this.getViewCache())===null||t===void 0?void 0:t[e.getCacheKey()]}cacheViewForObject(e,t){const n=this.getViewCache();n&&(n[t.getCacheKey()]=e)}garbageCollectCachedViews(){const e=this.getViewCache();if(e){const t=this.getAllChildViews().concat(this).map(n=>n.object.getCacheKey());for(const n in e)t.includes(n)||delete e[n]}}}class Xl extends vn{constructor(){super(...arguments),this.objectGroup=this.object,this.viewClass=this.options.viewClass,delete this.options.viewClass}getChildViews(){return this.childViews.length||Array.from(this.objectGroup.getObjects()).forEach(e=>{this.findOrCreateCachedChildView(this.viewClass,e,this.options)}),this.childViews}createNodes(){const e=this.createContainerElement();return this.getChildViews().forEach(t=>{Array.from(t.getNodes()).forEach(n=>{e.appendChild(n)})}),[e]}createContainerElement(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.objectGroup.getDepth();return this.getChildViews()[0].createContainerElement(e)}}/*! @license DOMPurify 3.2.3 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.3/LICENSE */const{entries:sa,setPrototypeOf:rs,isFrozen:Gl,getPrototypeOf:Ql,getOwnPropertyDescriptor:Zl}=Object;let{freeze:qt,seal:fe,create:aa}=Object,{apply:Kr,construct:$r}=typeof Reflect<"u"&&Reflect;qt||(qt=function(i){return i}),fe||(fe=function(i){return i}),Kr||(Kr=function(i,e,t){return i.apply(e,t)}),$r||($r=function(i,e){return new i(...e)});const xi=ae(Array.prototype.forEach),os=ae(Array.prototype.pop),Jn=ae(Array.prototype.push),_i=ae(String.prototype.toLowerCase),br=ae(String.prototype.toString),ss=ae(String.prototype.match),Yn=ae(String.prototype.replace),tu=ae(String.prototype.indexOf),eu=ae(String.prototype.trim),ve=ae(Object.prototype.hasOwnProperty),Bt=ae(RegExp.prototype.test),Kn=(as=TypeError,function(){for(var i=arguments.length,e=new Array(i),t=0;t<i;t++)e[t]=arguments[t];return $r(as,e)});var as;function ae(i){return function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Kr(i,e,n)}}function tt(i,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:_i;rs&&rs(i,null);let n=e.length;for(;n--;){let r=e[n];if(typeof r=="string"){const o=t(r);o!==r&&(Gl(e)||(e[n]=o),r=o)}i[r]=!0}return i}function nu(i){for(let e=0;e<i.length;e++)ve(i,e)||(i[e]=null);return i}function on(i){const e=aa(null);for(const[t,n]of sa(i))ve(i,t)&&(Array.isArray(n)?e[t]=nu(n):n&&typeof n=="object"&&n.constructor===Object?e[t]=on(n):e[t]=n);return e}function $n(i,e){for(;i!==null;){const t=Zl(i,e);if(t){if(t.get)return ae(t.get);if(typeof t.value=="function")return ae(t.value)}i=Ql(i)}return function(){return null}}const cs=qt(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),vr=qt(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),yr=qt(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),iu=qt(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Ar=qt(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),ru=qt(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),ls=qt(["#text"]),us=qt(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),wr=qt(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),hs=qt(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Si=qt(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),ou=fe(/\{\{[\w\W]*|[\w\W]*\}\}/gm),su=fe(/<%[\w\W]*|[\w\W]*%>/gm),au=fe(/\$\{[\w\W]*}/gm),cu=fe(/^data-[\-\w.\u00B7-\uFFFF]+$/),lu=fe(/^aria-[\-\w]+$/),ca=fe(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),uu=fe(/^(?:\w+script|data):/i),hu=fe(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),la=fe(/^html$/i),du=fe(/^[a-z][.\w]*(-[.\w]+)+$/i);var ds=Object.freeze({__proto__:null,ARIA_ATTR:lu,ATTR_WHITESPACE:hu,CUSTOM_ELEMENT:du,DATA_ATTR:cu,DOCTYPE_NAME:la,ERB_EXPR:su,IS_ALLOWED_URI:ca,IS_SCRIPT_OR_DATA:uu,MUSTACHE_EXPR:ou,TMPLIT_EXPR:au});const fu=1,pu=3,gu=7,mu=8,bu=9,vu=function(){return typeof window>"u"?null:window};var Fi=function i(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:vu();const t=m=>i(m);if(t.version="3.2.3",t.removed=[],!e||!e.document||e.document.nodeType!==bu)return t.isSupported=!1,t;let{document:n}=e;const r=n,o=r.currentScript,{DocumentFragment:a,HTMLTemplateElement:u,Node:p,Element:v,NodeFilter:y,NamedNodeMap:k=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:D,DOMParser:_,trustedTypes:E}=e,C=v.prototype,A=$n(C,"cloneNode"),T=$n(C,"remove"),P=$n(C,"nextSibling"),U=$n(C,"childNodes"),q=$n(C,"parentNode");if(typeof u=="function"){const m=n.createElement("template");m.content&&m.content.ownerDocument&&(n=m.content.ownerDocument)}let j,Q="";const{implementation:rt,createNodeIterator:ht,createDocumentFragment:kt,getElementsByTagName:Ot}=n,{importNode:Nn}=r;let gt={afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]};t.isSupported=typeof sa=="function"&&typeof q=="function"&&rt&&rt.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:Nt,ERB_EXPR:Ye,TMPLIT_EXPR:Pe,DATA_ATTR:In,ARIA_ATTR:Fn,IS_SCRIPT_OR_DATA:An,ATTR_WHITESPACE:Me,CUSTOM_ELEMENT:Bn}=ds;let{IS_ALLOWED_URI:Ne}=ds,ut=null;const wn=tt({},[...cs,...vr,...yr,...Ar,...ls]);let vt=null;const ft=tt({},[...us,...wr,...hs,...Si]);let G=Object.seal(aa(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),ce=null,Wt=null,Rt=!0,Ie=!0,Ke=!1,Zt=!0,pe=!1,$e=!0,te=!1,Fe=!1,Be=!1,le=!1,ge=!1,je=!1,Cn=!0,Xe=!1,ue=!0,we=!1,et={},Ce=null;const Ge=tt({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let xn=null;const Qe=tt({},["audio","video","img","source","image","track"]);let Ze=null;const Sn=tt({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Ee="http://www.w3.org/1998/Math/MathML",xe="http://www.w3.org/2000/svg",It="http://www.w3.org/1999/xhtml";let ot=It,Te=!1,De=null;const jn=tt({},[Ee,xe,It],br);let ee=tt({},["mi","mo","mn","ms","mtext"]),Et=tt({},["annotation-xml"]);const ne=tt({},["title","style","font","a","script"]);let zt=null;const Un=["application/xhtml+xml","text/html"];let h=null,f=null;const b=n.createElement("form"),w=function(m){return m instanceof RegExp||m instanceof Function},R=function(){let m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!f||f!==m){if(m&&typeof m=="object"||(m={}),m=on(m),zt=Un.indexOf(m.PARSER_MEDIA_TYPE)===-1?"text/html":m.PARSER_MEDIA_TYPE,h=zt==="application/xhtml+xml"?br:_i,ut=ve(m,"ALLOWED_TAGS")?tt({},m.ALLOWED_TAGS,h):wn,vt=ve(m,"ALLOWED_ATTR")?tt({},m.ALLOWED_ATTR,h):ft,De=ve(m,"ALLOWED_NAMESPACES")?tt({},m.ALLOWED_NAMESPACES,br):jn,Ze=ve(m,"ADD_URI_SAFE_ATTR")?tt(on(Sn),m.ADD_URI_SAFE_ATTR,h):Sn,xn=ve(m,"ADD_DATA_URI_TAGS")?tt(on(Qe),m.ADD_DATA_URI_TAGS,h):Qe,Ce=ve(m,"FORBID_CONTENTS")?tt({},m.FORBID_CONTENTS,h):Ge,ce=ve(m,"FORBID_TAGS")?tt({},m.FORBID_TAGS,h):{},Wt=ve(m,"FORBID_ATTR")?tt({},m.FORBID_ATTR,h):{},et=!!ve(m,"USE_PROFILES")&&m.USE_PROFILES,Rt=m.ALLOW_ARIA_ATTR!==!1,Ie=m.ALLOW_DATA_ATTR!==!1,Ke=m.ALLOW_UNKNOWN_PROTOCOLS||!1,Zt=m.ALLOW_SELF_CLOSE_IN_ATTR!==!1,pe=m.SAFE_FOR_TEMPLATES||!1,$e=m.SAFE_FOR_XML!==!1,te=m.WHOLE_DOCUMENT||!1,le=m.RETURN_DOM||!1,ge=m.RETURN_DOM_FRAGMENT||!1,je=m.RETURN_TRUSTED_TYPE||!1,Be=m.FORCE_BODY||!1,Cn=m.SANITIZE_DOM!==!1,Xe=m.SANITIZE_NAMED_PROPS||!1,ue=m.KEEP_CONTENT!==!1,we=m.IN_PLACE||!1,Ne=m.ALLOWED_URI_REGEXP||ca,ot=m.NAMESPACE||It,ee=m.MATHML_TEXT_INTEGRATION_POINTS||ee,Et=m.HTML_INTEGRATION_POINTS||Et,G=m.CUSTOM_ELEMENT_HANDLING||{},m.CUSTOM_ELEMENT_HANDLING&&w(m.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(G.tagNameCheck=m.CUSTOM_ELEMENT_HANDLING.tagNameCheck),m.CUSTOM_ELEMENT_HANDLING&&w(m.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(G.attributeNameCheck=m.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),m.CUSTOM_ELEMENT_HANDLING&&typeof m.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(G.allowCustomizedBuiltInElements=m.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),pe&&(Ie=!1),ge&&(le=!0),et&&(ut=tt({},ls),vt=[],et.html===!0&&(tt(ut,cs),tt(vt,us)),et.svg===!0&&(tt(ut,vr),tt(vt,wr),tt(vt,Si)),et.svgFilters===!0&&(tt(ut,yr),tt(vt,wr),tt(vt,Si)),et.mathMl===!0&&(tt(ut,Ar),tt(vt,hs),tt(vt,Si))),m.ADD_TAGS&&(ut===wn&&(ut=on(ut)),tt(ut,m.ADD_TAGS,h)),m.ADD_ATTR&&(vt===ft&&(vt=on(vt)),tt(vt,m.ADD_ATTR,h)),m.ADD_URI_SAFE_ATTR&&tt(Ze,m.ADD_URI_SAFE_ATTR,h),m.FORBID_CONTENTS&&(Ce===Ge&&(Ce=on(Ce)),tt(Ce,m.FORBID_CONTENTS,h)),ue&&(ut["#text"]=!0),te&&tt(ut,["html","head","body"]),ut.table&&(tt(ut,["tbody"]),delete ce.tbody),m.TRUSTED_TYPES_POLICY){if(typeof m.TRUSTED_TYPES_POLICY.createHTML!="function")throw Kn('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof m.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Kn('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');j=m.TRUSTED_TYPES_POLICY,Q=j.createHTML("")}else j===void 0&&(j=function(F,O){if(typeof F!="object"||typeof F.createPolicy!="function")return null;let $=null;const nt="data-tt-policy-suffix";O&&O.hasAttribute(nt)&&($=O.getAttribute(nt));const X="dompurify"+($?"#"+$:"");try{return F.createPolicy(X,{createHTML:mt=>mt,createScriptURL:mt=>mt})}catch{return console.warn("TrustedTypes policy "+X+" could not be created."),null}}(E,o)),j!==null&&typeof Q=="string"&&(Q=j.createHTML(""));qt&&qt(m),f=m}},N=tt({},[...vr,...yr,...iu]),W=tt({},[...Ar,...ru]),M=function(m){Jn(t.removed,{element:m});try{q(m).removeChild(m)}catch{T(m)}},z=function(m,F){try{Jn(t.removed,{attribute:F.getAttributeNode(m),from:F})}catch{Jn(t.removed,{attribute:null,from:F})}if(F.removeAttribute(m),m==="is")if(le||ge)try{M(F)}catch{}else try{F.setAttribute(m,"")}catch{}},I=function(m){let F=null,O=null;if(Be)m="<remove></remove>"+m;else{const X=ss(m,/^[\r\n\t ]+/);O=X&&X[0]}zt==="application/xhtml+xml"&&ot===It&&(m='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+m+"</body></html>");const $=j?j.createHTML(m):m;if(ot===It)try{F=new _().parseFromString($,zt)}catch{}if(!F||!F.documentElement){F=rt.createDocument(ot,"template",null);try{F.documentElement.innerHTML=Te?Q:$}catch{}}const nt=F.body||F.documentElement;return m&&O&&nt.insertBefore(n.createTextNode(O),nt.childNodes[0]||null),ot===It?Ot.call(F,te?"html":"body")[0]:te?F.documentElement:nt},H=function(m){return ht.call(m.ownerDocument||m,m,y.SHOW_ELEMENT|y.SHOW_COMMENT|y.SHOW_TEXT|y.SHOW_PROCESSING_INSTRUCTION|y.SHOW_CDATA_SECTION,null)},it=function(m){return m instanceof D&&(typeof m.nodeName!="string"||typeof m.textContent!="string"||typeof m.removeChild!="function"||!(m.attributes instanceof k)||typeof m.removeAttribute!="function"||typeof m.setAttribute!="function"||typeof m.namespaceURI!="string"||typeof m.insertBefore!="function"||typeof m.hasChildNodes!="function")},Ft=function(m){return typeof p=="function"&&m instanceof p};function pt(m,F,O){xi(m,$=>{$.call(t,F,O,f)})}const Se=function(m){let F=null;if(pt(gt.beforeSanitizeElements,m,null),it(m))return M(m),!0;const O=h(m.nodeName);if(pt(gt.uponSanitizeElement,m,{tagName:O,allowedTags:ut}),m.hasChildNodes()&&!Ft(m.firstElementChild)&&Bt(/<[/\w]/g,m.innerHTML)&&Bt(/<[/\w]/g,m.textContent)||m.nodeType===gu||$e&&m.nodeType===mu&&Bt(/<[/\w]/g,m.data))return M(m),!0;if(!ut[O]||ce[O]){if(!ce[O]&&tn(O)&&(G.tagNameCheck instanceof RegExp&&Bt(G.tagNameCheck,O)||G.tagNameCheck instanceof Function&&G.tagNameCheck(O)))return!1;if(ue&&!Ce[O]){const $=q(m)||m.parentNode,nt=U(m)||m.childNodes;if(nt&&$)for(let X=nt.length-1;X>=0;--X){const mt=A(nt[X],!0);mt.__removalCount=(m.__removalCount||0)+1,$.insertBefore(mt,P(m))}}return M(m),!0}return m instanceof v&&!function($){let nt=q($);nt&&nt.tagName||(nt={namespaceURI:ot,tagName:"template"});const X=_i($.tagName),mt=_i(nt.tagName);return!!De[$.namespaceURI]&&($.namespaceURI===xe?nt.namespaceURI===It?X==="svg":nt.namespaceURI===Ee?X==="svg"&&(mt==="annotation-xml"||ee[mt]):!!N[X]:$.namespaceURI===Ee?nt.namespaceURI===It?X==="math":nt.namespaceURI===xe?X==="math"&&Et[mt]:!!W[X]:$.namespaceURI===It?!(nt.namespaceURI===xe&&!Et[mt])&&!(nt.namespaceURI===Ee&&!ee[mt])&&!W[X]&&(ne[X]||!N[X]):!(zt!=="application/xhtml+xml"||!De[$.namespaceURI]))}(m)?(M(m),!0):O!=="noscript"&&O!=="noembed"&&O!=="noframes"||!Bt(/<\/no(script|embed|frames)/i,m.innerHTML)?(pe&&m.nodeType===pu&&(F=m.textContent,xi([Nt,Ye,Pe],$=>{F=Yn(F,$," ")}),m.textContent!==F&&(Jn(t.removed,{element:m.cloneNode()}),m.textContent=F)),pt(gt.afterSanitizeElements,m,null),!1):(M(m),!0)},me=function(m,F,O){if(Cn&&(F==="id"||F==="name")&&(O in n||O in b))return!1;if(!(Ie&&!Wt[F]&&Bt(In,F))){if(!(Rt&&Bt(Fn,F))){if(!vt[F]||Wt[F]){if(!(tn(m)&&(G.tagNameCheck instanceof RegExp&&Bt(G.tagNameCheck,m)||G.tagNameCheck instanceof Function&&G.tagNameCheck(m))&&(G.attributeNameCheck instanceof RegExp&&Bt(G.attributeNameCheck,F)||G.attributeNameCheck instanceof Function&&G.attributeNameCheck(F))||F==="is"&&G.allowCustomizedBuiltInElements&&(G.tagNameCheck instanceof RegExp&&Bt(G.tagNameCheck,O)||G.tagNameCheck instanceof Function&&G.tagNameCheck(O))))return!1}else if(!Ze[F]){if(!Bt(Ne,Yn(O,Me,""))){if((F!=="src"&&F!=="xlink:href"&&F!=="href"||m==="script"||tu(O,"data:")!==0||!xn[m])&&!(Ke&&!Bt(An,Yn(O,Me,"")))){if(O)return!1}}}}}return!0},tn=function(m){return m!=="annotation-xml"&&ss(m,Bn)},Vt=function(m){pt(gt.beforeSanitizeAttributes,m,null);const{attributes:F}=m;if(!F||it(m))return;const O={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:vt,forceKeepAttr:void 0};let $=F.length;for(;$--;){const nt=F[$],{name:X,namespaceURI:mt,value:be}=nt,Jt=h(X);let Lt=X==="value"?be:eu(be);if(O.attrName=Jt,O.attrValue=Lt,O.keepAttr=!0,O.forceKeepAttr=void 0,pt(gt.uponSanitizeAttribute,m,O),Lt=O.attrValue,!Xe||Jt!=="id"&&Jt!=="name"||(z(X,m),Lt="user-content-"+Lt),$e&&Bt(/((--!?|])>)|<\/(style|title)/i,Lt)){z(X,m);continue}if(O.forceKeepAttr||(z(X,m),!O.keepAttr))continue;if(!Zt&&Bt(/\/>/i,Lt)){z(X,m);continue}pe&&xi([Nt,Ye,Pe],vi=>{Lt=Yn(Lt,vi," ")});const bi=h(m.nodeName);if(me(bi,Jt,Lt)){if(j&&typeof E=="object"&&typeof E.getAttributeType=="function"&&!mt)switch(E.getAttributeType(bi,Jt)){case"TrustedHTML":Lt=j.createHTML(Lt);break;case"TrustedScriptURL":Lt=j.createScriptURL(Lt)}try{mt?m.setAttributeNS(mt,X,Lt):m.setAttribute(X,Lt),it(m)?M(m):os(t.removed)}catch{}}}pt(gt.afterSanitizeAttributes,m,null)},Hn=function m(F){let O=null;const $=H(F);for(pt(gt.beforeSanitizeShadowDOM,F,null);O=$.nextNode();)pt(gt.uponSanitizeShadowNode,O,null),Se(O),Vt(O),O.content instanceof a&&m(O.content);pt(gt.afterSanitizeShadowDOM,F,null)};return t.sanitize=function(m){let F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},O=null,$=null,nt=null,X=null;if(Te=!m,Te&&(m="<!-->"),typeof m!="string"&&!Ft(m)){if(typeof m.toString!="function")throw Kn("toString is not a function");if(typeof(m=m.toString())!="string")throw Kn("dirty is not a string, aborting")}if(!t.isSupported)return m;if(Fe||R(F),t.removed=[],typeof m=="string"&&(we=!1),we){if(m.nodeName){const Jt=h(m.nodeName);if(!ut[Jt]||ce[Jt])throw Kn("root node is forbidden and cannot be sanitized in-place")}}else if(m instanceof p)O=I("<!---->"),$=O.ownerDocument.importNode(m,!0),$.nodeType===fu&&$.nodeName==="BODY"||$.nodeName==="HTML"?O=$:O.appendChild($);else{if(!le&&!pe&&!te&&m.indexOf("<")===-1)return j&&je?j.createHTML(m):m;if(O=I(m),!O)return le?null:je?Q:""}O&&Be&&M(O.firstChild);const mt=H(we?m:O);for(;nt=mt.nextNode();)Se(nt),Vt(nt),nt.content instanceof a&&Hn(nt.content);if(we)return m;if(le){if(ge)for(X=kt.call(O.ownerDocument);O.firstChild;)X.appendChild(O.firstChild);else X=O;return(vt.shadowroot||vt.shadowrootmode)&&(X=Nn.call(r,X,!0)),X}let be=te?O.outerHTML:O.innerHTML;return te&&ut["!doctype"]&&O.ownerDocument&&O.ownerDocument.doctype&&O.ownerDocument.doctype.name&&Bt(la,O.ownerDocument.doctype.name)&&(be="<!DOCTYPE "+O.ownerDocument.doctype.name+`>
`+be),pe&&xi([Nt,Ye,Pe],Jt=>{be=Yn(be,Jt," ")}),j&&je?j.createHTML(be):be},t.setConfig=function(){R(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}),Fe=!0},t.clearConfig=function(){f=null,Fe=!1},t.isValidAttribute=function(m,F,O){f||R({});const $=h(m),nt=h(F);return me($,nt,O)},t.addHook=function(m,F){typeof F=="function"&&Jn(gt[m],F)},t.removeHook=function(m){return os(gt[m])},t.removeHooks=function(m){gt[m]=[]},t.removeAllHooks=function(){gt={afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}},t}();Fi.addHook("uponSanitizeAttribute",function(i,e){/^data-trix-/.test(e.attrName)&&(e.forceKeepAttr=!0)});const yu="style href src width height language class".split(" "),Au="javascript:".split(" "),wu="script iframe form noscript".split(" ");class Vi extends xt{static setHTML(e,t){const n=new this(t).sanitize(),r=n.getHTML?n.getHTML():n.outerHTML;e.innerHTML=r}static sanitize(e,t){const n=new this(e,t);return n.sanitize(),n}constructor(e){let{allowedAttributes:t,forbiddenProtocols:n,forbiddenElements:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(...arguments),this.allowedAttributes=t||yu,this.forbiddenProtocols=n||Au,this.forbiddenElements=r||wu,this.body=Cu(e)}sanitize(){return this.sanitizeElements(),this.normalizeListElementNesting(),Fi.setConfig(Ys),this.body=Fi.sanitize(this.body),this.body}getHTML(){return this.body.innerHTML}getBody(){return this.body}sanitizeElements(){const e=Mi(this.body),t=[];for(;e.nextNode();){const n=e.currentNode;switch(n.nodeType){case Node.ELEMENT_NODE:this.elementIsRemovable(n)?t.push(n):this.sanitizeElement(n);break;case Node.COMMENT_NODE:t.push(n)}}return t.forEach(n=>Je(n)),this.body}sanitizeElement(e){return e.hasAttribute("href")&&this.forbiddenProtocols.includes(e.protocol)&&e.removeAttribute("href"),Array.from(e.attributes).forEach(t=>{let{name:n}=t;this.allowedAttributes.includes(n)||n.indexOf("data-trix")===0||e.removeAttribute(n)}),e}normalizeListElementNesting(){return Array.from(this.body.querySelectorAll("ul,ol")).forEach(e=>{const t=e.previousElementSibling;t&&Ut(t)==="li"&&t.appendChild(e)}),this.body}elementIsRemovable(e){if((e==null?void 0:e.nodeType)===Node.ELEMENT_NODE)return this.elementIsForbidden(e)||this.elementIsntSerializable(e)}elementIsForbidden(e){return this.forbiddenElements.includes(Ut(e))}elementIsntSerializable(e){return e.getAttribute("data-trix-serialize")==="false"&&!hn(e)}}const Cu=function(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";i=i.replace(/<\/html[^>]*>[^]*$/i,"</html>");const e=document.implementation.createHTMLDocument("");return e.documentElement.innerHTML=i,Array.from(e.head.querySelectorAll("style")).forEach(t=>{e.body.appendChild(t)}),e.body},{css:Ue}=pi;class Co extends vn{constructor(){super(...arguments),this.attachment=this.object,this.attachment.uploadProgressDelegate=this,this.attachmentPiece=this.options.piece}createContentNodes(){return[]}createNodes(){let e;const t=e=Z({tagName:"figure",className:this.getClassName(),data:this.getData(),editable:!1}),n=this.getHref();return n&&(e=Z({tagName:"a",editable:!1,attributes:{href:n,tabindex:-1}}),t.appendChild(e)),this.attachment.hasContent()?Vi.setHTML(e,this.attachment.getContent()):this.createContentNodes().forEach(r=>{e.appendChild(r)}),e.appendChild(this.createCaptionElement()),this.attachment.isPending()&&(this.progressElement=Z({tagName:"progress",attributes:{class:Ue.attachmentProgress,value:this.attachment.getUploadProgress(),max:100},data:{trixMutable:!0,trixStoreKey:["progressElement",this.attachment.id].join("/")}}),t.appendChild(this.progressElement)),[fs("left"),t,fs("right")]}createCaptionElement(){const e=Z({tagName:"figcaption",className:Ue.attachmentCaption}),t=this.attachmentPiece.getCaption();if(t)e.classList.add("".concat(Ue.attachmentCaption,"--edited")),e.textContent=t;else{let n,r;const o=this.getCaptionConfig();if(o.name&&(n=this.attachment.getFilename()),o.size&&(r=this.attachment.getFormattedFilesize()),n){const a=Z({tagName:"span",className:Ue.attachmentName,textContent:n});e.appendChild(a)}if(r){n&&e.appendChild(document.createTextNode(" "));const a=Z({tagName:"span",className:Ue.attachmentSize,textContent:r});e.appendChild(a)}}return e}getClassName(){const e=[Ue.attachment,"".concat(Ue.attachment,"--").concat(this.attachment.getType())],t=this.attachment.getExtension();return t&&e.push("".concat(Ue.attachment,"--").concat(t)),e.join(" ")}getData(){const e={trixAttachment:JSON.stringify(this.attachment),trixContentType:this.attachment.getContentType(),trixId:this.attachment.id},{attributes:t}=this.attachmentPiece;return t.isEmpty()||(e.trixAttributes=JSON.stringify(t)),this.attachment.isPending()&&(e.trixSerialize=!1),e}getHref(){if(!xu(this.attachment.getContent(),"a"))return this.attachment.getHref()}getCaptionConfig(){var e;const t=this.attachment.getType(),n=na((e=fo[t])===null||e===void 0?void 0:e.caption);return t==="file"&&(n.name=!0),n}findProgressElement(){var e;return(e=this.findElement())===null||e===void 0?void 0:e.querySelector("progress")}attachmentDidChangeUploadProgress(){const e=this.attachment.getUploadProgress(),t=this.findProgressElement();t&&(t.value=e)}}const fs=i=>Z({tagName:"span",textContent:zi,data:{trixCursorTarget:i,trixSerialize:!1}}),xu=function(i,e){const t=Z("div");return Vi.setHTML(t,i||""),t.querySelector(e)};class ua extends Co{constructor(){super(...arguments),this.attachment.previewDelegate=this}createContentNodes(){return this.image=Z({tagName:"img",attributes:{src:""},data:{trixMutable:!0}}),this.refresh(this.image),[this.image]}createCaptionElement(){const e=super.createCaptionElement(...arguments);return e.textContent||e.setAttribute("data-trix-placeholder",Y.captionPlaceholder),e}refresh(e){var t;if(e||(e=(t=this.findElement())===null||t===void 0?void 0:t.querySelector("img")),e)return this.updateAttributesForImage(e)}updateAttributesForImage(e){const t=this.attachment.getURL(),n=this.attachment.getPreviewURL();if(e.src=n||t,n===t)e.removeAttribute("data-trix-serialized-attributes");else{const u=JSON.stringify({src:t});e.setAttribute("data-trix-serialized-attributes",u)}const r=this.attachment.getWidth(),o=this.attachment.getHeight();r!=null&&(e.width=r),o!=null&&(e.height=o);const a=["imageElement",this.attachment.id,e.src,e.width,e.height].join("/");e.dataset.trixStoreKey=a}attachmentDidChangeAttributes(){return this.refresh(this.image),this.refresh()}}class ha extends vn{constructor(){super(...arguments),this.piece=this.object,this.attributes=this.piece.getAttributes(),this.textConfig=this.options.textConfig,this.context=this.options.context,this.piece.attachment?this.attachment=this.piece.attachment:this.string=this.piece.toString()}createNodes(){let e=this.attachment?this.createAttachmentNodes():this.createStringNodes();const t=this.createElement();if(t){const n=function(r){for(;(o=r)!==null&&o!==void 0&&o.firstElementChild;){var o;r=r.firstElementChild}return r}(t);Array.from(e).forEach(r=>{n.appendChild(r)}),e=[t]}return e}createAttachmentNodes(){const e=this.attachment.isPreviewable()?ua:Co;return this.createChildView(e,this.piece.attachment,{piece:this.piece}).getNodes()}createStringNodes(){var e;if((e=this.textConfig)!==null&&e!==void 0&&e.plaintext)return[document.createTextNode(this.string)];{const t=[],n=this.string.split(`
`);for(let r=0;r<n.length;r++){const o=n[r];if(r>0){const a=Z("br");t.push(a)}if(o.length){const a=document.createTextNode(this.preserveSpaces(o));t.push(a)}}return t}}createElement(){let e,t,n;const r={};for(t in this.attributes){n=this.attributes[t];const a=Jr(t);if(a){if(a.tagName){var o;const u=Z(a.tagName);o?(o.appendChild(u),o=u):e=o=u}if(a.styleProperty&&(r[a.styleProperty]=n),a.style)for(t in a.style)n=a.style[t],r[t]=n}}if(Object.keys(r).length)for(t in e||(e=Z("span")),r)n=r[t],e.style[t]=n;return e}createContainerElement(){for(const e in this.attributes){const t=this.attributes[e],n=Jr(e);if(n&&n.groupTagName){const r={};return r[e]=t,Z(n.groupTagName,r)}}}preserveSpaces(e){return this.context.isLast&&(e=e.replace(/\ $/,ze)),e=e.replace(/(\S)\ {3}(\S)/g,"$1 ".concat(ze," $2")).replace(/\ {2}/g,"".concat(ze," ")).replace(/\ {2}/g," ".concat(ze)),(this.context.isFirst||this.context.followsWhitespace)&&(e=e.replace(/^\ /,ze)),e}}class da extends vn{constructor(){super(...arguments),this.text=this.object,this.textConfig=this.options.textConfig}createNodes(){const e=[],t=wo.groupObjects(this.getPieces()),n=t.length-1;for(let o=0;o<t.length;o++){const a=t[o],u={};o===0&&(u.isFirst=!0),o===n&&(u.isLast=!0),Su(r)&&(u.followsWhitespace=!0);const p=this.findOrCreateCachedChildView(ha,a,{textConfig:this.textConfig,context:u});e.push(...Array.from(p.getNodes()||[]));var r=a}return e}getPieces(){return Array.from(this.text.getPieces()).filter(e=>!e.hasAttribute("blockBreak"))}}const Su=i=>/\s$/.test(i==null?void 0:i.toString()),{css:ps}=pi;class fa extends vn{constructor(){super(...arguments),this.block=this.object,this.attributes=this.block.getAttributes()}createNodes(){const e=[document.createComment("block")];if(this.block.isEmpty())e.push(Z("br"));else{var t;const n=(t=At(this.block.getLastAttribute()))===null||t===void 0?void 0:t.text,r=this.findOrCreateCachedChildView(da,this.block.text,{textConfig:n});e.push(...Array.from(r.getNodes()||[])),this.shouldAddExtraNewlineElement()&&e.push(Z("br"))}if(this.attributes.length)return e;{let n;const{tagName:r}=Ht.default;this.block.isRTL()&&(n={dir:"rtl"});const o=Z({tagName:r,attributes:n});return e.forEach(a=>o.appendChild(a)),[o]}}createContainerElement(e){const t={};let n;const r=this.attributes[e],{tagName:o,htmlAttributes:a=[]}=At(r);if(e===0&&this.block.isRTL()&&Object.assign(t,{dir:"rtl"}),r==="attachmentGallery"){const u=this.block.getBlockBreakPosition();n="".concat(ps.attachmentGallery," ").concat(ps.attachmentGallery,"--").concat(u)}return Object.entries(this.block.htmlAttributes).forEach(u=>{let[p,v]=u;a.includes(p)&&(t[p]=v)}),Z({tagName:o,className:n,attributes:t})}shouldAddExtraNewlineElement(){return/\n\n$/.test(this.block.toString())}}class Ji extends vn{static render(e){const t=Z("div"),n=new this(e,{element:t});return n.render(),n.sync(),t}constructor(){super(...arguments),this.element=this.options.element,this.elementStore=new $l,this.setDocument(this.object)}setDocument(e){e.isEqualTo(this.document)||(this.document=this.object=e)}render(){if(this.childViews=[],this.shadowElement=Z("div"),!this.document.isEmpty()){const e=wo.groupObjects(this.document.getBlocks(),{asTree:!0});Array.from(e).forEach(t=>{const n=this.findOrCreateCachedChildView(fa,t);Array.from(n.getNodes()).map(r=>this.shadowElement.appendChild(r))})}}isSynced(){return ku(this.shadowElement,this.element)}sync(){const e=this.createDocumentFragmentForSync();for(;this.element.lastChild;)this.element.removeChild(this.element.lastChild);return this.element.appendChild(e),this.didSync()}didSync(){return this.elementStore.reset(gs(this.element)),vo(()=>this.garbageCollectCachedViews())}createDocumentFragmentForSync(){const e=document.createDocumentFragment();return Array.from(this.shadowElement.childNodes).forEach(t=>{e.appendChild(t.cloneNode(!0))}),Array.from(gs(e)).forEach(t=>{const n=this.elementStore.remove(t);n&&t.parentNode.replaceChild(n,t)}),e}}const gs=i=>i.querySelectorAll("[data-trix-store-key]"),ku=(i,e)=>ms(i.innerHTML)===ms(e.innerHTML),ms=i=>i.replace(/&nbsp;/g," ");function Kt(i,e,t){return(e=Eu(e))in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function Eu(i){var e=function(t,n){if(typeof t!="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var o=r.call(t,n||"default");if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(t)}(i,"string");return typeof e=="symbol"?e:String(e)}function dt(i,e){return Tu(i,pa(i,e,"get"))}function xo(i,e,t){return Du(i,pa(i,e,"set"),t),t}function pa(i,e,t){if(!e.has(i))throw new TypeError("attempted to "+t+" private field on non-instance");return e.get(i)}function Tu(i,e){return e.get?e.get.call(i):e.value}function Du(i,e,t){if(e.set)e.set.call(i,t);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=t}}function ki(i,e,t){if(!e.has(i))throw new TypeError("attempted to get private field on non-instance");return t}function ga(i,e){if(e.has(i))throw new TypeError("Cannot initialize the same private elements twice on an object")}function ii(i,e,t){ga(i,e),e.set(i,t)}class yn extends bn{static registerType(e,t){t.type=e,this.types[e]=t}static fromJSON(e){const t=this.types[e.type];if(t)return t.fromJSON(e)}constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(...arguments),this.attributes=oe.box(t)}copyWithAttributes(e){return new this.constructor(this.getValue(),e)}copyWithAdditionalAttributes(e){return this.copyWithAttributes(this.attributes.merge(e))}copyWithoutAttribute(e){return this.copyWithAttributes(this.attributes.remove(e))}copy(){return this.copyWithAttributes(this.attributes)}getAttribute(e){return this.attributes.get(e)}getAttributesHash(){return this.attributes}getAttributes(){return this.attributes.toObject()}hasAttribute(e){return this.attributes.has(e)}hasSameStringValueAsPiece(e){return e&&this.toString()===e.toString()}hasSameAttributesAsPiece(e){return e&&(this.attributes===e.attributes||this.attributes.isEqualTo(e.attributes))}isBlockBreak(){return!1}isEqualTo(e){return super.isEqualTo(...arguments)||this.hasSameConstructorAs(e)&&this.hasSameStringValueAsPiece(e)&&this.hasSameAttributesAsPiece(e)}isEmpty(){return this.length===0}isSerializable(){return!0}toJSON(){return{type:this.constructor.type,attributes:this.getAttributes()}}contentsForInspection(){return{type:this.constructor.type,attributes:this.attributes.inspect()}}canBeGrouped(){return this.hasAttribute("href")}canBeGroupedWith(e){return this.getAttribute("href")===e.getAttribute("href")}getLength(){return this.length}canBeConsolidatedWith(e){return!1}}Kt(yn,"types",{});class ma extends Ii{constructor(e){super(...arguments),this.url=e}perform(e){const t=new Image;t.onload=()=>(t.width=this.width=t.naturalWidth,t.height=this.height=t.naturalHeight,e(!0,t)),t.onerror=()=>e(!1),t.src=this.url}}class On extends bn{static attachmentForFile(e){const t=new this(this.attributesForFile(e));return t.setFile(e),t}static attributesForFile(e){return new oe({filename:e.name,filesize:e.size,contentType:e.type})}static fromJSON(e){return new this(e)}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(e),this.releaseFile=this.releaseFile.bind(this),this.attributes=oe.box(e),this.didChangeAttributes()}getAttribute(e){return this.attributes.get(e)}hasAttribute(e){return this.attributes.has(e)}getAttributes(){return this.attributes.toObject()}setAttributes(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=this.attributes.merge(e);var n,r,o,a;if(!this.attributes.isEqualTo(t))return this.attributes=t,this.didChangeAttributes(),(n=this.previewDelegate)===null||n===void 0||(r=n.attachmentDidChangeAttributes)===null||r===void 0||r.call(n,this),(o=this.delegate)===null||o===void 0||(a=o.attachmentDidChangeAttributes)===null||a===void 0?void 0:a.call(o,this)}didChangeAttributes(){if(this.isPreviewable())return this.preloadURL()}isPending(){return this.file!=null&&!(this.getURL()||this.getHref())}isPreviewable(){return this.attributes.has("previewable")?this.attributes.get("previewable"):On.previewablePattern.test(this.getContentType())}getType(){return this.hasContent()?"content":this.isPreviewable()?"preview":"file"}getURL(){return this.attributes.get("url")}getHref(){return this.attributes.get("href")}getFilename(){return this.attributes.get("filename")||""}getFilesize(){return this.attributes.get("filesize")}getFormattedFilesize(){const e=this.attributes.get("filesize");return typeof e=="number"?Ks.formatter(e):""}getExtension(){var e;return(e=this.getFilename().match(/\.(\w+)$/))===null||e===void 0?void 0:e[1].toLowerCase()}getContentType(){return this.attributes.get("contentType")}hasContent(){return this.attributes.has("content")}getContent(){return this.attributes.get("content")}getWidth(){return this.attributes.get("width")}getHeight(){return this.attributes.get("height")}getFile(){return this.file}setFile(e){if(this.file=e,this.isPreviewable())return this.preloadFile()}releaseFile(){this.releasePreloadedFile(),this.file=null}getUploadProgress(){return this.uploadProgress!=null?this.uploadProgress:0}setUploadProgress(e){var t,n;if(this.uploadProgress!==e)return this.uploadProgress=e,(t=this.uploadProgressDelegate)===null||t===void 0||(n=t.attachmentDidChangeUploadProgress)===null||n===void 0?void 0:n.call(t,this)}toJSON(){return this.getAttributes()}getCacheKey(){return[super.getCacheKey(...arguments),this.attributes.getCacheKey(),this.getPreviewURL()].join("/")}getPreviewURL(){return this.previewURL||this.preloadingURL}setPreviewURL(e){var t,n,r,o;if(e!==this.getPreviewURL())return this.previewURL=e,(t=this.previewDelegate)===null||t===void 0||(n=t.attachmentDidChangeAttributes)===null||n===void 0||n.call(t,this),(r=this.delegate)===null||r===void 0||(o=r.attachmentDidChangePreviewURL)===null||o===void 0?void 0:o.call(r,this)}preloadURL(){return this.preload(this.getURL(),this.releaseFile)}preloadFile(){if(this.file)return this.fileObjectURL=URL.createObjectURL(this.file),this.preload(this.fileObjectURL)}releasePreloadedFile(){this.fileObjectURL&&(URL.revokeObjectURL(this.fileObjectURL),this.fileObjectURL=null)}preload(e,t){if(e&&e!==this.getPreviewURL())return this.preloadingURL=e,new ma(e).then(n=>{let{width:r,height:o}=n;return this.getWidth()&&this.getHeight()||this.setAttributes({width:r,height:o}),this.preloadingURL=null,this.setPreviewURL(e),t==null?void 0:t()}).catch(()=>(this.preloadingURL=null,t==null?void 0:t()))}}Kt(On,"previewablePattern",/^image(\/(gif|png|webp|jpe?g)|$)/);class Ln extends yn{static fromJSON(e){return new this(On.fromJSON(e.attachment),e.attributes)}constructor(e){super(...arguments),this.attachment=e,this.length=1,this.ensureAttachmentExclusivelyHasAttribute("href"),this.attachment.hasContent()||this.removeProhibitedAttributes()}ensureAttachmentExclusivelyHasAttribute(e){this.hasAttribute(e)&&(this.attachment.hasAttribute(e)||this.attachment.setAttributes(this.attributes.slice([e])),this.attributes=this.attributes.remove(e))}removeProhibitedAttributes(){const e=this.attributes.slice(Ln.permittedAttributes);e.isEqualTo(this.attributes)||(this.attributes=e)}getValue(){return this.attachment}isSerializable(){return!this.attachment.isPending()}getCaption(){return this.attributes.get("caption")||""}isEqualTo(e){var t;return super.isEqualTo(e)&&this.attachment.id===(e==null||(t=e.attachment)===null||t===void 0?void 0:t.id)}toString(){return"ï¿¼"}toJSON(){const e=super.toJSON(...arguments);return e.attachment=this.attachment,e}getCacheKey(){return[super.getCacheKey(...arguments),this.attachment.getCacheKey()].join("/")}toConsole(){return JSON.stringify(this.toString())}}Kt(Ln,"permittedAttributes",["caption","presentation"]),yn.registerType("attachment",Ln);class So extends yn{static fromJSON(e){return new this(e.string,e.attributes)}constructor(e){super(...arguments),this.string=(t=>t.replace(/\r\n?/g,`
`))(e),this.length=this.string.length}getValue(){return this.string}toString(){return this.string.toString()}isBlockBreak(){return this.toString()===`
`&&this.getAttribute("blockBreak")===!0}toJSON(){const e=super.toJSON(...arguments);return e.string=this.string,e}canBeConsolidatedWith(e){return e&&this.hasSameConstructorAs(e)&&this.hasSameAttributesAsPiece(e)}consolidateWith(e){return new this.constructor(this.toString()+e.toString(),this.attributes)}splitAtOffset(e){let t,n;return e===0?(t=null,n=this):e===this.length?(t=this,n=null):(t=new this.constructor(this.string.slice(0,e),this.attributes),n=new this.constructor(this.string.slice(e),this.attributes)),[t,n]}toConsole(){let{string:e}=this;return e.length>15&&(e=e.slice(0,14)+"â€¦"),JSON.stringify(e.toString())}}yn.registerType("string",So);class Bi extends bn{static box(e){return e instanceof this?e:new this(e)}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];super(...arguments),this.objects=e.slice(0),this.length=this.objects.length}indexOf(e){return this.objects.indexOf(e)}splice(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new this.constructor(bo(this.objects,...t))}eachObject(e){return this.objects.map((t,n)=>e(t,n))}insertObjectAtIndex(e,t){return this.splice(t,0,e)}insertSplittableListAtIndex(e,t){return this.splice(t,0,...e.objects)}insertSplittableListAtPosition(e,t){const[n,r]=this.splitObjectAtPosition(t);return new this.constructor(n).insertSplittableListAtIndex(e,r)}editObjectAtIndex(e,t){return this.replaceObjectAtIndex(t(this.objects[e]),e)}replaceObjectAtIndex(e,t){return this.splice(t,1,e)}removeObjectAtIndex(e){return this.splice(e,1)}getObjectAtIndex(e){return this.objects[e]}getSplittableListInRange(e){const[t,n,r]=this.splitObjectsAtRange(e);return new this.constructor(t.slice(n,r+1))}selectSplittableList(e){const t=this.objects.filter(n=>e(n));return new this.constructor(t)}removeObjectsInRange(e){const[t,n,r]=this.splitObjectsAtRange(e);return new this.constructor(t).splice(n,r-n+1)}transformObjectsInRange(e,t){const[n,r,o]=this.splitObjectsAtRange(e),a=n.map((u,p)=>r<=p&&p<=o?t(u):u);return new this.constructor(a)}splitObjectsAtRange(e){let t,[n,r,o]=this.splitObjectAtPosition(Lu(e));return[n,t]=new this.constructor(n).splitObjectAtPosition(_u(e)+o),[n,r,t-1]}getObjectAtPosition(e){const{index:t}=this.findIndexAndOffsetAtPosition(e);return this.objects[t]}splitObjectAtPosition(e){let t,n;const{index:r,offset:o}=this.findIndexAndOffsetAtPosition(e),a=this.objects.slice(0);if(r!=null)if(o===0)t=r,n=0;else{const u=this.getObjectAtIndex(r),[p,v]=u.splitAtOffset(o);a.splice(r,1,p,v),t=r+1,n=p.getLength()-o}else t=a.length,n=0;return[a,t,n]}consolidate(){const e=[];let t=this.objects[0];return this.objects.slice(1).forEach(n=>{var r,o;(r=(o=t).canBeConsolidatedWith)!==null&&r!==void 0&&r.call(o,n)?t=t.consolidateWith(n):(e.push(t),t=n)}),t&&e.push(t),new this.constructor(e)}consolidateFromIndexToIndex(e,t){const n=this.objects.slice(0).slice(e,t+1),r=new this.constructor(n).consolidate().toArray();return this.splice(e,n.length,...r)}findIndexAndOffsetAtPosition(e){let t,n=0;for(t=0;t<this.objects.length;t++){const r=n+this.objects[t].getLength();if(n<=e&&e<r)return{index:t,offset:e-n};n=r}return{index:null,offset:null}}findPositionAtIndexAndOffset(e,t){let n=0;for(let r=0;r<this.objects.length;r++){const o=this.objects[r];if(r<e)n+=o.getLength();else if(r===e){n+=t;break}}return n}getEndPosition(){return this.endPosition==null&&(this.endPosition=0,this.objects.forEach(e=>this.endPosition+=e.getLength())),this.endPosition}toString(){return this.objects.join("")}toArray(){return this.objects.slice(0)}toJSON(){return this.toArray()}isEqualTo(e){return super.isEqualTo(...arguments)||Ru(this.objects,e==null?void 0:e.objects)}contentsForInspection(){return{objects:"[".concat(this.objects.map(e=>e.inspect()).join(", "),"]")}}}const Ru=function(i){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];if(i.length!==e.length)return!1;let t=!0;for(let n=0;n<i.length;n++){const r=i[n];t&&!r.isEqualTo(e[n])&&(t=!1)}return t},Lu=i=>i[0],_u=i=>i[1];class ye extends bn{static textForAttachmentWithAttributes(e,t){return new this([new Ln(e,t)])}static textForStringWithAttributes(e,t){return new this([new So(e,t)])}static fromJSON(e){return new this(Array.from(e).map(t=>yn.fromJSON(t)))}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];super(...arguments);const t=e.filter(n=>!n.isEmpty());this.pieceList=new Bi(t)}copy(){return this.copyWithPieceList(this.pieceList)}copyWithPieceList(e){return new this.constructor(e.consolidate().toArray())}copyUsingObjectMap(e){const t=this.getPieces().map(n=>e.find(n)||n);return new this.constructor(t)}appendText(e){return this.insertTextAtPosition(e,this.getLength())}insertTextAtPosition(e,t){return this.copyWithPieceList(this.pieceList.insertSplittableListAtPosition(e.pieceList,t))}removeTextAtRange(e){return this.copyWithPieceList(this.pieceList.removeObjectsInRange(e))}replaceTextAtRange(e,t){return this.removeTextAtRange(t).insertTextAtPosition(e,t[0])}moveTextFromRangeToPosition(e,t){if(e[0]<=t&&t<=e[1])return;const n=this.getTextAtRange(e),r=n.getLength();return e[0]<t&&(t-=r),this.removeTextAtRange(e).insertTextAtPosition(n,t)}addAttributeAtRange(e,t,n){const r={};return r[e]=t,this.addAttributesAtRange(r,n)}addAttributesAtRange(e,t){return this.copyWithPieceList(this.pieceList.transformObjectsInRange(t,n=>n.copyWithAdditionalAttributes(e)))}removeAttributeAtRange(e,t){return this.copyWithPieceList(this.pieceList.transformObjectsInRange(t,n=>n.copyWithoutAttribute(e)))}setAttributesAtRange(e,t){return this.copyWithPieceList(this.pieceList.transformObjectsInRange(t,n=>n.copyWithAttributes(e)))}getAttributesAtPosition(e){var t;return((t=this.pieceList.getObjectAtPosition(e))===null||t===void 0?void 0:t.getAttributes())||{}}getCommonAttributes(){const e=Array.from(this.pieceList.toArray()).map(t=>t.getAttributes());return oe.fromCommonAttributesOfObjects(e).toObject()}getCommonAttributesAtRange(e){return this.getTextAtRange(e).getCommonAttributes()||{}}getExpandedRangeForAttributeAtOffset(e,t){let n,r=n=t;const o=this.getLength();for(;r>0&&this.getCommonAttributesAtRange([r-1,n])[e];)r--;for(;n<o&&this.getCommonAttributesAtRange([t,n+1])[e];)n++;return[r,n]}getTextAtRange(e){return this.copyWithPieceList(this.pieceList.getSplittableListInRange(e))}getStringAtRange(e){return this.pieceList.getSplittableListInRange(e).toString()}getStringAtPosition(e){return this.getStringAtRange([e,e+1])}startsWithString(e){return this.getStringAtRange([0,e.length])===e}endsWithString(e){const t=this.getLength();return this.getStringAtRange([t-e.length,t])===e}getAttachmentPieces(){return this.pieceList.toArray().filter(e=>!!e.attachment)}getAttachments(){return this.getAttachmentPieces().map(e=>e.attachment)}getAttachmentAndPositionById(e){let t=0;for(const r of this.pieceList.toArray()){var n;if(((n=r.attachment)===null||n===void 0?void 0:n.id)===e)return{attachment:r.attachment,position:t};t+=r.length}return{attachment:null,position:null}}getAttachmentById(e){const{attachment:t}=this.getAttachmentAndPositionById(e);return t}getRangeOfAttachment(e){const t=this.getAttachmentAndPositionById(e.id),n=t.position;if(e=t.attachment)return[n,n+1]}updateAttributesForAttachment(e,t){const n=this.getRangeOfAttachment(t);return n?this.addAttributesAtRange(e,n):this}getLength(){return this.pieceList.getEndPosition()}isEmpty(){return this.getLength()===0}isEqualTo(e){var t;return super.isEqualTo(e)||(e==null||(t=e.pieceList)===null||t===void 0?void 0:t.isEqualTo(this.pieceList))}isBlockBreak(){return this.getLength()===1&&this.pieceList.getObjectAtIndex(0).isBlockBreak()}eachPiece(e){return this.pieceList.eachObject(e)}getPieces(){return this.pieceList.toArray()}getPieceAtPosition(e){return this.pieceList.getObjectAtPosition(e)}contentsForInspection(){return{pieceList:this.pieceList.inspect()}}toSerializableText(){const e=this.pieceList.selectSplittableList(t=>t.isSerializable());return this.copyWithPieceList(e)}toString(){return this.pieceList.toString()}toJSON(){return this.pieceList.toJSON()}toConsole(){return JSON.stringify(this.pieceList.toArray().map(e=>JSON.parse(e.toConsole())))}getDirection(){return jl(this.toString())}isRTL(){return this.getDirection()==="rtl"}}class ke extends bn{static fromJSON(e){return new this(ye.fromJSON(e.text),e.attributes,e.htmlAttributes)}constructor(e,t,n){super(...arguments),this.text=Ou(e||new ye),this.attributes=t||[],this.htmlAttributes=n||{}}isEmpty(){return this.text.isBlockBreak()}isEqualTo(e){return!!super.isEqualTo(e)||this.text.isEqualTo(e==null?void 0:e.text)&&pn(this.attributes,e==null?void 0:e.attributes)&&_n(this.htmlAttributes,e==null?void 0:e.htmlAttributes)}copyWithText(e){return new ke(e,this.attributes,this.htmlAttributes)}copyWithoutText(){return this.copyWithText(null)}copyWithAttributes(e){return new ke(this.text,e,this.htmlAttributes)}copyWithoutAttributes(){return this.copyWithAttributes(null)}copyUsingObjectMap(e){const t=e.find(this.text);return t?this.copyWithText(t):this.copyWithText(this.text.copyUsingObjectMap(e))}addAttribute(e){const t=this.attributes.concat(bs(e));return this.copyWithAttributes(t)}addHTMLAttribute(e,t){const n=Object.assign({},this.htmlAttributes,{[e]:t});return new ke(this.text,this.attributes,n)}removeAttribute(e){const{listAttribute:t}=At(e),n=ys(ys(this.attributes,e),t);return this.copyWithAttributes(n)}removeLastAttribute(){return this.removeAttribute(this.getLastAttribute())}getLastAttribute(){return vs(this.attributes)}getAttributes(){return this.attributes.slice(0)}getAttributeLevel(){return this.attributes.length}getAttributeAtLevel(e){return this.attributes[e-1]}hasAttribute(e){return this.attributes.includes(e)}hasAttributes(){return this.getAttributeLevel()>0}getLastNestableAttribute(){return vs(this.getNestableAttributes())}getNestableAttributes(){return this.attributes.filter(e=>At(e).nestable)}getNestingLevel(){return this.getNestableAttributes().length}decreaseNestingLevel(){const e=this.getLastNestableAttribute();return e?this.removeAttribute(e):this}increaseNestingLevel(){const e=this.getLastNestableAttribute();if(e){const t=this.attributes.lastIndexOf(e),n=bo(this.attributes,t+1,0,...bs(e));return this.copyWithAttributes(n)}return this}getListItemAttributes(){return this.attributes.filter(e=>At(e).listAttribute)}isListItem(){var e;return(e=At(this.getLastAttribute()))===null||e===void 0?void 0:e.listAttribute}isTerminalBlock(){var e;return(e=At(this.getLastAttribute()))===null||e===void 0?void 0:e.terminal}breaksOnReturn(){var e;return(e=At(this.getLastAttribute()))===null||e===void 0?void 0:e.breakOnReturn}findLineBreakInDirectionFromPosition(e,t){const n=this.toString();let r;switch(e){case"forward":r=n.indexOf(`
`,t);break;case"backward":r=n.slice(0,t).lastIndexOf(`
`)}if(r!==-1)return r}contentsForInspection(){return{text:this.text.inspect(),attributes:this.attributes}}toString(){return this.text.toString()}toJSON(){return{text:this.text,attributes:this.attributes,htmlAttributes:this.htmlAttributes}}getDirection(){return this.text.getDirection()}isRTL(){return this.text.isRTL()}getLength(){return this.text.getLength()}canBeConsolidatedWith(e){return!this.hasAttributes()&&!e.hasAttributes()&&this.getDirection()===e.getDirection()}consolidateWith(e){const t=ye.textForStringWithAttributes(`
`),n=this.getTextWithoutBlockBreak().appendText(t);return this.copyWithText(n.appendText(e.text))}splitAtOffset(e){let t,n;return e===0?(t=null,n=this):e===this.getLength()?(t=this,n=null):(t=this.copyWithText(this.text.getTextAtRange([0,e])),n=this.copyWithText(this.text.getTextAtRange([e,this.getLength()]))),[t,n]}getBlockBreakPosition(){return this.text.getLength()-1}getTextWithoutBlockBreak(){return ba(this.text)?this.text.getTextAtRange([0,this.getBlockBreakPosition()]):this.text.copy()}canBeGrouped(e){return this.attributes[e]}canBeGroupedWith(e,t){const n=e.getAttributes(),r=n[t],o=this.attributes[t];return o===r&&!(At(o).group===!1&&!(()=>{if(!Ci){Ci=[];for(const a in Ht){const{listAttribute:u}=Ht[a];u!=null&&Ci.push(u)}}return Ci})().includes(n[t+1]))&&(this.getDirection()===e.getDirection()||e.isEmpty())}}const Ou=function(i){return i=Pu(i),i=Nu(i)},Pu=function(i){let e=!1;const t=i.getPieces();let n=t.slice(0,t.length-1);const r=t[t.length-1];return r?(n=n.map(o=>o.isBlockBreak()?(e=!0,Iu(o)):o),e?new ye([...n,r]):i):i},Mu=ye.textForStringWithAttributes(`
`,{blockBreak:!0}),Nu=function(i){return ba(i)?i:i.appendText(Mu)},ba=function(i){const e=i.getLength();return e===0?!1:i.getTextAtRange([e-1,e]).isBlockBreak()},Iu=i=>i.copyWithoutAttribute("blockBreak"),bs=function(i){const{listAttribute:e}=At(i);return e?[e,i]:[i]},vs=i=>i.slice(-1)[0],ys=function(i,e){const t=i.lastIndexOf(e);return t===-1?i:bo(i,t,1)};class de extends bn{static fromJSON(e){return new this(Array.from(e).map(t=>ke.fromJSON(t)))}static fromString(e,t){const n=ye.textForStringWithAttributes(e,t);return new this([new ke(n)])}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];super(...arguments),e.length===0&&(e=[new ke]),this.blockList=Bi.box(e)}isEmpty(){const e=this.getBlockAtIndex(0);return this.blockList.length===1&&e.isEmpty()&&!e.hasAttributes()}copy(){const e=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}).consolidateBlocks?this.blockList.consolidate().toArray():this.blockList.toArray();return new this.constructor(e)}copyUsingObjectsFromDocument(e){const t=new Kl(e.getObjects());return this.copyUsingObjectMap(t)}copyUsingObjectMap(e){const t=this.getBlocks().map(n=>e.find(n)||n.copyUsingObjectMap(e));return new this.constructor(t)}copyWithBaseBlockAttributes(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const t=this.getBlocks().map(n=>{const r=e.concat(n.getAttributes());return n.copyWithAttributes(r)});return new this.constructor(t)}replaceBlock(e,t){const n=this.blockList.indexOf(e);return n===-1?this:new this.constructor(this.blockList.replaceObjectAtIndex(t,n))}insertDocumentAtRange(e,t){const{blockList:n}=e;t=lt(t);let[r]=t;const{index:o,offset:a}=this.locationFromPosition(r);let u=this;const p=this.getBlockAtPosition(r);return Oe(t)&&p.isEmpty()&&!p.hasAttributes()?u=new this.constructor(u.blockList.removeObjectAtIndex(o)):p.getBlockBreakPosition()===a&&r++,u=u.removeTextAtRange(t),new this.constructor(u.blockList.insertSplittableListAtPosition(n,r))}mergeDocumentAtRange(e,t){let n,r;t=lt(t);const[o]=t,a=this.locationFromPosition(o),u=this.getBlockAtIndex(a.index).getAttributes(),p=e.getBaseBlockAttributes(),v=u.slice(-p.length);if(pn(p,v)){const D=u.slice(0,-p.length);n=e.copyWithBaseBlockAttributes(D)}else n=e.copy({consolidateBlocks:!0}).copyWithBaseBlockAttributes(u);const y=n.getBlockCount(),k=n.getBlockAtIndex(0);if(pn(u,k.getAttributes())){const D=k.getTextWithoutBlockBreak();if(r=this.insertTextAtRange(D,t),y>1){n=new this.constructor(n.getBlocks().slice(1));const _=o+D.getLength();r=r.insertDocumentAtRange(n,_)}}else r=this.insertDocumentAtRange(n,t);return r}insertTextAtRange(e,t){t=lt(t);const[n]=t,{index:r,offset:o}=this.locationFromPosition(n),a=this.removeTextAtRange(t);return new this.constructor(a.blockList.editObjectAtIndex(r,u=>u.copyWithText(u.text.insertTextAtPosition(e,o))))}removeTextAtRange(e){let t;e=lt(e);const[n,r]=e;if(Oe(e))return this;const[o,a]=Array.from(this.locationRangeFromRange(e)),u=o.index,p=o.offset,v=this.getBlockAtIndex(u),y=a.index,k=a.offset,D=this.getBlockAtIndex(y);if(r-n==1&&v.getBlockBreakPosition()===p&&D.getBlockBreakPosition()!==k&&D.text.getStringAtPosition(k)===`
`)t=this.blockList.editObjectAtIndex(y,_=>_.copyWithText(_.text.removeTextAtRange([k,k+1])));else{let _;const E=v.text.getTextAtRange([0,p]),C=D.text.getTextAtRange([k,D.getLength()]),A=E.appendText(C);_=u!==y&&p===0&&v.getAttributeLevel()>=D.getAttributeLevel()?D.copyWithText(A):v.copyWithText(A);const T=y+1-u;t=this.blockList.splice(u,T,_)}return new this.constructor(t)}moveTextFromRangeToPosition(e,t){let n;e=lt(e);const[r,o]=e;if(r<=t&&t<=o)return this;let a=this.getDocumentAtRange(e),u=this.removeTextAtRange(e);const p=r<t;p&&(t-=a.getLength());const[v,...y]=a.getBlocks();return y.length===0?(n=v.getTextWithoutBlockBreak(),p&&(t+=1)):n=v.text,u=u.insertTextAtRange(n,t),y.length===0?u:(a=new this.constructor(y),t+=n.getLength(),u.insertDocumentAtRange(a,t))}addAttributeAtRange(e,t,n){let{blockList:r}=this;return this.eachBlockAtRange(n,(o,a,u)=>r=r.editObjectAtIndex(u,function(){return At(e)?o.addAttribute(e,t):a[0]===a[1]?o:o.copyWithText(o.text.addAttributeAtRange(e,t,a))})),new this.constructor(r)}addAttribute(e,t){let{blockList:n}=this;return this.eachBlock((r,o)=>n=n.editObjectAtIndex(o,()=>r.addAttribute(e,t))),new this.constructor(n)}removeAttributeAtRange(e,t){let{blockList:n}=this;return this.eachBlockAtRange(t,function(r,o,a){At(e)?n=n.editObjectAtIndex(a,()=>r.removeAttribute(e)):o[0]!==o[1]&&(n=n.editObjectAtIndex(a,()=>r.copyWithText(r.text.removeAttributeAtRange(e,o))))}),new this.constructor(n)}updateAttributesForAttachment(e,t){const n=this.getRangeOfAttachment(t),[r]=Array.from(n),{index:o}=this.locationFromPosition(r),a=this.getTextAtIndex(o);return new this.constructor(this.blockList.editObjectAtIndex(o,u=>u.copyWithText(a.updateAttributesForAttachment(e,t))))}removeAttributeForAttachment(e,t){const n=this.getRangeOfAttachment(t);return this.removeAttributeAtRange(e,n)}setHTMLAttributeAtPosition(e,t,n){const r=this.getBlockAtPosition(e),o=r.addHTMLAttribute(t,n);return this.replaceBlock(r,o)}insertBlockBreakAtRange(e){let t;e=lt(e);const[n]=e,{offset:r}=this.locationFromPosition(n),o=this.removeTextAtRange(e);return r===0&&(t=[new ke]),new this.constructor(o.blockList.insertSplittableListAtPosition(new Bi(t),n))}applyBlockAttributeAtRange(e,t,n){const r=this.expandRangeToLineBreaksAndSplitBlocks(n);let o=r.document;n=r.range;const a=At(e);if(a.listAttribute){o=o.removeLastListAttributeAtRange(n,{exceptAttributeName:e});const u=o.convertLineBreaksToBlockBreaksInRange(n);o=u.document,n=u.range}else o=a.exclusive?o.removeBlockAttributesAtRange(n):a.terminal?o.removeLastTerminalAttributeAtRange(n):o.consolidateBlocksAtRange(n);return o.addAttributeAtRange(e,t,n)}removeLastListAttributeAtRange(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{blockList:n}=this;return this.eachBlockAtRange(e,function(r,o,a){const u=r.getLastAttribute();u&&At(u).listAttribute&&u!==t.exceptAttributeName&&(n=n.editObjectAtIndex(a,()=>r.removeAttribute(u)))}),new this.constructor(n)}removeLastTerminalAttributeAtRange(e){let{blockList:t}=this;return this.eachBlockAtRange(e,function(n,r,o){const a=n.getLastAttribute();a&&At(a).terminal&&(t=t.editObjectAtIndex(o,()=>n.removeAttribute(a)))}),new this.constructor(t)}removeBlockAttributesAtRange(e){let{blockList:t}=this;return this.eachBlockAtRange(e,function(n,r,o){n.hasAttributes()&&(t=t.editObjectAtIndex(o,()=>n.copyWithoutAttributes()))}),new this.constructor(t)}expandRangeToLineBreaksAndSplitBlocks(e){let t;e=lt(e);let[n,r]=e;const o=this.locationFromPosition(n),a=this.locationFromPosition(r);let u=this;const p=u.getBlockAtIndex(o.index);if(o.offset=p.findLineBreakInDirectionFromPosition("backward",o.offset),o.offset!=null&&(t=u.positionFromLocation(o),u=u.insertBlockBreakAtRange([t,t+1]),a.index+=1,a.offset-=u.getBlockAtIndex(o.index).getLength(),o.index+=1),o.offset=0,a.offset===0&&a.index>o.index)a.index-=1,a.offset=u.getBlockAtIndex(a.index).getBlockBreakPosition();else{const v=u.getBlockAtIndex(a.index);v.text.getStringAtRange([a.offset-1,a.offset])===`
`?a.offset-=1:a.offset=v.findLineBreakInDirectionFromPosition("forward",a.offset),a.offset!==v.getBlockBreakPosition()&&(t=u.positionFromLocation(a),u=u.insertBlockBreakAtRange([t,t+1]))}return n=u.positionFromLocation(o),r=u.positionFromLocation(a),{document:u,range:e=lt([n,r])}}convertLineBreaksToBlockBreaksInRange(e){e=lt(e);let[t]=e;const n=this.getStringAtRange(e).slice(0,-1);let r=this;return n.replace(/.*?\n/g,function(o){t+=o.length,r=r.insertBlockBreakAtRange([t-1,t])}),{document:r,range:e}}consolidateBlocksAtRange(e){e=lt(e);const[t,n]=e,r=this.locationFromPosition(t).index,o=this.locationFromPosition(n).index;return new this.constructor(this.blockList.consolidateFromIndexToIndex(r,o))}getDocumentAtRange(e){e=lt(e);const t=this.blockList.getSplittableListInRange(e).toArray();return new this.constructor(t)}getStringAtRange(e){let t;const n=e=lt(e);return n[n.length-1]!==this.getLength()&&(t=-1),this.getDocumentAtRange(e).toString().slice(0,t)}getBlockAtIndex(e){return this.blockList.getObjectAtIndex(e)}getBlockAtPosition(e){const{index:t}=this.locationFromPosition(e);return this.getBlockAtIndex(t)}getTextAtIndex(e){var t;return(t=this.getBlockAtIndex(e))===null||t===void 0?void 0:t.text}getTextAtPosition(e){const{index:t}=this.locationFromPosition(e);return this.getTextAtIndex(t)}getPieceAtPosition(e){const{index:t,offset:n}=this.locationFromPosition(e);return this.getTextAtIndex(t).getPieceAtPosition(n)}getCharacterAtPosition(e){const{index:t,offset:n}=this.locationFromPosition(e);return this.getTextAtIndex(t).getStringAtRange([n,n+1])}getLength(){return this.blockList.getEndPosition()}getBlocks(){return this.blockList.toArray()}getBlockCount(){return this.blockList.length}getEditCount(){return this.editCount}eachBlock(e){return this.blockList.eachObject(e)}eachBlockAtRange(e,t){let n,r;e=lt(e);const[o,a]=e,u=this.locationFromPosition(o),p=this.locationFromPosition(a);if(u.index===p.index)return n=this.getBlockAtIndex(u.index),r=[u.offset,p.offset],t(n,r,u.index);for(let v=u.index;v<=p.index;v++)if(n=this.getBlockAtIndex(v),n){switch(v){case u.index:r=[u.offset,n.text.getLength()];break;case p.index:r=[0,p.offset];break;default:r=[0,n.text.getLength()]}t(n,r,v)}}getCommonAttributesAtRange(e){e=lt(e);const[t]=e;if(Oe(e))return this.getCommonAttributesAtPosition(t);{const n=[],r=[];return this.eachBlockAtRange(e,function(o,a){if(a[0]!==a[1])return n.push(o.text.getCommonAttributesAtRange(a)),r.push(As(o))}),oe.fromCommonAttributesOfObjects(n).merge(oe.fromCommonAttributesOfObjects(r)).toObject()}}getCommonAttributesAtPosition(e){let t,n;const{index:r,offset:o}=this.locationFromPosition(e),a=this.getBlockAtIndex(r);if(!a)return{};const u=As(a),p=a.text.getAttributesAtPosition(o),v=a.text.getAttributesAtPosition(o-1),y=Object.keys(fn).filter(k=>fn[k].inheritable);for(t in v)n=v[t],(n===p[t]||y.includes(t))&&(u[t]=n);return u}getRangeOfCommonAttributeAtPosition(e,t){const{index:n,offset:r}=this.locationFromPosition(t),o=this.getTextAtIndex(n),[a,u]=Array.from(o.getExpandedRangeForAttributeAtOffset(e,r)),p=this.positionFromLocation({index:n,offset:a}),v=this.positionFromLocation({index:n,offset:u});return lt([p,v])}getBaseBlockAttributes(){let e=this.getBlockAtIndex(0).getAttributes();for(let t=1;t<this.getBlockCount();t++){const n=this.getBlockAtIndex(t).getAttributes(),r=Math.min(e.length,n.length);e=(()=>{const o=[];for(let a=0;a<r&&n[a]===e[a];a++)o.push(n[a]);return o})()}return e}getAttachmentById(e){for(const t of this.getAttachments())if(t.id===e)return t}getAttachmentPieces(){let e=[];return this.blockList.eachObject(t=>{let{text:n}=t;return e=e.concat(n.getAttachmentPieces())}),e}getAttachments(){return this.getAttachmentPieces().map(e=>e.attachment)}getRangeOfAttachment(e){let t=0;const n=this.blockList.toArray();for(let r=0;r<n.length;r++){const{text:o}=n[r],a=o.getRangeOfAttachment(e);if(a)return lt([t+a[0],t+a[1]]);t+=o.getLength()}}getLocationRangeOfAttachment(e){const t=this.getRangeOfAttachment(e);return this.locationRangeFromRange(t)}getAttachmentPieceForAttachment(e){for(const t of this.getAttachmentPieces())if(t.attachment===e)return t}findRangesForBlockAttribute(e){let t=0;const n=[];return this.getBlocks().forEach(r=>{const o=r.getLength();r.hasAttribute(e)&&n.push([t,t+o]),t+=o}),n}findRangesForTextAttribute(e){let{withValue:t}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=0,r=[];const o=[];return this.getPieces().forEach(a=>{const u=a.getLength();(function(p){return t?p.getAttribute(e)===t:p.hasAttribute(e)})(a)&&(r[1]===n?r[1]=n+u:o.push(r=[n,n+u])),n+=u}),o}locationFromPosition(e){const t=this.blockList.findIndexAndOffsetAtPosition(Math.max(0,e));if(t.index!=null)return t;{const n=this.getBlocks();return{index:n.length-1,offset:n[n.length-1].getLength()}}}positionFromLocation(e){return this.blockList.findPositionAtIndexAndOffset(e.index,e.offset)}locationRangeFromPosition(e){return lt(this.locationFromPosition(e))}locationRangeFromRange(e){if(!(e=lt(e)))return;const[t,n]=Array.from(e),r=this.locationFromPosition(t),o=this.locationFromPosition(n);return lt([r,o])}rangeFromLocationRange(e){let t;e=lt(e);const n=this.positionFromLocation(e[0]);return Oe(e)||(t=this.positionFromLocation(e[1])),lt([n,t])}isEqualTo(e){return this.blockList.isEqualTo(e==null?void 0:e.blockList)}getTexts(){return this.getBlocks().map(e=>e.text)}getPieces(){const e=[];return Array.from(this.getTexts()).forEach(t=>{e.push(...Array.from(t.getPieces()||[]))}),e}getObjects(){return this.getBlocks().concat(this.getTexts()).concat(this.getPieces())}toSerializableDocument(){const e=[];return this.blockList.eachObject(t=>e.push(t.copyWithText(t.text.toSerializableText()))),new this.constructor(e)}toString(){return this.blockList.toString()}toJSON(){return this.blockList.toJSON()}toConsole(){return JSON.stringify(this.blockList.toArray().map(e=>JSON.parse(e.text.toConsole())))}}const As=function(i){const e={},t=i.getLastAttribute();return t&&(e[t]=!0),e},Cr=function(i){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return{string:i=Qn(i),attributes:e,type:"string"}},ws=(i,e)=>{try{return JSON.parse(i.getAttribute("data-trix-".concat(e)))}catch{return{}}};class li extends xt{static parse(e,t){const n=new this(e,t);return n.parse(),n}constructor(e){let{referenceElement:t}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(...arguments),this.html=e,this.referenceElement=t,this.blocks=[],this.blockElements=[],this.processedElements=[]}getDocument(){return de.fromJSON(this.blocks)}parse(){try{this.createHiddenContainer(),Vi.setHTML(this.containerElement,this.html);const e=Mi(this.containerElement,{usingFilter:Bu});for(;e.nextNode();)this.processNode(e.currentNode);return this.translateBlockElementMarginsToNewlines()}finally{this.removeHiddenContainer()}}createHiddenContainer(){return this.referenceElement?(this.containerElement=this.referenceElement.cloneNode(!1),this.containerElement.removeAttribute("id"),this.containerElement.setAttribute("data-trix-internal",""),this.containerElement.style.display="none",this.referenceElement.parentNode.insertBefore(this.containerElement,this.referenceElement.nextSibling)):(this.containerElement=Z({tagName:"div",style:{display:"none"}}),document.body.appendChild(this.containerElement))}removeHiddenContainer(){return Je(this.containerElement)}processNode(e){switch(e.nodeType){case Node.TEXT_NODE:if(!this.isInsignificantTextNode(e))return this.appendBlockForTextNode(e),this.processTextNode(e);break;case Node.ELEMENT_NODE:return this.appendBlockForElement(e),this.processElement(e)}}appendBlockForTextNode(e){const t=e.parentNode;if(t===this.currentBlockElement&&this.isBlockElement(e.previousSibling))return this.appendStringWithAttributes(`
`);if(t===this.containerElement||this.isBlockElement(t)){var n;const r=this.getBlockAttributes(t),o=this.getBlockHTMLAttributes(t);pn(r,(n=this.currentBlock)===null||n===void 0?void 0:n.attributes)||(this.currentBlock=this.appendBlockForAttributesWithElement(r,t,o),this.currentBlockElement=t)}}appendBlockForElement(e){const t=this.isBlockElement(e),n=cn(this.currentBlockElement,e);if(t&&!this.isBlockElement(e.firstChild)){if(!this.isInsignificantTextNode(e.firstChild)||!this.isBlockElement(e.firstElementChild)){const r=this.getBlockAttributes(e),o=this.getBlockHTMLAttributes(e);if(e.firstChild){if(n&&pn(r,this.currentBlock.attributes))return this.appendStringWithAttributes(`
`);this.currentBlock=this.appendBlockForAttributesWithElement(r,e,o),this.currentBlockElement=e}}}else if(this.currentBlockElement&&!n&&!t){const r=this.findParentBlockElement(e);if(r)return this.appendBlockForElement(r);this.currentBlock=this.appendEmptyBlock(),this.currentBlockElement=null}}findParentBlockElement(e){let{parentElement:t}=e;for(;t&&t!==this.containerElement;){if(this.isBlockElement(t)&&this.blockElements.includes(t))return t;t=t.parentElement}return null}processTextNode(e){let t=e.data;var n;return Cs(e.parentNode)||(t=Ao(t),va((n=e.previousSibling)===null||n===void 0?void 0:n.textContent)&&(t=ju(t))),this.appendStringWithAttributes(t,this.getTextAttributes(e.parentNode))}processElement(e){let t;if(hn(e)){if(t=ws(e,"attachment"),Object.keys(t).length){const n=this.getTextAttributes(e);this.appendAttachmentWithAttributes(t,n),e.innerHTML=""}return this.processedElements.push(e)}switch(Ut(e)){case"br":return this.isExtraBR(e)||this.isBlockElement(e.nextSibling)||this.appendStringWithAttributes(`
`,this.getTextAttributes(e)),this.processedElements.push(e);case"img":t={url:e.getAttribute("src"),contentType:"image"};const n=(r=>{const o=r.getAttribute("width"),a=r.getAttribute("height"),u={};return o&&(u.width=parseInt(o,10)),a&&(u.height=parseInt(a,10)),u})(e);for(const r in n){const o=n[r];t[r]=o}return this.appendAttachmentWithAttributes(t,this.getTextAttributes(e)),this.processedElements.push(e);case"tr":if(this.needsTableSeparator(e))return this.appendStringWithAttributes(Ri.tableRowSeparator);break;case"td":if(this.needsTableSeparator(e))return this.appendStringWithAttributes(Ri.tableCellSeparator)}}appendBlockForAttributesWithElement(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.blockElements.push(t);const r=function(){return{text:[],attributes:arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},htmlAttributes:arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}}}(e,n);return this.blocks.push(r),r}appendEmptyBlock(){return this.appendBlockForAttributesWithElement([],null)}appendStringWithAttributes(e,t){return this.appendPiece(Cr(e,t))}appendAttachmentWithAttributes(e,t){return this.appendPiece(function(n){return{attachment:n,attributes:arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},type:"attachment"}}(e,t))}appendPiece(e){return this.blocks.length===0&&this.appendEmptyBlock(),this.blocks[this.blocks.length-1].text.push(e)}appendStringToTextAtIndex(e,t){const{text:n}=this.blocks[t],r=n[n.length-1];if((r==null?void 0:r.type)!=="string")return n.push(Cr(e));r.string+=e}prependStringToTextAtIndex(e,t){const{text:n}=this.blocks[t],r=n[0];if((r==null?void 0:r.type)!=="string")return n.unshift(Cr(e));r.string=e+r.string}getTextAttributes(e){let t;const n={};for(const r in fn){const o=fn[r];if(o.tagName&&Ve(e,{matchingSelector:o.tagName,untilNode:this.containerElement}))n[r]=!0;else if(o.parser){if(t=o.parser(e),t){let a=!1;for(const u of this.findBlockElementAncestors(e))if(o.parser(u)===t){a=!0;break}a||(n[r]=t)}}else o.styleProperty&&(t=e.style[o.styleProperty],t&&(n[r]=t))}if(hn(e)){const r=ws(e,"attributes");for(const o in r)t=r[o],n[o]=t}return n}getBlockAttributes(e){const t=[];for(;e&&e!==this.containerElement;){for(const r in Ht){const o=Ht[r];var n;o.parse!==!1&&Ut(e)===o.tagName&&((n=o.test)!==null&&n!==void 0&&n.call(o,e)||!o.test)&&(t.push(r),o.listAttribute&&t.push(o.listAttribute))}e=e.parentNode}return t.reverse()}getBlockHTMLAttributes(e){const t={},n=Object.values(Ht).find(r=>r.tagName===Ut(e));return((n==null?void 0:n.htmlAttributes)||[]).forEach(r=>{e.hasAttribute(r)&&(t[r]=e.getAttribute(r))}),t}findBlockElementAncestors(e){const t=[];for(;e&&e!==this.containerElement;){const n=Ut(e);ti().includes(n)&&t.push(e),e=e.parentNode}return t}isBlockElement(e){if((e==null?void 0:e.nodeType)===Node.ELEMENT_NODE&&!hn(e)&&!Ve(e,{matchingSelector:"td",untilNode:this.containerElement}))return ti().includes(Ut(e))||window.getComputedStyle(e).display==="block"}isInsignificantTextNode(e){if((e==null?void 0:e.nodeType)!==Node.TEXT_NODE||!Uu(e.data))return;const{parentNode:t,previousSibling:n,nextSibling:r}=e;return Fu(t.previousSibling)&&!this.isBlockElement(t.previousSibling)||Cs(t)?void 0:!n||this.isBlockElement(n)||!r||this.isBlockElement(r)}isExtraBR(e){return Ut(e)==="br"&&this.isBlockElement(e.parentNode)&&e.parentNode.lastChild===e}needsTableSeparator(e){if(Ri.removeBlankTableCells){var t;const n=(t=e.previousSibling)===null||t===void 0?void 0:t.textContent;return n&&/\S/.test(n)}return e.previousSibling}translateBlockElementMarginsToNewlines(){const e=this.getMarginOfDefaultBlockElement();for(let t=0;t<this.blocks.length;t++){const n=this.getMarginOfBlockElementAtIndex(t);n&&(n.top>2*e.top&&this.prependStringToTextAtIndex(`
`,t),n.bottom>2*e.bottom&&this.appendStringToTextAtIndex(`
`,t))}}getMarginOfBlockElementAtIndex(e){const t=this.blockElements[e];if(t&&t.textContent&&!ti().includes(Ut(t))&&!this.processedElements.includes(t))return xs(t)}getMarginOfDefaultBlockElement(){const e=Z(Ht.default.tagName);return this.containerElement.appendChild(e),xs(e)}}const Cs=function(i){const{whiteSpace:e}=window.getComputedStyle(i);return["pre","pre-wrap","pre-line"].includes(e)},Fu=i=>i&&!va(i.textContent),xs=function(i){const e=window.getComputedStyle(i);if(e.display==="block")return{top:parseInt(e.marginTop),bottom:parseInt(e.marginBottom)}},Bu=function(i){return Ut(i)==="style"?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT},ju=i=>i.replace(new RegExp("^".concat(yo.source,"+")),""),Uu=i=>new RegExp("^".concat(yo.source,"*$")).test(i),va=i=>/\s$/.test(i),Hu=["contenteditable","data-trix-id","data-trix-store-key","data-trix-mutable","data-trix-placeholder","tabindex"],Xr="data-trix-serialized-attributes",qu="[".concat(Xr,"]"),Wu=new RegExp("<!--block-->","g"),zu={"application/json":function(i){let e;if(i instanceof de)e=i;else{if(!(i instanceof HTMLElement))throw new Error("unserializable object");e=li.parse(i.innerHTML).getDocument()}return e.toSerializableDocument().toJSONString()},"text/html":function(i){let e;if(i instanceof de)e=Ji.render(i);else{if(!(i instanceof HTMLElement))throw new Error("unserializable object");e=i.cloneNode(!0)}return Array.from(e.querySelectorAll("[data-trix-serialize=false]")).forEach(t=>{Je(t)}),Hu.forEach(t=>{Array.from(e.querySelectorAll("[".concat(t,"]"))).forEach(n=>{n.removeAttribute(t)})}),Array.from(e.querySelectorAll(qu)).forEach(t=>{try{const n=JSON.parse(t.getAttribute(Xr));t.removeAttribute(Xr);for(const r in n){const o=n[r];t.setAttribute(r,o)}}catch{}}),e.innerHTML.replace(Wu,"")}};var Vu=Object.freeze({__proto__:null});class yt extends xt{constructor(e,t){super(...arguments),this.attachmentManager=e,this.attachment=t,this.id=this.attachment.id,this.file=this.attachment.file}remove(){return this.attachmentManager.requestRemovalOfAttachment(this.attachment)}}yt.proxyMethod("attachment.getAttribute"),yt.proxyMethod("attachment.hasAttribute"),yt.proxyMethod("attachment.setAttribute"),yt.proxyMethod("attachment.getAttributes"),yt.proxyMethod("attachment.setAttributes"),yt.proxyMethod("attachment.isPending"),yt.proxyMethod("attachment.isPreviewable"),yt.proxyMethod("attachment.getURL"),yt.proxyMethod("attachment.getHref"),yt.proxyMethod("attachment.getFilename"),yt.proxyMethod("attachment.getFilesize"),yt.proxyMethod("attachment.getFormattedFilesize"),yt.proxyMethod("attachment.getExtension"),yt.proxyMethod("attachment.getContentType"),yt.proxyMethod("attachment.getFile"),yt.proxyMethod("attachment.setFile"),yt.proxyMethod("attachment.releaseFile"),yt.proxyMethod("attachment.getUploadProgress"),yt.proxyMethod("attachment.setUploadProgress");class ya extends xt{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];super(...arguments),this.managedAttachments={},Array.from(e).forEach(t=>{this.manageAttachment(t)})}getAttachments(){const e=[];for(const t in this.managedAttachments){const n=this.managedAttachments[t];e.push(n)}return e}manageAttachment(e){return this.managedAttachments[e.id]||(this.managedAttachments[e.id]=new yt(this,e)),this.managedAttachments[e.id]}attachmentIsManaged(e){return e.id in this.managedAttachments}requestRemovalOfAttachment(e){var t,n;if(this.attachmentIsManaged(e))return(t=this.delegate)===null||t===void 0||(n=t.attachmentManagerDidRequestRemovalOfAttachment)===null||n===void 0?void 0:n.call(t,e)}unmanageAttachment(e){const t=this.managedAttachments[e.id];return delete this.managedAttachments[e.id],t}}class Aa{constructor(e){this.composition=e,this.document=this.composition.document;const t=this.composition.getSelectedRange();this.startPosition=t[0],this.endPosition=t[1],this.startLocation=this.document.locationFromPosition(this.startPosition),this.endLocation=this.document.locationFromPosition(this.endPosition),this.block=this.document.getBlockAtIndex(this.endLocation.index),this.breaksOnReturn=this.block.breaksOnReturn(),this.previousCharacter=this.block.text.getStringAtPosition(this.endLocation.offset-1),this.nextCharacter=this.block.text.getStringAtPosition(this.endLocation.offset)}shouldInsertBlockBreak(){return this.block.hasAttributes()&&this.block.isListItem()&&!this.block.isEmpty()?this.startLocation.offset!==0:this.breaksOnReturn&&this.nextCharacter!==`
`}shouldBreakFormattedBlock(){return this.block.hasAttributes()&&!this.block.isListItem()&&(this.breaksOnReturn&&this.nextCharacter===`
`||this.previousCharacter===`
`)}shouldDecreaseListLevel(){return this.block.hasAttributes()&&this.block.isListItem()&&this.block.isEmpty()}shouldPrependListItem(){return this.block.isListItem()&&this.startLocation.offset===0&&!this.block.isEmpty()}shouldRemoveLastBlockAttribute(){return this.block.hasAttributes()&&!this.block.isListItem()&&this.block.isEmpty()}}class We extends xt{constructor(){super(...arguments),this.document=new de,this.attachments=[],this.currentAttributes={},this.revision=0}setDocument(e){var t,n;if(!e.isEqualTo(this.document))return this.document=e,this.refreshAttachments(),this.revision++,(t=this.delegate)===null||t===void 0||(n=t.compositionDidChangeDocument)===null||n===void 0?void 0:n.call(t,e)}getSnapshot(){return{document:this.document,selectedRange:this.getSelectedRange()}}loadSnapshot(e){var t,n,r,o;let{document:a,selectedRange:u}=e;return(t=this.delegate)===null||t===void 0||(n=t.compositionWillLoadSnapshot)===null||n===void 0||n.call(t),this.setDocument(a??new de),this.setSelection(u??[0,0]),(r=this.delegate)===null||r===void 0||(o=r.compositionDidLoadSnapshot)===null||o===void 0?void 0:o.call(r)}insertText(e){let{updatePosition:t}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{updatePosition:!0};const n=this.getSelectedRange();this.setDocument(this.document.insertTextAtRange(e,n));const r=n[0],o=r+e.getLength();return t&&this.setSelection(o),this.notifyDelegateOfInsertionAtRange([r,o])}insertBlock(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new ke;const t=new de([e]);return this.insertDocument(t)}insertDocument(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new de;const t=this.getSelectedRange();this.setDocument(this.document.insertDocumentAtRange(e,t));const n=t[0],r=n+e.getLength();return this.setSelection(r),this.notifyDelegateOfInsertionAtRange([n,r])}insertString(e,t){const n=this.getCurrentTextAttributes(),r=ye.textForStringWithAttributes(e,n);return this.insertText(r,t)}insertBlockBreak(){const e=this.getSelectedRange();this.setDocument(this.document.insertBlockBreakAtRange(e));const t=e[0],n=t+1;return this.setSelection(n),this.notifyDelegateOfInsertionAtRange([t,n])}insertLineBreak(){const e=new Aa(this);if(e.shouldDecreaseListLevel())return this.decreaseListLevel(),this.setSelection(e.startPosition);if(e.shouldPrependListItem()){const t=new de([e.block.copyWithoutText()]);return this.insertDocument(t)}return e.shouldInsertBlockBreak()?this.insertBlockBreak():e.shouldRemoveLastBlockAttribute()?this.removeLastBlockAttribute():e.shouldBreakFormattedBlock()?this.breakFormattedBlock(e):this.insertString(`
`)}insertHTML(e){const t=li.parse(e).getDocument(),n=this.getSelectedRange();this.setDocument(this.document.mergeDocumentAtRange(t,n));const r=n[0],o=r+t.getLength()-1;return this.setSelection(o),this.notifyDelegateOfInsertionAtRange([r,o])}replaceHTML(e){const t=li.parse(e).getDocument().copyUsingObjectsFromDocument(this.document),n=this.getLocationRange({strict:!1}),r=this.document.rangeFromLocationRange(n);return this.setDocument(t),this.setSelection(r)}insertFile(e){return this.insertFiles([e])}insertFiles(e){const t=[];return Array.from(e).forEach(n=>{var r;if((r=this.delegate)!==null&&r!==void 0&&r.compositionShouldAcceptFile(n)){const o=On.attachmentForFile(n);t.push(o)}}),this.insertAttachments(t)}insertAttachment(e){return this.insertAttachments([e])}insertAttachments(e){let t=new ye;return Array.from(e).forEach(n=>{var r;const o=n.getType(),a=(r=fo[o])===null||r===void 0?void 0:r.presentation,u=this.getCurrentTextAttributes();a&&(u.presentation=a);const p=ye.textForAttachmentWithAttributes(n,u);t=t.appendText(p)}),this.insertText(t)}shouldManageDeletingInDirection(e){const t=this.getLocationRange();if(Oe(t)){if(e==="backward"&&t[0].offset===0||this.shouldManageMovingCursorInDirection(e))return!0}else if(t[0].index!==t[1].index)return!0;return!1}deleteInDirection(e){let t,n,r,{length:o}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const a=this.getLocationRange();let u=this.getSelectedRange();const p=Oe(u);if(p?n=e==="backward"&&a[0].offset===0:r=a[0].index!==a[1].index,n&&this.canDecreaseBlockAttributeLevel()){const v=this.getBlock();if(v.isListItem()?this.decreaseListLevel():this.decreaseBlockAttributeLevel(),this.setSelection(u[0]),v.isEmpty())return!1}return p&&(u=this.getExpandedRangeInDirection(e,{length:o}),e==="backward"&&(t=this.getAttachmentAtRange(u))),t?(this.editAttachment(t),!1):(this.setDocument(this.document.removeTextAtRange(u)),this.setSelection(u[0]),!n&&!r&&void 0)}moveTextFromRange(e){const[t]=Array.from(this.getSelectedRange());return this.setDocument(this.document.moveTextFromRangeToPosition(e,t)),this.setSelection(t)}removeAttachment(e){const t=this.document.getRangeOfAttachment(e);if(t)return this.stopEditingAttachment(),this.setDocument(this.document.removeTextAtRange(t)),this.setSelection(t[0])}removeLastBlockAttribute(){const[e,t]=Array.from(this.getSelectedRange()),n=this.document.getBlockAtPosition(t);return this.removeCurrentAttribute(n.getLastAttribute()),this.setSelection(e)}insertPlaceholder(){return this.placeholderPosition=this.getPosition(),this.insertString(" ")}selectPlaceholder(){if(this.placeholderPosition!=null)return this.setSelectedRange([this.placeholderPosition,this.placeholderPosition+1]),this.getSelectedRange()}forgetPlaceholder(){this.placeholderPosition=null}hasCurrentAttribute(e){const t=this.currentAttributes[e];return t!=null&&t!==!1}toggleCurrentAttribute(e){const t=!this.currentAttributes[e];return t?this.setCurrentAttribute(e,t):this.removeCurrentAttribute(e)}canSetCurrentAttribute(e){return At(e)?this.canSetCurrentBlockAttribute(e):this.canSetCurrentTextAttribute(e)}canSetCurrentTextAttribute(e){const t=this.getSelectedDocument();if(t){for(const n of Array.from(t.getAttachments()))if(!n.hasContent())return!1;return!0}}canSetCurrentBlockAttribute(e){const t=this.getBlock();if(t)return!t.isTerminalBlock()}setCurrentAttribute(e,t){return At(e)?this.setBlockAttribute(e,t):(this.setTextAttribute(e,t),this.currentAttributes[e]=t,this.notifyDelegateOfCurrentAttributesChange())}setHTMLAtributeAtPosition(e,t,n){var r;const o=this.document.getBlockAtPosition(e),a=(r=At(o.getLastAttribute()))===null||r===void 0?void 0:r.htmlAttributes;if(o&&a!=null&&a.includes(t)){const u=this.document.setHTMLAttributeAtPosition(e,t,n);this.setDocument(u)}}setTextAttribute(e,t){const n=this.getSelectedRange();if(!n)return;const[r,o]=Array.from(n);if(r!==o)return this.setDocument(this.document.addAttributeAtRange(e,t,n));if(e==="href"){const a=ye.textForStringWithAttributes(t,{href:t});return this.insertText(a)}}setBlockAttribute(e,t){const n=this.getSelectedRange();if(this.canSetCurrentAttribute(e))return this.setDocument(this.document.applyBlockAttributeAtRange(e,t,n)),this.setSelection(n)}removeCurrentAttribute(e){return At(e)?(this.removeBlockAttribute(e),this.updateCurrentAttributes()):(this.removeTextAttribute(e),delete this.currentAttributes[e],this.notifyDelegateOfCurrentAttributesChange())}removeTextAttribute(e){const t=this.getSelectedRange();if(t)return this.setDocument(this.document.removeAttributeAtRange(e,t))}removeBlockAttribute(e){const t=this.getSelectedRange();if(t)return this.setDocument(this.document.removeAttributeAtRange(e,t))}canDecreaseNestingLevel(){var e;return((e=this.getBlock())===null||e===void 0?void 0:e.getNestingLevel())>0}canIncreaseNestingLevel(){var e;const t=this.getBlock();if(t){if((e=At(t.getLastNestableAttribute()))===null||e===void 0||!e.listAttribute)return t.getNestingLevel()>0;{const n=this.getPreviousBlock();if(n)return function(){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return pn((arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).slice(0,r.length),r)}(n.getListItemAttributes(),t.getListItemAttributes())}}}decreaseNestingLevel(){const e=this.getBlock();if(e)return this.setDocument(this.document.replaceBlock(e,e.decreaseNestingLevel()))}increaseNestingLevel(){const e=this.getBlock();if(e)return this.setDocument(this.document.replaceBlock(e,e.increaseNestingLevel()))}canDecreaseBlockAttributeLevel(){var e;return((e=this.getBlock())===null||e===void 0?void 0:e.getAttributeLevel())>0}decreaseBlockAttributeLevel(){var e;const t=(e=this.getBlock())===null||e===void 0?void 0:e.getLastAttribute();if(t)return this.removeCurrentAttribute(t)}decreaseListLevel(){let[e]=Array.from(this.getSelectedRange());const{index:t}=this.document.locationFromPosition(e);let n=t;const r=this.getBlock().getAttributeLevel();let o=this.document.getBlockAtIndex(n+1);for(;o&&o.isListItem()&&!(o.getAttributeLevel()<=r);)n++,o=this.document.getBlockAtIndex(n+1);e=this.document.positionFromLocation({index:t,offset:0});const a=this.document.positionFromLocation({index:n,offset:0});return this.setDocument(this.document.removeLastListAttributeAtRange([e,a]))}updateCurrentAttributes(){const e=this.getSelectedRange({ignoreLock:!0});if(e){const t=this.document.getCommonAttributesAtRange(e);if(Array.from(Vr()).forEach(n=>{t[n]||this.canSetCurrentAttribute(n)||(t[n]=!1)}),!_n(t,this.currentAttributes))return this.currentAttributes=t,this.notifyDelegateOfCurrentAttributesChange()}}getCurrentAttributes(){return $s.call({},this.currentAttributes)}getCurrentTextAttributes(){const e={};for(const t in this.currentAttributes){const n=this.currentAttributes[t];n!==!1&&Jr(t)&&(e[t]=n)}return e}freezeSelection(){return this.setCurrentAttribute("frozen",!0)}thawSelection(){return this.removeCurrentAttribute("frozen")}hasFrozenSelection(){return this.hasCurrentAttribute("frozen")}setSelection(e){var t;const n=this.document.locationRangeFromRange(e);return(t=this.delegate)===null||t===void 0?void 0:t.compositionDidRequestChangingSelectionToLocationRange(n)}getSelectedRange(){const e=this.getLocationRange();if(e)return this.document.rangeFromLocationRange(e)}setSelectedRange(e){const t=this.document.locationRangeFromRange(e);return this.getSelectionManager().setLocationRange(t)}getPosition(){const e=this.getLocationRange();if(e)return this.document.positionFromLocation(e[0])}getLocationRange(e){return this.targetLocationRange?this.targetLocationRange:this.getSelectionManager().getLocationRange(e)||lt({index:0,offset:0})}withTargetLocationRange(e,t){let n;this.targetLocationRange=e;try{n=t()}finally{this.targetLocationRange=null}return n}withTargetRange(e,t){const n=this.document.locationRangeFromRange(e);return this.withTargetLocationRange(n,t)}withTargetDOMRange(e,t){const n=this.createLocationRangeFromDOMRange(e,{strict:!1});return this.withTargetLocationRange(n,t)}getExpandedRangeInDirection(e){let{length:t}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},[n,r]=Array.from(this.getSelectedRange());return e==="backward"?t?n-=t:n=this.translateUTF16PositionFromOffset(n,-1):t?r+=t:r=this.translateUTF16PositionFromOffset(r,1),lt([n,r])}shouldManageMovingCursorInDirection(e){if(this.editingAttachment)return!0;const t=this.getExpandedRangeInDirection(e);return this.getAttachmentAtRange(t)!=null}moveCursorInDirection(e){let t,n;if(this.editingAttachment)n=this.document.getRangeOfAttachment(this.editingAttachment);else{const r=this.getSelectedRange();n=this.getExpandedRangeInDirection(e),t=!Ni(r,n)}if(e==="backward"?this.setSelectedRange(n[0]):this.setSelectedRange(n[1]),t){const r=this.getAttachmentAtRange(n);if(r)return this.editAttachment(r)}}expandSelectionInDirection(e){let{length:t}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=this.getExpandedRangeInDirection(e,{length:t});return this.setSelectedRange(n)}expandSelectionForEditing(){if(this.hasCurrentAttribute("href"))return this.expandSelectionAroundCommonAttribute("href")}expandSelectionAroundCommonAttribute(e){const t=this.getPosition(),n=this.document.getRangeOfCommonAttributeAtPosition(e,t);return this.setSelectedRange(n)}selectionContainsAttachments(){var e;return((e=this.getSelectedAttachments())===null||e===void 0?void 0:e.length)>0}selectionIsInCursorTarget(){return this.editingAttachment||this.positionIsCursorTarget(this.getPosition())}positionIsCursorTarget(e){const t=this.document.locationFromPosition(e);if(t)return this.locationIsCursorTarget(t)}positionIsBlockBreak(e){var t;return(t=this.document.getPieceAtPosition(e))===null||t===void 0?void 0:t.isBlockBreak()}getSelectedDocument(){const e=this.getSelectedRange();if(e)return this.document.getDocumentAtRange(e)}getSelectedAttachments(){var e;return(e=this.getSelectedDocument())===null||e===void 0?void 0:e.getAttachments()}getAttachments(){return this.attachments.slice(0)}refreshAttachments(){const e=this.document.getAttachments(),{added:t,removed:n}=function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];const a=[],u=[],p=new Set;r.forEach(y=>{p.add(y)});const v=new Set;return o.forEach(y=>{v.add(y),p.has(y)||a.push(y)}),r.forEach(y=>{v.has(y)||u.push(y)}),{added:a,removed:u}}(this.attachments,e);return this.attachments=e,Array.from(n).forEach(r=>{var o,a;r.delegate=null,(o=this.delegate)===null||o===void 0||(a=o.compositionDidRemoveAttachment)===null||a===void 0||a.call(o,r)}),(()=>{const r=[];return Array.from(t).forEach(o=>{var a,u;o.delegate=this,r.push((a=this.delegate)===null||a===void 0||(u=a.compositionDidAddAttachment)===null||u===void 0?void 0:u.call(a,o))}),r})()}attachmentDidChangeAttributes(e){var t,n;return this.revision++,(t=this.delegate)===null||t===void 0||(n=t.compositionDidEditAttachment)===null||n===void 0?void 0:n.call(t,e)}attachmentDidChangePreviewURL(e){var t,n;return this.revision++,(t=this.delegate)===null||t===void 0||(n=t.compositionDidChangeAttachmentPreviewURL)===null||n===void 0?void 0:n.call(t,e)}editAttachment(e,t){var n,r;if(e!==this.editingAttachment)return this.stopEditingAttachment(),this.editingAttachment=e,(n=this.delegate)===null||n===void 0||(r=n.compositionDidStartEditingAttachment)===null||r===void 0?void 0:r.call(n,this.editingAttachment,t)}stopEditingAttachment(){var e,t;this.editingAttachment&&((e=this.delegate)===null||e===void 0||(t=e.compositionDidStopEditingAttachment)===null||t===void 0||t.call(e,this.editingAttachment),this.editingAttachment=null)}updateAttributesForAttachment(e,t){return this.setDocument(this.document.updateAttributesForAttachment(e,t))}removeAttributeForAttachment(e,t){return this.setDocument(this.document.removeAttributeForAttachment(e,t))}breakFormattedBlock(e){let{document:t}=e;const{block:n}=e;let r=e.startPosition,o=[r-1,r];n.getBlockBreakPosition()===e.startLocation.offset?(n.breaksOnReturn()&&e.nextCharacter===`
`?r+=1:t=t.removeTextAtRange(o),o=[r,r]):e.nextCharacter===`
`?e.previousCharacter===`
`?o=[r-1,r+1]:(o=[r,r+1],r+=1):e.startLocation.offset-1!=0&&(r+=1);const a=new de([n.removeLastAttribute().copyWithoutText()]);return this.setDocument(t.insertDocumentAtRange(a,o)),this.setSelection(r)}getPreviousBlock(){const e=this.getLocationRange();if(e){const{index:t}=e[0];if(t>0)return this.document.getBlockAtIndex(t-1)}}getBlock(){const e=this.getLocationRange();if(e)return this.document.getBlockAtIndex(e[0].index)}getAttachmentAtRange(e){const t=this.document.getDocumentAtRange(e);if(t.toString()==="".concat("ï¿¼",`
`))return t.getAttachments()[0]}notifyDelegateOfCurrentAttributesChange(){var e,t;return(e=this.delegate)===null||e===void 0||(t=e.compositionDidChangeCurrentAttributes)===null||t===void 0?void 0:t.call(e,this.currentAttributes)}notifyDelegateOfInsertionAtRange(e){var t,n;return(t=this.delegate)===null||t===void 0||(n=t.compositionDidPerformInsertionAtRange)===null||n===void 0?void 0:n.call(t,e)}translateUTF16PositionFromOffset(e,t){const n=this.document.toUTF16String(),r=n.offsetFromUCS2Offset(e);return n.offsetToUCS2Offset(r+t)}}We.proxyMethod("getSelectionManager().getPointRange"),We.proxyMethod("getSelectionManager().setLocationRangeFromPointRange"),We.proxyMethod("getSelectionManager().createLocationRangeFromDOMRange"),We.proxyMethod("getSelectionManager().locationIsCursorTarget"),We.proxyMethod("getSelectionManager().selectionIsExpanded"),We.proxyMethod("delegate?.getSelectionManager");class Gr extends xt{constructor(e){super(...arguments),this.composition=e,this.undoEntries=[],this.redoEntries=[]}recordUndoEntry(e){let{context:t,consolidatable:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=this.undoEntries.slice(-1)[0];if(!n||!Ju(r,e,t)){const o=this.createEntry({description:e,context:t});this.undoEntries.push(o),this.redoEntries=[]}}undo(){const e=this.undoEntries.pop();if(e){const t=this.createEntry(e);return this.redoEntries.push(t),this.composition.loadSnapshot(e.snapshot)}}redo(){const e=this.redoEntries.pop();if(e){const t=this.createEntry(e);return this.undoEntries.push(t),this.composition.loadSnapshot(e.snapshot)}}canUndo(){return this.undoEntries.length>0}canRedo(){return this.redoEntries.length>0}createEntry(){let{description:e,context:t}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return{description:e==null?void 0:e.toString(),context:JSON.stringify(t),snapshot:this.composition.getSnapshot()}}}const Ju=(i,e,t)=>(i==null?void 0:i.description)===(e==null?void 0:e.toString())&&(i==null?void 0:i.context)===JSON.stringify(t),xr="attachmentGallery";class wa{constructor(e){this.document=e.document,this.selectedRange=e.selectedRange}perform(){return this.removeBlockAttribute(),this.applyBlockAttribute()}getSnapshot(){return{document:this.document,selectedRange:this.selectedRange}}removeBlockAttribute(){return this.findRangesOfBlocks().map(e=>this.document=this.document.removeAttributeAtRange(xr,e))}applyBlockAttribute(){let e=0;this.findRangesOfPieces().forEach(t=>{t[1]-t[0]>1&&(t[0]+=e,t[1]+=e,this.document.getCharacterAtPosition(t[1])!==`
`&&(this.document=this.document.insertBlockBreakAtRange(t[1]),t[1]<this.selectedRange[1]&&this.moveSelectedRangeForward(),t[1]++,e++),t[0]!==0&&this.document.getCharacterAtPosition(t[0]-1)!==`
`&&(this.document=this.document.insertBlockBreakAtRange(t[0]),t[0]<this.selectedRange[0]&&this.moveSelectedRangeForward(),t[0]++,e++),this.document=this.document.applyBlockAttributeAtRange(xr,!0,t))})}findRangesOfBlocks(){return this.document.findRangesForBlockAttribute(xr)}findRangesOfPieces(){return this.document.findRangesForTextAttribute("presentation",{withValue:"gallery"})}moveSelectedRangeForward(){this.selectedRange[0]+=1,this.selectedRange[1]+=1}}const Ca=function(i){const e=new wa(i);return e.perform(),e.getSnapshot()},Yu=[Ca];class xa{constructor(e,t,n){this.insertFiles=this.insertFiles.bind(this),this.composition=e,this.selectionManager=t,this.element=n,this.undoManager=new Gr(this.composition),this.filters=Yu.slice(0)}loadDocument(e){return this.loadSnapshot({document:e,selectedRange:[0,0]})}loadHTML(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";const t=li.parse(e,{referenceElement:this.element}).getDocument();return this.loadDocument(t)}loadJSON(e){let{document:t,selectedRange:n}=e;return t=de.fromJSON(t),this.loadSnapshot({document:t,selectedRange:n})}loadSnapshot(e){return this.undoManager=new Gr(this.composition),this.composition.loadSnapshot(e)}getDocument(){return this.composition.document}getSelectedDocument(){return this.composition.getSelectedDocument()}getSnapshot(){return this.composition.getSnapshot()}toJSON(){return this.getSnapshot()}deleteInDirection(e){return this.composition.deleteInDirection(e)}insertAttachment(e){return this.composition.insertAttachment(e)}insertAttachments(e){return this.composition.insertAttachments(e)}insertDocument(e){return this.composition.insertDocument(e)}insertFile(e){return this.composition.insertFile(e)}insertFiles(e){return this.composition.insertFiles(e)}insertHTML(e){return this.composition.insertHTML(e)}insertString(e){return this.composition.insertString(e)}insertText(e){return this.composition.insertText(e)}insertLineBreak(){return this.composition.insertLineBreak()}getSelectedRange(){return this.composition.getSelectedRange()}getPosition(){return this.composition.getPosition()}getClientRectAtPosition(e){const t=this.getDocument().locationRangeFromRange([e,e+1]);return this.selectionManager.getClientRectAtLocationRange(t)}expandSelectionInDirection(e){return this.composition.expandSelectionInDirection(e)}moveCursorInDirection(e){return this.composition.moveCursorInDirection(e)}setSelectedRange(e){return this.composition.setSelectedRange(e)}activateAttribute(e){let t=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];return this.composition.setCurrentAttribute(e,t)}attributeIsActive(e){return this.composition.hasCurrentAttribute(e)}canActivateAttribute(e){return this.composition.canSetCurrentAttribute(e)}deactivateAttribute(e){return this.composition.removeCurrentAttribute(e)}setHTMLAtributeAtPosition(e,t,n){this.composition.setHTMLAtributeAtPosition(e,t,n)}canDecreaseNestingLevel(){return this.composition.canDecreaseNestingLevel()}canIncreaseNestingLevel(){return this.composition.canIncreaseNestingLevel()}decreaseNestingLevel(){if(this.canDecreaseNestingLevel())return this.composition.decreaseNestingLevel()}increaseNestingLevel(){if(this.canIncreaseNestingLevel())return this.composition.increaseNestingLevel()}canRedo(){return this.undoManager.canRedo()}canUndo(){return this.undoManager.canUndo()}recordUndoEntry(e){let{context:t,consolidatable:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.undoManager.recordUndoEntry(e,{context:t,consolidatable:n})}redo(){if(this.canRedo())return this.undoManager.redo()}undo(){if(this.canUndo())return this.undoManager.undo()}}class Sa{constructor(e){this.element=e}findLocationFromContainerAndOffset(e,t){let{strict:n}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{strict:!0},r=0,o=!1;const a={index:0,offset:0},u=this.findAttachmentElementParentForNode(e);u&&(e=u.parentNode,t=cr(u));const p=Mi(this.element,{usingFilter:ka});for(;p.nextNode();){const v=p.currentNode;if(v===e&&ei(e)){Tn(v)||(a.offset+=t);break}if(v.parentNode===e){if(r++===t)break}else if(!cn(e,v)&&r>0)break;Xo(v,{strict:n})?(o&&a.index++,a.offset=0,o=!0):a.offset+=Sr(v)}return a}findContainerAndOffsetFromLocation(e){let t,n;if(e.index===0&&e.offset===0){for(t=this.element,n=0;t.firstChild;)if(t=t.firstChild,lr(t)){n=1;break}return[t,n]}let[r,o]=this.findNodeAndOffsetFromLocation(e);if(r){if(ei(r))Sr(r)===0?(t=r.parentNode.parentNode,n=cr(r.parentNode),Tn(r,{name:"right"})&&n++):(t=r,n=e.offset-o);else{if(t=r.parentNode,!Xo(r.previousSibling)&&!lr(t))for(;r===t.lastChild&&(r=t,t=t.parentNode,!lr(t)););n=cr(r),e.offset!==0&&n++}return[t,n]}}findNodeAndOffsetFromLocation(e){let t,n,r=0;for(const o of this.getSignificantNodesForIndex(e.index)){const a=Sr(o);if(e.offset<=r+a)if(ei(o)){if(t=o,n=r,e.offset===n&&Tn(t))break}else t||(t=o,n=r);if(r+=a,r>e.offset)break}return[t,n]}findAttachmentElementParentForNode(e){for(;e&&e!==this.element;){if(hn(e))return e;e=e.parentNode}}getSignificantNodesForIndex(e){const t=[],n=Mi(this.element,{usingFilter:Ku});let r=!1;for(;n.nextNode();){const a=n.currentNode;var o;if(En(a)){if(o!=null?o++:o=0,o===e)r=!0;else if(r)break}else r&&t.push(a)}return t}}const Sr=function(i){return i.nodeType===Node.TEXT_NODE?Tn(i)?0:i.textContent.length:Ut(i)==="br"||hn(i)?1:0},Ku=function(i){return $u(i)===NodeFilter.FILTER_ACCEPT?ka(i):NodeFilter.FILTER_REJECT},$u=function(i){return Gs(i)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT},ka=function(i){return hn(i.parentNode)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT};class Ea{createDOMRangeFromPoint(e){let t,{x:n,y:r}=e;if(document.caretPositionFromPoint){const{offsetNode:o,offset:a}=document.caretPositionFromPoint(n,r);return t=document.createRange(),t.setStart(o,a),t}if(document.caretRangeFromPoint)return document.caretRangeFromPoint(n,r);if(document.body.createTextRange){const o=ni();try{const a=document.body.createTextRange();a.moveToPoint(n,r),a.select()}catch{}return t=ni(),oa(o),t}}getClientRectsForDOMRange(e){const t=Array.from(e.getClientRects());return[t[0],t[t.length-1]]}}class sn extends xt{constructor(e){super(...arguments),this.didMouseDown=this.didMouseDown.bind(this),this.selectionDidChange=this.selectionDidChange.bind(this),this.element=e,this.locationMapper=new Sa(this.element),this.pointMapper=new Ea,this.lockCount=0,bt("mousedown",{onElement:this.element,withCallback:this.didMouseDown})}getLocationRange(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return e.strict===!1?this.createLocationRangeFromDOMRange(ni()):e.ignoreLock?this.currentLocationRange:this.lockedLocationRange?this.lockedLocationRange:this.currentLocationRange}setLocationRange(e){if(this.lockedLocationRange)return;e=lt(e);const t=this.createDOMRangeFromLocationRange(e);t&&(oa(t),this.updateCurrentLocationRange(e))}setLocationRangeFromPointRange(e){e=lt(e);const t=this.getLocationAtPoint(e[0]),n=this.getLocationAtPoint(e[1]);this.setLocationRange([t,n])}getClientRectAtLocationRange(e){const t=this.createDOMRangeFromLocationRange(e);if(t)return this.getClientRectsForDOMRange(t)[1]}locationIsCursorTarget(e){const t=Array.from(this.findNodeAndOffsetFromLocation(e))[0];return Tn(t)}lock(){this.lockCount++==0&&(this.updateCurrentLocationRange(),this.lockedLocationRange=this.getLocationRange())}unlock(){if(--this.lockCount==0){const{lockedLocationRange:e}=this;if(this.lockedLocationRange=null,e!=null)return this.setLocationRange(e)}}clearSelection(){var e;return(e=ra())===null||e===void 0?void 0:e.removeAllRanges()}selectionIsCollapsed(){var e;return((e=ni())===null||e===void 0?void 0:e.collapsed)===!0}selectionIsExpanded(){return!this.selectionIsCollapsed()}createLocationRangeFromDOMRange(e,t){if(e==null||!this.domRangeWithinElement(e))return;const n=this.findLocationFromContainerAndOffset(e.startContainer,e.startOffset,t);if(!n)return;const r=e.collapsed?void 0:this.findLocationFromContainerAndOffset(e.endContainer,e.endOffset,t);return lt([n,r])}didMouseDown(){return this.pauseTemporarily()}pauseTemporarily(){let e;this.paused=!0;const t=()=>{if(this.paused=!1,clearTimeout(n),Array.from(e).forEach(r=>{r.destroy()}),cn(document,this.element))return this.selectionDidChange()},n=setTimeout(t,200);e=["mousemove","keydown"].map(r=>bt(r,{onElement:document,withCallback:t}))}selectionDidChange(){if(!this.paused&&!go(this.element))return this.updateCurrentLocationRange()}updateCurrentLocationRange(e){var t,n;if((e??(e=this.createLocationRangeFromDOMRange(ni())))&&!Ni(e,this.currentLocationRange))return this.currentLocationRange=e,(t=this.delegate)===null||t===void 0||(n=t.locationRangeDidChange)===null||n===void 0?void 0:n.call(t,this.currentLocationRange.slice(0))}createDOMRangeFromLocationRange(e){const t=this.findContainerAndOffsetFromLocation(e[0]),n=Oe(e)?t:this.findContainerAndOffsetFromLocation(e[1])||t;if(t!=null&&n!=null){const r=document.createRange();return r.setStart(...Array.from(t||[])),r.setEnd(...Array.from(n||[])),r}}getLocationAtPoint(e){const t=this.createDOMRangeFromPoint(e);var n;if(t)return(n=this.createLocationRangeFromDOMRange(t))===null||n===void 0?void 0:n[0]}domRangeWithinElement(e){return e.collapsed?cn(this.element,e.startContainer):cn(this.element,e.startContainer)&&cn(this.element,e.endContainer)}}sn.proxyMethod("locationMapper.findLocationFromContainerAndOffset"),sn.proxyMethod("locationMapper.findContainerAndOffsetFromLocation"),sn.proxyMethod("locationMapper.findNodeAndOffsetFromLocation"),sn.proxyMethod("pointMapper.createDOMRangeFromPoint"),sn.proxyMethod("pointMapper.getClientRectsForDOMRange");var Ta=Object.freeze({__proto__:null,Attachment:On,AttachmentManager:ya,AttachmentPiece:Ln,Block:ke,Composition:We,Document:de,Editor:xa,HTMLParser:li,HTMLSanitizer:Vi,LineBreakInsertion:Aa,LocationMapper:Sa,ManagedAttachment:yt,Piece:yn,PointMapper:Ea,SelectionManager:sn,SplittableList:Bi,StringPiece:So,Text:ye,UndoManager:Gr}),Xu=Object.freeze({__proto__:null,ObjectView:vn,AttachmentView:Co,BlockView:fa,DocumentView:Ji,PieceView:ha,PreviewableAttachmentView:ua,TextView:da});const{lang:kr,css:rn,keyNames:Gu}=pi,Er=function(i){return function(){const e=i.apply(this,arguments);e.do(),this.undos||(this.undos=[]),this.undos.push(e.undo)}};class Da extends xt{constructor(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(...arguments),Kt(this,"makeElementMutable",Er(()=>({do:()=>{this.element.dataset.trixMutable=!0},undo:()=>delete this.element.dataset.trixMutable}))),Kt(this,"addToolbar",Er(()=>{const o=Z({tagName:"div",className:rn.attachmentToolbar,data:{trixMutable:!0},childNodes:Z({tagName:"div",className:"trix-button-row",childNodes:Z({tagName:"span",className:"trix-button-group trix-button-group--actions",childNodes:Z({tagName:"button",className:"trix-button trix-button--remove",textContent:kr.remove,attributes:{title:kr.remove},data:{trixAction:"remove"}})})})});return this.attachment.isPreviewable()&&o.appendChild(Z({tagName:"div",className:rn.attachmentMetadataContainer,childNodes:Z({tagName:"span",className:rn.attachmentMetadata,childNodes:[Z({tagName:"span",className:rn.attachmentName,textContent:this.attachment.getFilename(),attributes:{title:this.attachment.getFilename()}}),Z({tagName:"span",className:rn.attachmentSize,textContent:this.attachment.getFormattedFilesize()})]})})),bt("click",{onElement:o,withCallback:this.didClickToolbar}),bt("click",{onElement:o,matchingSelector:"[data-trix-action]",withCallback:this.didClickActionButton}),Zn("trix-attachment-before-toolbar",{onElement:this.element,attributes:{toolbar:o,attachment:this.attachment}}),{do:()=>this.element.appendChild(o),undo:()=>Je(o)}})),Kt(this,"installCaptionEditor",Er(()=>{const o=Z({tagName:"textarea",className:rn.attachmentCaptionEditor,attributes:{placeholder:kr.captionPlaceholder},data:{trixMutable:!0}});o.value=this.attachmentPiece.getCaption();const a=o.cloneNode();a.classList.add("trix-autoresize-clone"),a.tabIndex=-1;const u=function(){a.value=o.value,o.style.height=a.scrollHeight+"px"};bt("input",{onElement:o,withCallback:u}),bt("input",{onElement:o,withCallback:this.didInputCaption}),bt("keydown",{onElement:o,withCallback:this.didKeyDownCaption}),bt("change",{onElement:o,withCallback:this.didChangeCaption}),bt("blur",{onElement:o,withCallback:this.didBlurCaption});const p=this.element.querySelector("figcaption"),v=p.cloneNode();return{do:()=>{if(p.style.display="none",v.appendChild(o),v.appendChild(a),v.classList.add("".concat(rn.attachmentCaption,"--editing")),p.parentElement.insertBefore(v,p),u(),this.options.editCaption)return vo(()=>o.focus())},undo(){Je(v),p.style.display=null}}})),this.didClickToolbar=this.didClickToolbar.bind(this),this.didClickActionButton=this.didClickActionButton.bind(this),this.didKeyDownCaption=this.didKeyDownCaption.bind(this),this.didInputCaption=this.didInputCaption.bind(this),this.didChangeCaption=this.didChangeCaption.bind(this),this.didBlurCaption=this.didBlurCaption.bind(this),this.attachmentPiece=e,this.element=t,this.container=n,this.options=r,this.attachment=this.attachmentPiece.attachment,Ut(this.element)==="a"&&(this.element=this.element.firstChild),this.install()}install(){this.makeElementMutable(),this.addToolbar(),this.attachment.isPreviewable()&&this.installCaptionEditor()}uninstall(){var e;let t=this.undos.pop();for(this.savePendingCaption();t;)t(),t=this.undos.pop();(e=this.delegate)===null||e===void 0||e.didUninstallAttachmentEditor(this)}savePendingCaption(){if(this.pendingCaption!=null){const o=this.pendingCaption;var e,t,n,r;this.pendingCaption=null,o?(e=this.delegate)===null||e===void 0||(t=e.attachmentEditorDidRequestUpdatingAttributesForAttachment)===null||t===void 0||t.call(e,{caption:o},this.attachment):(n=this.delegate)===null||n===void 0||(r=n.attachmentEditorDidRequestRemovingAttributeForAttachment)===null||r===void 0||r.call(n,"caption",this.attachment)}}didClickToolbar(e){return e.preventDefault(),e.stopPropagation()}didClickActionButton(e){var t;if(e.target.getAttribute("data-trix-action")==="remove")return(t=this.delegate)===null||t===void 0?void 0:t.attachmentEditorDidRequestRemovalOfAttachment(this.attachment)}didKeyDownCaption(e){var t,n;if(Gu[e.keyCode]==="return")return e.preventDefault(),this.savePendingCaption(),(t=this.delegate)===null||t===void 0||(n=t.attachmentEditorDidRequestDeselectingAttachment)===null||n===void 0?void 0:n.call(t,this.attachment)}didInputCaption(e){this.pendingCaption=e.target.value.replace(/\s/g," ").trim()}didChangeCaption(e){return this.savePendingCaption()}didBlurCaption(e){return this.savePendingCaption()}}class Ra extends xt{constructor(e,t){super(...arguments),this.didFocus=this.didFocus.bind(this),this.didBlur=this.didBlur.bind(this),this.didClickAttachment=this.didClickAttachment.bind(this),this.element=e,this.composition=t,this.documentView=new Ji(this.composition.document,{element:this.element}),bt("focus",{onElement:this.element,withCallback:this.didFocus}),bt("blur",{onElement:this.element,withCallback:this.didBlur}),bt("click",{onElement:this.element,matchingSelector:"a[contenteditable=false]",preventDefault:!0}),bt("mousedown",{onElement:this.element,matchingSelector:un,withCallback:this.didClickAttachment}),bt("click",{onElement:this.element,matchingSelector:"a".concat(un),preventDefault:!0})}didFocus(e){var t;const n=()=>{var r,o;if(!this.focused)return this.focused=!0,(r=this.delegate)===null||r===void 0||(o=r.compositionControllerDidFocus)===null||o===void 0?void 0:o.call(r)};return((t=this.blurPromise)===null||t===void 0?void 0:t.then(n))||n()}didBlur(e){this.blurPromise=new Promise(t=>vo(()=>{var n,r;return go(this.element)||(this.focused=null,(n=this.delegate)===null||n===void 0||(r=n.compositionControllerDidBlur)===null||r===void 0||r.call(n)),this.blurPromise=null,t()}))}didClickAttachment(e,t){var n,r;const o=this.findAttachmentForElement(t),a=!!Ve(e.target,{matchingSelector:"figcaption"});return(n=this.delegate)===null||n===void 0||(r=n.compositionControllerDidSelectAttachment)===null||r===void 0?void 0:r.call(n,o,{editCaption:a})}getSerializableElement(){return this.isEditingAttachment()?this.documentView.shadowElement:this.element}render(){var e,t,n,r,o,a;return this.revision!==this.composition.revision&&(this.documentView.setDocument(this.composition.document),this.documentView.render(),this.revision=this.composition.revision),this.canSyncDocumentView()&&!this.documentView.isSynced()&&((n=this.delegate)===null||n===void 0||(r=n.compositionControllerWillSyncDocumentView)===null||r===void 0||r.call(n),this.documentView.sync(),(o=this.delegate)===null||o===void 0||(a=o.compositionControllerDidSyncDocumentView)===null||a===void 0||a.call(o)),(e=this.delegate)===null||e===void 0||(t=e.compositionControllerDidRender)===null||t===void 0?void 0:t.call(e)}rerenderViewForObject(e){return this.invalidateViewForObject(e),this.render()}invalidateViewForObject(e){return this.documentView.invalidateViewForObject(e)}isViewCachingEnabled(){return this.documentView.isViewCachingEnabled()}enableViewCaching(){return this.documentView.enableViewCaching()}disableViewCaching(){return this.documentView.disableViewCaching()}refreshViewCache(){return this.documentView.garbageCollectCachedViews()}isEditingAttachment(){return!!this.attachmentEditor}installAttachmentEditorForAttachment(e,t){var n;if(((n=this.attachmentEditor)===null||n===void 0?void 0:n.attachment)===e)return;const r=this.documentView.findElementForObject(e);if(!r)return;this.uninstallAttachmentEditor();const o=this.composition.document.getAttachmentPieceForAttachment(e);this.attachmentEditor=new Da(o,r,this.element,t),this.attachmentEditor.delegate=this}uninstallAttachmentEditor(){var e;return(e=this.attachmentEditor)===null||e===void 0?void 0:e.uninstall()}didUninstallAttachmentEditor(){return this.attachmentEditor=null,this.render()}attachmentEditorDidRequestUpdatingAttributesForAttachment(e,t){var n,r;return(n=this.delegate)===null||n===void 0||(r=n.compositionControllerWillUpdateAttachment)===null||r===void 0||r.call(n,t),this.composition.updateAttributesForAttachment(e,t)}attachmentEditorDidRequestRemovingAttributeForAttachment(e,t){var n,r;return(n=this.delegate)===null||n===void 0||(r=n.compositionControllerWillUpdateAttachment)===null||r===void 0||r.call(n,t),this.composition.removeAttributeForAttachment(e,t)}attachmentEditorDidRequestRemovalOfAttachment(e){var t,n;return(t=this.delegate)===null||t===void 0||(n=t.compositionControllerDidRequestRemovalOfAttachment)===null||n===void 0?void 0:n.call(t,e)}attachmentEditorDidRequestDeselectingAttachment(e){var t,n;return(t=this.delegate)===null||t===void 0||(n=t.compositionControllerDidRequestDeselectingAttachment)===null||n===void 0?void 0:n.call(t,e)}canSyncDocumentView(){return!this.isEditingAttachment()}findAttachmentForElement(e){return this.composition.document.getAttachmentById(parseInt(e.dataset.trixId,10))}}class La extends xt{}const _a="data-trix-mutable",Qu="[".concat(_a,"]"),Zu={attributes:!0,childList:!0,characterData:!0,characterDataOldValue:!0,subtree:!0};class Oa extends xt{constructor(e){super(e),this.didMutate=this.didMutate.bind(this),this.element=e,this.observer=new window.MutationObserver(this.didMutate),this.start()}start(){return this.reset(),this.observer.observe(this.element,Zu)}stop(){return this.observer.disconnect()}didMutate(e){var t,n;if(this.mutations.push(...Array.from(this.findSignificantMutations(e)||[])),this.mutations.length)return(t=this.delegate)===null||t===void 0||(n=t.elementDidMutate)===null||n===void 0||n.call(t,this.getMutationSummary()),this.reset()}reset(){this.mutations=[]}findSignificantMutations(e){return e.filter(t=>this.mutationIsSignificant(t))}mutationIsSignificant(e){if(this.nodeIsMutable(e.target))return!1;for(const t of Array.from(this.nodesModifiedByMutation(e)))if(this.nodeIsSignificant(t))return!0;return!1}nodeIsSignificant(e){return e!==this.element&&!this.nodeIsMutable(e)&&!Gs(e)}nodeIsMutable(e){return Ve(e,{matchingSelector:Qu})}nodesModifiedByMutation(e){const t=[];switch(e.type){case"attributes":e.attributeName!==_a&&t.push(e.target);break;case"characterData":t.push(e.target.parentNode),t.push(e.target);break;case"childList":t.push(...Array.from(e.addedNodes||[])),t.push(...Array.from(e.removedNodes||[]))}return t}getMutationSummary(){return this.getTextMutationSummary()}getTextMutationSummary(){const{additions:e,deletions:t}=this.getTextChangesFromCharacterData(),n=this.getTextChangesFromChildList();Array.from(n.additions).forEach(u=>{Array.from(e).includes(u)||e.push(u)}),t.push(...Array.from(n.deletions||[]));const r={},o=e.join("");o&&(r.textAdded=o);const a=t.join("");return a&&(r.textDeleted=a),r}getMutationsByType(e){return Array.from(this.mutations).filter(t=>t.type===e)}getTextChangesFromChildList(){let e,t;const n=[],r=[];Array.from(this.getMutationsByType("childList")).forEach(u=>{n.push(...Array.from(u.addedNodes||[])),r.push(...Array.from(u.removedNodes||[]))}),n.length===0&&r.length===1&&En(r[0])?(e=[],t=[`
`]):(e=Qr(n),t=Qr(r));const o=e.filter((u,p)=>u!==t[p]).map(Qn),a=t.filter((u,p)=>u!==e[p]).map(Qn);return{additions:o,deletions:a}}getTextChangesFromCharacterData(){let e,t;const n=this.getMutationsByType("characterData");if(n.length){const r=n[0],o=n[n.length-1],a=function(u,p){let v,y;return u=ci.box(u),(p=ci.box(p)).length<u.length?[y,v]=ns(u,p):[v,y]=ns(p,u),{added:v,removed:y}}(Qn(r.oldValue),Qn(o.target.data));e=a.added,t=a.removed}return{additions:e?[e]:[],deletions:t?[t]:[]}}}const Qr=function(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const e=[];for(const t of Array.from(i))switch(t.nodeType){case Node.TEXT_NODE:e.push(t.data);break;case Node.ELEMENT_NODE:Ut(t)==="br"?e.push(`
`):e.push(...Array.from(Qr(t.childNodes)||[]))}return e};class Pa extends Ii{constructor(e){super(...arguments),this.file=e}perform(e){const t=new FileReader;return t.onerror=()=>e(!1),t.onload=()=>{t.onerror=null;try{t.abort()}catch{}return e(!0,this.file)},t.readAsArrayBuffer(this.file)}}class th{constructor(e){this.element=e}shouldIgnore(e){return!!fi.samsungAndroid&&(this.previousEvent=this.event,this.event=e,this.checkSamsungKeyboardBuggyModeStart(),this.checkSamsungKeyboardBuggyModeEnd(),this.buggyMode)}checkSamsungKeyboardBuggyModeStart(){this.insertingLongTextAfterUnidentifiedChar()&&eh(this.element.innerText,this.event.data)&&(this.buggyMode=!0,this.event.preventDefault())}checkSamsungKeyboardBuggyModeEnd(){this.buggyMode&&this.event.inputType!=="insertText"&&(this.buggyMode=!1)}insertingLongTextAfterUnidentifiedChar(){var e;return this.isBeforeInputInsertText()&&this.previousEventWasUnidentifiedKeydown()&&((e=this.event.data)===null||e===void 0?void 0:e.length)>50}isBeforeInputInsertText(){return this.event.type==="beforeinput"&&this.event.inputType==="insertText"}previousEventWasUnidentifiedKeydown(){var e,t;return((e=this.previousEvent)===null||e===void 0?void 0:e.type)==="keydown"&&((t=this.previousEvent)===null||t===void 0?void 0:t.key)==="Unidentified"}}const eh=(i,e)=>Ss(i)===Ss(e),nh=new RegExp("(".concat("ï¿¼","|").concat(zi,"|").concat(ze,"|\\s)+"),"g"),Ss=i=>i.replace(nh," ").trim();class Yi extends xt{constructor(e){super(...arguments),this.element=e,this.mutationObserver=new Oa(this.element),this.mutationObserver.delegate=this,this.flakyKeyboardDetector=new th(this.element);for(const t in this.constructor.events)bt(t,{onElement:this.element,withCallback:this.handlerFor(t)})}elementDidMutate(e){}editorWillSyncDocumentView(){return this.mutationObserver.stop()}editorDidSyncDocumentView(){return this.mutationObserver.start()}requestRender(){var e,t;return(e=this.delegate)===null||e===void 0||(t=e.inputControllerDidRequestRender)===null||t===void 0?void 0:t.call(e)}requestReparse(){var e,t;return(e=this.delegate)===null||e===void 0||(t=e.inputControllerDidRequestReparse)===null||t===void 0||t.call(e),this.requestRender()}attachFiles(e){const t=Array.from(e).map(n=>new Pa(n));return Promise.all(t).then(n=>{this.handleInput(function(){var r,o;return(r=this.delegate)===null||r===void 0||r.inputControllerWillAttachFiles(),(o=this.responder)===null||o===void 0||o.insertFiles(n),this.requestRender()})})}handlerFor(e){return t=>{t.defaultPrevented||this.handleInput(()=>{if(!go(this.element)){if(this.flakyKeyboardDetector.shouldIgnore(t))return;this.eventName=e,this.constructor.events[e].call(this,t)}})}}handleInput(e){try{var t;(t=this.delegate)===null||t===void 0||t.inputControllerWillHandleInput(),e.call(this)}finally{var n;(n=this.delegate)===null||n===void 0||n.inputControllerDidHandleInput()}}createLinkHTML(e,t){const n=document.createElement("a");return n.href=e,n.textContent=t||e,n.outerHTML}}var Tr;Kt(Yi,"events",{});const{browser:ih,keyNames:Ma}=pi;let rh=0;class _e extends Yi{constructor(){super(...arguments),this.resetInputSummary()}setInputSummary(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.inputSummary.eventName=this.eventName;for(const t in e){const n=e[t];this.inputSummary[t]=n}return this.inputSummary}resetInputSummary(){this.inputSummary={}}reset(){return this.resetInputSummary(),gn.reset()}elementDidMutate(e){var t,n;return this.isComposing()?(t=this.delegate)===null||t===void 0||(n=t.inputControllerDidAllowUnhandledInput)===null||n===void 0?void 0:n.call(t):this.handleInput(function(){return this.mutationIsSignificant(e)&&(this.mutationIsExpected(e)?this.requestRender():this.requestReparse()),this.reset()})}mutationIsExpected(e){let{textAdded:t,textDeleted:n}=e;if(this.inputSummary.preferDocument)return!0;const r=t!=null?t===this.inputSummary.textAdded:!this.inputSummary.textAdded,o=n!=null?this.inputSummary.didDelete:!this.inputSummary.didDelete,a=[`
`,` 
`].includes(t)&&!r,u=n===`
`&&!o;if(a&&!u||u&&!a){const v=this.getSelectedRange();if(v){var p;const y=a?t.replace(/\n$/,"").length||-1:(t==null?void 0:t.length)||1;if((p=this.responder)!==null&&p!==void 0&&p.positionIsBlockBreak(v[1]+y))return!0}}return r&&o}mutationIsSignificant(e){var t;const n=Object.keys(e).length>0,r=((t=this.compositionInput)===null||t===void 0?void 0:t.getEndData())==="";return n||!r}getCompositionInput(){if(this.isComposing())return this.compositionInput;this.compositionInput=new qe(this)}isComposing(){return this.compositionInput&&!this.compositionInput.isEnded()}deleteInDirection(e,t){var n;return((n=this.responder)===null||n===void 0?void 0:n.deleteInDirection(e))!==!1?this.setInputSummary({didDelete:!0}):t?(t.preventDefault(),this.requestRender()):void 0}serializeSelectionToDataTransfer(e){var t;if(!function(r){if(r==null||!r.setData)return!1;for(const o in Zo){const a=Zo[o];try{if(r.setData(o,a),!r.getData(o)===a)return!1}catch{return!1}}return!0}(e))return;const n=(t=this.responder)===null||t===void 0?void 0:t.getSelectedDocument().toSerializableDocument();return e.setData("application/x-trix-document",JSON.stringify(n)),e.setData("text/html",Ji.render(n).innerHTML),e.setData("text/plain",n.toString().replace(/\n$/,"")),!0}canAcceptDataTransfer(e){const t={};return Array.from((e==null?void 0:e.types)||[]).forEach(n=>{t[n]=!0}),t.Files||t["application/x-trix-document"]||t["text/html"]||t["text/plain"]}getPastedHTMLUsingHiddenElement(e){const t=this.getSelectedRange(),n={position:"absolute",left:"".concat(window.pageXOffset,"px"),top:"".concat(window.pageYOffset,"px"),opacity:0},r=Z({style:n,tagName:"div",editable:!0});return document.body.appendChild(r),r.focus(),requestAnimationFrame(()=>{const o=r.innerHTML;return Je(r),this.setSelectedRange(t),e(o)})}}Kt(_e,"events",{keydown(i){this.isComposing()||this.resetInputSummary(),this.inputSummary.didInput=!0;const e=Ma[i.keyCode];if(e){var t;let r=this.keys;["ctrl","alt","shift","meta"].forEach(o=>{var a;i["".concat(o,"Key")]&&(o==="ctrl"&&(o="control"),r=(a=r)===null||a===void 0?void 0:a[o])}),((t=r)===null||t===void 0?void 0:t[e])!=null&&(this.setInputSummary({keyName:e}),gn.reset(),r[e].call(this,i))}if(ea(i)){const r=String.fromCharCode(i.keyCode).toLowerCase();if(r){var n;const o=["alt","shift"].map(a=>{if(i["".concat(a,"Key")])return a}).filter(a=>a);o.push(r),(n=this.delegate)!==null&&n!==void 0&&n.inputControllerDidReceiveKeyboardCommand(o)&&i.preventDefault()}}},keypress(i){if(this.inputSummary.eventName!=null||i.metaKey||i.ctrlKey&&!i.altKey)return;const e=ah(i);var t,n;return e?((t=this.delegate)===null||t===void 0||t.inputControllerWillPerformTyping(),(n=this.responder)===null||n===void 0||n.insertString(e),this.setInputSummary({textAdded:e,didDelete:this.selectionIsExpanded()})):void 0},textInput(i){const{data:e}=i,{textAdded:t}=this.inputSummary;if(t&&t!==e&&t.toUpperCase()===e){var n;const r=this.getSelectedRange();return this.setSelectedRange([r[0],r[1]+t.length]),(n=this.responder)===null||n===void 0||n.insertString(e),this.setInputSummary({textAdded:e}),this.setSelectedRange(r)}},dragenter(i){i.preventDefault()},dragstart(i){var e,t;return this.serializeSelectionToDataTransfer(i.dataTransfer),this.draggedRange=this.getSelectedRange(),(e=this.delegate)===null||e===void 0||(t=e.inputControllerDidStartDrag)===null||t===void 0?void 0:t.call(e)},dragover(i){if(this.draggedRange||this.canAcceptDataTransfer(i.dataTransfer)){i.preventDefault();const n={x:i.clientX,y:i.clientY};var e,t;if(!_n(n,this.draggingPoint))return this.draggingPoint=n,(e=this.delegate)===null||e===void 0||(t=e.inputControllerDidReceiveDragOverPoint)===null||t===void 0?void 0:t.call(e,this.draggingPoint)}},dragend(i){var e,t;(e=this.delegate)===null||e===void 0||(t=e.inputControllerDidCancelDrag)===null||t===void 0||t.call(e),this.draggedRange=null,this.draggingPoint=null},drop(i){var e,t;i.preventDefault();const n=(e=i.dataTransfer)===null||e===void 0?void 0:e.files,r=i.dataTransfer.getData("application/x-trix-document"),o={x:i.clientX,y:i.clientY};if((t=this.responder)===null||t===void 0||t.setLocationRangeFromPointRange(o),n!=null&&n.length)this.attachFiles(n);else if(this.draggedRange){var a,u;(a=this.delegate)===null||a===void 0||a.inputControllerWillMoveText(),(u=this.responder)===null||u===void 0||u.moveTextFromRange(this.draggedRange),this.draggedRange=null,this.requestRender()}else if(r){var p;const v=de.fromJSONString(r);(p=this.responder)===null||p===void 0||p.insertDocument(v),this.requestRender()}this.draggedRange=null,this.draggingPoint=null},cut(i){var e,t;if((e=this.responder)!==null&&e!==void 0&&e.selectionIsExpanded()&&(this.serializeSelectionToDataTransfer(i.clipboardData)&&i.preventDefault(),(t=this.delegate)===null||t===void 0||t.inputControllerWillCutText(),this.deleteInDirection("backward"),i.defaultPrevented))return this.requestRender()},copy(i){var e;(e=this.responder)!==null&&e!==void 0&&e.selectionIsExpanded()&&this.serializeSelectionToDataTransfer(i.clipboardData)&&i.preventDefault()},paste(i){const e=i.clipboardData||i.testClipboardData,t={clipboard:e};if(!e||ch(i))return void this.getPastedHTMLUsingHiddenElement(q=>{var j,Q,rt;return t.type="text/html",t.html=q,(j=this.delegate)===null||j===void 0||j.inputControllerWillPaste(t),(Q=this.responder)===null||Q===void 0||Q.insertHTML(t.html),this.requestRender(),(rt=this.delegate)===null||rt===void 0?void 0:rt.inputControllerDidPaste(t)});const n=e.getData("URL"),r=e.getData("text/html"),o=e.getData("public.url-name");if(n){var a,u,p;let q;t.type="text/html",q=o?Ao(o).trim():n,t.html=this.createLinkHTML(n,q),(a=this.delegate)===null||a===void 0||a.inputControllerWillPaste(t),this.setInputSummary({textAdded:q,didDelete:this.selectionIsExpanded()}),(u=this.responder)===null||u===void 0||u.insertHTML(t.html),this.requestRender(),(p=this.delegate)===null||p===void 0||p.inputControllerDidPaste(t)}else if(ta(e)){var v,y,k;t.type="text/plain",t.string=e.getData("text/plain"),(v=this.delegate)===null||v===void 0||v.inputControllerWillPaste(t),this.setInputSummary({textAdded:t.string,didDelete:this.selectionIsExpanded()}),(y=this.responder)===null||y===void 0||y.insertString(t.string),this.requestRender(),(k=this.delegate)===null||k===void 0||k.inputControllerDidPaste(t)}else if(r){var D,_,E;t.type="text/html",t.html=r,(D=this.delegate)===null||D===void 0||D.inputControllerWillPaste(t),(_=this.responder)===null||_===void 0||_.insertHTML(t.html),this.requestRender(),(E=this.delegate)===null||E===void 0||E.inputControllerDidPaste(t)}else if(Array.from(e.types).includes("Files")){var C,A;const q=(C=e.items)===null||C===void 0||(C=C[0])===null||C===void 0||(A=C.getAsFile)===null||A===void 0?void 0:A.call(C);if(q){var T,P,U;const j=oh(q);!q.name&&j&&(q.name="pasted-file-".concat(++rh,".").concat(j)),t.type="File",t.file=q,(T=this.delegate)===null||T===void 0||T.inputControllerWillAttachFiles(),(P=this.responder)===null||P===void 0||P.insertFile(t.file),this.requestRender(),(U=this.delegate)===null||U===void 0||U.inputControllerDidPaste(t)}}i.preventDefault()},compositionstart(i){return this.getCompositionInput().start(i.data)},compositionupdate(i){return this.getCompositionInput().update(i.data)},compositionend(i){return this.getCompositionInput().end(i.data)},beforeinput(i){this.inputSummary.didInput=!0},input(i){return this.inputSummary.didInput=!0,i.stopPropagation()}}),Kt(_e,"keys",{backspace(i){var e;return(e=this.delegate)===null||e===void 0||e.inputControllerWillPerformTyping(),this.deleteInDirection("backward",i)},delete(i){var e;return(e=this.delegate)===null||e===void 0||e.inputControllerWillPerformTyping(),this.deleteInDirection("forward",i)},return(i){var e,t;return this.setInputSummary({preferDocument:!0}),(e=this.delegate)===null||e===void 0||e.inputControllerWillPerformTyping(),(t=this.responder)===null||t===void 0?void 0:t.insertLineBreak()},tab(i){var e,t;(e=this.responder)!==null&&e!==void 0&&e.canIncreaseNestingLevel()&&((t=this.responder)===null||t===void 0||t.increaseNestingLevel(),this.requestRender(),i.preventDefault())},left(i){var e;if(this.selectionIsInCursorTarget())return i.preventDefault(),(e=this.responder)===null||e===void 0?void 0:e.moveCursorInDirection("backward")},right(i){var e;if(this.selectionIsInCursorTarget())return i.preventDefault(),(e=this.responder)===null||e===void 0?void 0:e.moveCursorInDirection("forward")},control:{d(i){var e;return(e=this.delegate)===null||e===void 0||e.inputControllerWillPerformTyping(),this.deleteInDirection("forward",i)},h(i){var e;return(e=this.delegate)===null||e===void 0||e.inputControllerWillPerformTyping(),this.deleteInDirection("backward",i)},o(i){var e,t;return i.preventDefault(),(e=this.delegate)===null||e===void 0||e.inputControllerWillPerformTyping(),(t=this.responder)===null||t===void 0||t.insertString(`
`,{updatePosition:!1}),this.requestRender()}},shift:{return(i){var e,t;(e=this.delegate)===null||e===void 0||e.inputControllerWillPerformTyping(),(t=this.responder)===null||t===void 0||t.insertString(`
`),this.requestRender(),i.preventDefault()},tab(i){var e,t;(e=this.responder)!==null&&e!==void 0&&e.canDecreaseNestingLevel()&&((t=this.responder)===null||t===void 0||t.decreaseNestingLevel(),this.requestRender(),i.preventDefault())},left(i){if(this.selectionIsInCursorTarget())return i.preventDefault(),this.expandSelectionInDirection("backward")},right(i){if(this.selectionIsInCursorTarget())return i.preventDefault(),this.expandSelectionInDirection("forward")}},alt:{backspace(i){var e;return this.setInputSummary({preferDocument:!1}),(e=this.delegate)===null||e===void 0?void 0:e.inputControllerWillPerformTyping()}},meta:{backspace(i){var e;return this.setInputSummary({preferDocument:!1}),(e=this.delegate)===null||e===void 0?void 0:e.inputControllerWillPerformTyping()}}}),_e.proxyMethod("responder?.getSelectedRange"),_e.proxyMethod("responder?.setSelectedRange"),_e.proxyMethod("responder?.expandSelectionInDirection"),_e.proxyMethod("responder?.selectionIsInCursorTarget"),_e.proxyMethod("responder?.selectionIsExpanded");const oh=i=>{var e;return(e=i.type)===null||e===void 0||(e=e.match(/\/(\w+)$/))===null||e===void 0?void 0:e[1]},sh=!((Tr=" ".codePointAt)===null||Tr===void 0||!Tr.call(" ",0)),ah=function(i){if(i.key&&sh&&i.key.codePointAt(0)===i.keyCode)return i.key;{let e;if(i.which===null?e=i.keyCode:i.which!==0&&i.charCode!==0&&(e=i.charCode),e!=null&&Ma[e]!=="escape")return ci.fromCodepoints([e]).toString()}},ch=function(i){const e=i.clipboardData;if(e){if(e.types.includes("text/html")){for(const t of e.types){const n=/^CorePasteboardFlavorType/.test(t),r=/^dyn\./.test(t)&&e.getData(t);if(n||r)return!0}return!1}{const t=e.types.includes("com.apple.webarchive"),n=e.types.includes("com.apple.flat-rtfd");return t||n}}};class qe extends xt{constructor(e){super(...arguments),this.inputController=e,this.responder=this.inputController.responder,this.delegate=this.inputController.delegate,this.inputSummary=this.inputController.inputSummary,this.data={}}start(e){if(this.data.start=e,this.isSignificant()){var t,n;this.inputSummary.eventName==="keypress"&&this.inputSummary.textAdded&&((n=this.responder)===null||n===void 0||n.deleteInDirection("left")),this.selectionIsExpanded()||(this.insertPlaceholder(),this.requestRender()),this.range=(t=this.responder)===null||t===void 0?void 0:t.getSelectedRange()}}update(e){if(this.data.update=e,this.isSignificant()){const t=this.selectPlaceholder();t&&(this.forgetPlaceholder(),this.range=t)}}end(e){return this.data.end=e,this.isSignificant()?(this.forgetPlaceholder(),this.canApplyToDocument()?(this.setInputSummary({preferDocument:!0,didInput:!1}),(t=this.delegate)===null||t===void 0||t.inputControllerWillPerformTyping(),(n=this.responder)===null||n===void 0||n.setSelectedRange(this.range),(r=this.responder)===null||r===void 0||r.insertString(this.data.end),(o=this.responder)===null||o===void 0?void 0:o.setSelectedRange(this.range[0]+this.data.end.length)):this.data.start!=null||this.data.update!=null?(this.requestReparse(),this.inputController.reset()):void 0):this.inputController.reset();var t,n,r,o}getEndData(){return this.data.end}isEnded(){return this.getEndData()!=null}isSignificant(){return!ih.composesExistingText||this.inputSummary.didInput}canApplyToDocument(){var e,t;return((e=this.data.start)===null||e===void 0?void 0:e.length)===0&&((t=this.data.end)===null||t===void 0?void 0:t.length)>0&&this.range}}qe.proxyMethod("inputController.setInputSummary"),qe.proxyMethod("inputController.requestRender"),qe.proxyMethod("inputController.requestReparse"),qe.proxyMethod("responder?.selectionIsExpanded"),qe.proxyMethod("responder?.insertPlaceholder"),qe.proxyMethod("responder?.selectPlaceholder"),qe.proxyMethod("responder?.forgetPlaceholder");class ri extends Yi{constructor(){super(...arguments),this.render=this.render.bind(this)}elementDidMutate(){return this.scheduledRender?this.composing?(e=this.delegate)===null||e===void 0||(t=e.inputControllerDidAllowUnhandledInput)===null||t===void 0?void 0:t.call(e):void 0:this.reparse();var e,t}scheduleRender(){return this.scheduledRender?this.scheduledRender:this.scheduledRender=requestAnimationFrame(this.render)}render(){var e,t;cancelAnimationFrame(this.scheduledRender),this.scheduledRender=null,this.composing||(t=this.delegate)===null||t===void 0||t.render(),(e=this.afterRender)===null||e===void 0||e.call(this),this.afterRender=null}reparse(){var e;return(e=this.delegate)===null||e===void 0?void 0:e.reparse()}insertString(){var e;let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",n=arguments.length>1?arguments[1]:void 0;return(e=this.delegate)===null||e===void 0||e.inputControllerWillPerformTyping(),this.withTargetDOMRange(function(){var r;return(r=this.responder)===null||r===void 0?void 0:r.insertString(t,n)})}toggleAttributeIfSupported(e){var t;if(Vr().includes(e))return(t=this.delegate)===null||t===void 0||t.inputControllerWillPerformFormatting(e),this.withTargetDOMRange(function(){var n;return(n=this.responder)===null||n===void 0?void 0:n.toggleCurrentAttribute(e)})}activateAttributeIfSupported(e,t){var n;if(Vr().includes(e))return(n=this.delegate)===null||n===void 0||n.inputControllerWillPerformFormatting(e),this.withTargetDOMRange(function(){var r;return(r=this.responder)===null||r===void 0?void 0:r.setCurrentAttribute(e,t)})}deleteInDirection(e){let{recordUndoEntry:t}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{recordUndoEntry:!0};var n;t&&((n=this.delegate)===null||n===void 0||n.inputControllerWillPerformTyping());const r=()=>{var a;return(a=this.responder)===null||a===void 0?void 0:a.deleteInDirection(e)},o=this.getTargetDOMRange({minLength:this.composing?1:2});return o?this.withTargetDOMRange(o,r):r()}withTargetDOMRange(e,t){var n;return typeof e=="function"&&(t=e,e=this.getTargetDOMRange()),e?(n=this.responder)===null||n===void 0?void 0:n.withTargetDOMRange(e,t.bind(this)):(gn.reset(),t.call(this))}getTargetDOMRange(){var e,t;let{minLength:n}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{minLength:0};const r=(e=(t=this.event).getTargetRanges)===null||e===void 0?void 0:e.call(t);if(r&&r.length){const o=lh(r[0]);if(n===0||o.toString().length>=n)return o}}withEvent(e,t){let n;this.event=e;try{n=t.call(this)}finally{this.event=null}return n}}Kt(ri,"events",{keydown(i){if(ea(i)){var e;const t=dh(i);(e=this.delegate)!==null&&e!==void 0&&e.inputControllerDidReceiveKeyboardCommand(t)&&i.preventDefault()}else{let t=i.key;i.altKey&&(t+="+Alt"),i.shiftKey&&(t+="+Shift");const n=this.constructor.keys[t];if(n)return this.withEvent(i,n)}},paste(i){var e;let t;const n=(e=i.clipboardData)===null||e===void 0?void 0:e.getData("URL");return Na(i)?(i.preventDefault(),this.attachFiles(i.clipboardData.files)):hh(i)?(i.preventDefault(),t={type:"text/plain",string:i.clipboardData.getData("text/plain")},(r=this.delegate)===null||r===void 0||r.inputControllerWillPaste(t),(o=this.responder)===null||o===void 0||o.insertString(t.string),this.render(),(a=this.delegate)===null||a===void 0?void 0:a.inputControllerDidPaste(t)):n?(i.preventDefault(),t={type:"text/html",html:this.createLinkHTML(n)},(u=this.delegate)===null||u===void 0||u.inputControllerWillPaste(t),(p=this.responder)===null||p===void 0||p.insertHTML(t.html),this.render(),(v=this.delegate)===null||v===void 0?void 0:v.inputControllerDidPaste(t)):void 0;var r,o,a,u,p,v},beforeinput(i){const e=this.constructor.inputTypes[i.inputType],t=(n=i,!(!/iPhone|iPad/.test(navigator.userAgent)||n.inputType&&n.inputType!=="insertParagraph"));var n;e&&(this.withEvent(i,e),t||this.scheduleRender()),t&&this.render()},input(i){gn.reset()},dragstart(i){var e,t;(e=this.responder)!==null&&e!==void 0&&e.selectionContainsAttachments()&&(i.dataTransfer.setData("application/x-trix-dragging",!0),this.dragging={range:(t=this.responder)===null||t===void 0?void 0:t.getSelectedRange(),point:Rr(i)})},dragenter(i){Dr(i)&&i.preventDefault()},dragover(i){if(this.dragging){i.preventDefault();const t=Rr(i);var e;if(!_n(t,this.dragging.point))return this.dragging.point=t,(e=this.responder)===null||e===void 0?void 0:e.setLocationRangeFromPointRange(t)}else Dr(i)&&i.preventDefault()},drop(i){var e,t;if(this.dragging)return i.preventDefault(),(e=this.delegate)===null||e===void 0||e.inputControllerWillMoveText(),(t=this.responder)===null||t===void 0||t.moveTextFromRange(this.dragging.range),this.dragging=null,this.scheduleRender();if(Dr(i)){var n;i.preventDefault();const r=Rr(i);return(n=this.responder)===null||n===void 0||n.setLocationRangeFromPointRange(r),this.attachFiles(i.dataTransfer.files)}},dragend(){var i;this.dragging&&((i=this.responder)===null||i===void 0||i.setSelectedRange(this.dragging.range),this.dragging=null)},compositionend(i){this.composing&&(this.composing=!1,fi.recentAndroid||this.scheduleRender())}}),Kt(ri,"keys",{ArrowLeft(){var i,e;if((i=this.responder)!==null&&i!==void 0&&i.shouldManageMovingCursorInDirection("backward"))return this.event.preventDefault(),(e=this.responder)===null||e===void 0?void 0:e.moveCursorInDirection("backward")},ArrowRight(){var i,e;if((i=this.responder)!==null&&i!==void 0&&i.shouldManageMovingCursorInDirection("forward"))return this.event.preventDefault(),(e=this.responder)===null||e===void 0?void 0:e.moveCursorInDirection("forward")},Backspace(){var i,e,t;if((i=this.responder)!==null&&i!==void 0&&i.shouldManageDeletingInDirection("backward"))return this.event.preventDefault(),(e=this.delegate)===null||e===void 0||e.inputControllerWillPerformTyping(),(t=this.responder)===null||t===void 0||t.deleteInDirection("backward"),this.render()},Tab(){var i,e;if((i=this.responder)!==null&&i!==void 0&&i.canIncreaseNestingLevel())return this.event.preventDefault(),(e=this.responder)===null||e===void 0||e.increaseNestingLevel(),this.render()},"Tab+Shift"(){var i,e;if((i=this.responder)!==null&&i!==void 0&&i.canDecreaseNestingLevel())return this.event.preventDefault(),(e=this.responder)===null||e===void 0||e.decreaseNestingLevel(),this.render()}}),Kt(ri,"inputTypes",{deleteByComposition(){return this.deleteInDirection("backward",{recordUndoEntry:!1})},deleteByCut(){return this.deleteInDirection("backward")},deleteByDrag(){return this.event.preventDefault(),this.withTargetDOMRange(function(){var i;this.deleteByDragRange=(i=this.responder)===null||i===void 0?void 0:i.getSelectedRange()})},deleteCompositionText(){return this.deleteInDirection("backward",{recordUndoEntry:!1})},deleteContent(){return this.deleteInDirection("backward")},deleteContentBackward(){return this.deleteInDirection("backward")},deleteContentForward(){return this.deleteInDirection("forward")},deleteEntireSoftLine(){return this.deleteInDirection("forward")},deleteHardLineBackward(){return this.deleteInDirection("backward")},deleteHardLineForward(){return this.deleteInDirection("forward")},deleteSoftLineBackward(){return this.deleteInDirection("backward")},deleteSoftLineForward(){return this.deleteInDirection("forward")},deleteWordBackward(){return this.deleteInDirection("backward")},deleteWordForward(){return this.deleteInDirection("forward")},formatBackColor(){return this.activateAttributeIfSupported("backgroundColor",this.event.data)},formatBold(){return this.toggleAttributeIfSupported("bold")},formatFontColor(){return this.activateAttributeIfSupported("color",this.event.data)},formatFontName(){return this.activateAttributeIfSupported("font",this.event.data)},formatIndent(){var i;if((i=this.responder)!==null&&i!==void 0&&i.canIncreaseNestingLevel())return this.withTargetDOMRange(function(){var e;return(e=this.responder)===null||e===void 0?void 0:e.increaseNestingLevel()})},formatItalic(){return this.toggleAttributeIfSupported("italic")},formatJustifyCenter(){return this.toggleAttributeIfSupported("justifyCenter")},formatJustifyFull(){return this.toggleAttributeIfSupported("justifyFull")},formatJustifyLeft(){return this.toggleAttributeIfSupported("justifyLeft")},formatJustifyRight(){return this.toggleAttributeIfSupported("justifyRight")},formatOutdent(){var i;if((i=this.responder)!==null&&i!==void 0&&i.canDecreaseNestingLevel())return this.withTargetDOMRange(function(){var e;return(e=this.responder)===null||e===void 0?void 0:e.decreaseNestingLevel()})},formatRemove(){this.withTargetDOMRange(function(){for(const t in(i=this.responder)===null||i===void 0?void 0:i.getCurrentAttributes()){var i,e;(e=this.responder)===null||e===void 0||e.removeCurrentAttribute(t)}})},formatSetBlockTextDirection(){return this.activateAttributeIfSupported("blockDir",this.event.data)},formatSetInlineTextDirection(){return this.activateAttributeIfSupported("textDir",this.event.data)},formatStrikeThrough(){return this.toggleAttributeIfSupported("strike")},formatSubscript(){return this.toggleAttributeIfSupported("sub")},formatSuperscript(){return this.toggleAttributeIfSupported("sup")},formatUnderline(){return this.toggleAttributeIfSupported("underline")},historyRedo(){var i;return(i=this.delegate)===null||i===void 0?void 0:i.inputControllerWillPerformRedo()},historyUndo(){var i;return(i=this.delegate)===null||i===void 0?void 0:i.inputControllerWillPerformUndo()},insertCompositionText(){return this.composing=!0,this.insertString(this.event.data)},insertFromComposition(){return this.composing=!1,this.insertString(this.event.data)},insertFromDrop(){const i=this.deleteByDragRange;var e;if(i)return this.deleteByDragRange=null,(e=this.delegate)===null||e===void 0||e.inputControllerWillMoveText(),this.withTargetDOMRange(function(){var t;return(t=this.responder)===null||t===void 0?void 0:t.moveTextFromRange(i)})},insertFromPaste(){const{dataTransfer:i}=this.event,e={dataTransfer:i},t=i.getData("URL"),n=i.getData("text/html");if(t){var r;let p;this.event.preventDefault(),e.type="text/html";const v=i.getData("public.url-name");p=v?Ao(v).trim():t,e.html=this.createLinkHTML(t,p),(r=this.delegate)===null||r===void 0||r.inputControllerWillPaste(e),this.withTargetDOMRange(function(){var y;return(y=this.responder)===null||y===void 0?void 0:y.insertHTML(e.html)}),this.afterRender=()=>{var y;return(y=this.delegate)===null||y===void 0?void 0:y.inputControllerDidPaste(e)}}else if(ta(i)){var o;e.type="text/plain",e.string=i.getData("text/plain"),(o=this.delegate)===null||o===void 0||o.inputControllerWillPaste(e),this.withTargetDOMRange(function(){var p;return(p=this.responder)===null||p===void 0?void 0:p.insertString(e.string)}),this.afterRender=()=>{var p;return(p=this.delegate)===null||p===void 0?void 0:p.inputControllerDidPaste(e)}}else if(uh(this.event)){var a;e.type="File",e.file=i.files[0],(a=this.delegate)===null||a===void 0||a.inputControllerWillPaste(e),this.withTargetDOMRange(function(){var p;return(p=this.responder)===null||p===void 0?void 0:p.insertFile(e.file)}),this.afterRender=()=>{var p;return(p=this.delegate)===null||p===void 0?void 0:p.inputControllerDidPaste(e)}}else if(n){var u;this.event.preventDefault(),e.type="text/html",e.html=n,(u=this.delegate)===null||u===void 0||u.inputControllerWillPaste(e),this.withTargetDOMRange(function(){var p;return(p=this.responder)===null||p===void 0?void 0:p.insertHTML(e.html)}),this.afterRender=()=>{var p;return(p=this.delegate)===null||p===void 0?void 0:p.inputControllerDidPaste(e)}}},insertFromYank(){return this.insertString(this.event.data)},insertLineBreak(){return this.insertString(`
`)},insertLink(){return this.activateAttributeIfSupported("href",this.event.data)},insertOrderedList(){return this.toggleAttributeIfSupported("number")},insertParagraph(){var i;return(i=this.delegate)===null||i===void 0||i.inputControllerWillPerformTyping(),this.withTargetDOMRange(function(){var e;return(e=this.responder)===null||e===void 0?void 0:e.insertLineBreak()})},insertReplacementText(){const i=this.event.dataTransfer.getData("text/plain"),e=this.event.getTargetRanges()[0];this.withTargetDOMRange(e,()=>{this.insertString(i,{updatePosition:!1})})},insertText(){var i;return this.insertString(this.event.data||((i=this.event.dataTransfer)===null||i===void 0?void 0:i.getData("text/plain")))},insertTranspose(){return this.insertString(this.event.data)},insertUnorderedList(){return this.toggleAttributeIfSupported("bullet")}});const lh=function(i){const e=document.createRange();return e.setStart(i.startContainer,i.startOffset),e.setEnd(i.endContainer,i.endOffset),e},Dr=i=>{var e;return Array.from(((e=i.dataTransfer)===null||e===void 0?void 0:e.types)||[]).includes("Files")},uh=i=>{var e;return((e=i.dataTransfer.files)===null||e===void 0?void 0:e[0])&&!Na(i)&&!(t=>{let{dataTransfer:n}=t;return n.types.includes("Files")&&n.types.includes("text/html")&&n.getData("text/html").includes("urn:schemas-microsoft-com:office:office")})(i)},Na=function(i){const e=i.clipboardData;if(e)return Array.from(e.types).filter(t=>t.match(/file/i)).length===e.types.length&&e.files.length>=1},hh=function(i){const e=i.clipboardData;if(e)return e.types.includes("text/plain")&&e.types.length===1},dh=function(i){const e=[];return i.altKey&&e.push("alt"),i.shiftKey&&e.push("shift"),e.push(i.key),e},Rr=i=>({x:i.clientX,y:i.clientY}),Zr="[data-trix-attribute]",to="[data-trix-action]",fh="".concat(Zr,", ").concat(to),Ki="[data-trix-dialog]",ph="".concat(Ki,"[data-trix-active]"),gh="".concat(Ki," [data-trix-method]"),ks="".concat(Ki," [data-trix-input]"),Es=(i,e)=>(e||(e=kn(i)),i.querySelector("[data-trix-input][name='".concat(e,"']"))),Ts=i=>i.getAttribute("data-trix-action"),kn=i=>i.getAttribute("data-trix-attribute")||i.getAttribute("data-trix-dialog-attribute");class Ia extends xt{constructor(e){super(e),this.didClickActionButton=this.didClickActionButton.bind(this),this.didClickAttributeButton=this.didClickAttributeButton.bind(this),this.didClickDialogButton=this.didClickDialogButton.bind(this),this.didKeyDownDialogInput=this.didKeyDownDialogInput.bind(this),this.element=e,this.attributes={},this.actions={},this.resetDialogInputs(),bt("mousedown",{onElement:this.element,matchingSelector:to,withCallback:this.didClickActionButton}),bt("mousedown",{onElement:this.element,matchingSelector:Zr,withCallback:this.didClickAttributeButton}),bt("click",{onElement:this.element,matchingSelector:fh,preventDefault:!0}),bt("click",{onElement:this.element,matchingSelector:gh,withCallback:this.didClickDialogButton}),bt("keydown",{onElement:this.element,matchingSelector:ks,withCallback:this.didKeyDownDialogInput})}didClickActionButton(e,t){var n;(n=this.delegate)===null||n===void 0||n.toolbarDidClickButton(),e.preventDefault();const r=Ts(t);return this.getDialog(r)?this.toggleDialog(r):(o=this.delegate)===null||o===void 0?void 0:o.toolbarDidInvokeAction(r,t);var o}didClickAttributeButton(e,t){var n;(n=this.delegate)===null||n===void 0||n.toolbarDidClickButton(),e.preventDefault();const r=kn(t);var o;return this.getDialog(r)?this.toggleDialog(r):(o=this.delegate)===null||o===void 0||o.toolbarDidToggleAttribute(r),this.refreshAttributeButtons()}didClickDialogButton(e,t){const n=Ve(t,{matchingSelector:Ki});return this[t.getAttribute("data-trix-method")].call(this,n)}didKeyDownDialogInput(e,t){if(e.keyCode===13){e.preventDefault();const n=t.getAttribute("name"),r=this.getDialog(n);this.setAttribute(r)}if(e.keyCode===27)return e.preventDefault(),this.hideDialog()}updateActions(e){return this.actions=e,this.refreshActionButtons()}refreshActionButtons(){return this.eachActionButton((e,t)=>{e.disabled=this.actions[t]===!1})}eachActionButton(e){return Array.from(this.element.querySelectorAll(to)).map(t=>e(t,Ts(t)))}updateAttributes(e){return this.attributes=e,this.refreshAttributeButtons()}refreshAttributeButtons(){return this.eachAttributeButton((e,t)=>(e.disabled=this.attributes[t]===!1,this.attributes[t]||this.dialogIsVisible(t)?(e.setAttribute("data-trix-active",""),e.classList.add("trix-active")):(e.removeAttribute("data-trix-active"),e.classList.remove("trix-active"))))}eachAttributeButton(e){return Array.from(this.element.querySelectorAll(Zr)).map(t=>e(t,kn(t)))}applyKeyboardCommand(e){const t=JSON.stringify(e.sort());for(const n of Array.from(this.element.querySelectorAll("[data-trix-key]"))){const r=n.getAttribute("data-trix-key").split("+");if(JSON.stringify(r.sort())===t)return Zn("mousedown",{onElement:n}),!0}return!1}dialogIsVisible(e){const t=this.getDialog(e);if(t)return t.hasAttribute("data-trix-active")}toggleDialog(e){return this.dialogIsVisible(e)?this.hideDialog():this.showDialog(e)}showDialog(e){var t,n;this.hideDialog(),(t=this.delegate)===null||t===void 0||t.toolbarWillShowDialog();const r=this.getDialog(e);r.setAttribute("data-trix-active",""),r.classList.add("trix-active"),Array.from(r.querySelectorAll("input[disabled]")).forEach(a=>{a.removeAttribute("disabled")});const o=kn(r);if(o){const a=Es(r,e);a&&(a.value=this.attributes[o]||"",a.select())}return(n=this.delegate)===null||n===void 0?void 0:n.toolbarDidShowDialog(e)}setAttribute(e){var t;const n=kn(e),r=Es(e,n);return!r.willValidate||(r.setCustomValidity(""),r.checkValidity()&&this.isSafeAttribute(r))?((t=this.delegate)===null||t===void 0||t.toolbarDidUpdateAttribute(n,r.value),this.hideDialog()):(r.setCustomValidity("Invalid value"),r.setAttribute("data-trix-validate",""),r.classList.add("trix-validate"),r.focus())}isSafeAttribute(e){return!e.hasAttribute("data-trix-validate-href")||Fi.isValidAttribute("a","href",e.value)}removeAttribute(e){var t;const n=kn(e);return(t=this.delegate)===null||t===void 0||t.toolbarDidRemoveAttribute(n),this.hideDialog()}hideDialog(){const e=this.element.querySelector(ph);var t;if(e)return e.removeAttribute("data-trix-active"),e.classList.remove("trix-active"),this.resetDialogInputs(),(t=this.delegate)===null||t===void 0?void 0:t.toolbarDidHideDialog((n=>n.getAttribute("data-trix-dialog"))(e))}resetDialogInputs(){Array.from(this.element.querySelectorAll(ks)).forEach(e=>{e.setAttribute("disabled","disabled"),e.removeAttribute("data-trix-validate"),e.classList.remove("trix-validate")})}getDialog(e){return this.element.querySelector("[data-trix-dialog=".concat(e,"]"))}}class oi extends La{constructor(e){let{editorElement:t,document:n,html:r}=e;super(...arguments),this.editorElement=t,this.selectionManager=new sn(this.editorElement),this.selectionManager.delegate=this,this.composition=new We,this.composition.delegate=this,this.attachmentManager=new ya(this.composition.getAttachments()),this.attachmentManager.delegate=this,this.inputController=mo.getLevel()===2?new ri(this.editorElement):new _e(this.editorElement),this.inputController.delegate=this,this.inputController.responder=this.composition,this.compositionController=new Ra(this.editorElement,this.composition),this.compositionController.delegate=this,this.toolbarController=new Ia(this.editorElement.toolbarElement),this.toolbarController.delegate=this,this.editor=new xa(this.composition,this.selectionManager,this.editorElement),n?this.editor.loadDocument(n):this.editor.loadHTML(r)}registerSelectionManager(){return gn.registerSelectionManager(this.selectionManager)}unregisterSelectionManager(){return gn.unregisterSelectionManager(this.selectionManager)}render(){return this.compositionController.render()}reparse(){return this.composition.replaceHTML(this.editorElement.innerHTML)}compositionDidChangeDocument(e){if(this.notifyEditorElement("document-change"),!this.handlingInput)return this.render()}compositionDidChangeCurrentAttributes(e){return this.currentAttributes=e,this.toolbarController.updateAttributes(this.currentAttributes),this.updateCurrentActions(),this.notifyEditorElement("attributes-change",{attributes:this.currentAttributes})}compositionDidPerformInsertionAtRange(e){this.pasting&&(this.pastedRange=e)}compositionShouldAcceptFile(e){return this.notifyEditorElement("file-accept",{file:e})}compositionDidAddAttachment(e){const t=this.attachmentManager.manageAttachment(e);return this.notifyEditorElement("attachment-add",{attachment:t})}compositionDidEditAttachment(e){this.compositionController.rerenderViewForObject(e);const t=this.attachmentManager.manageAttachment(e);return this.notifyEditorElement("attachment-edit",{attachment:t}),this.notifyEditorElement("change")}compositionDidChangeAttachmentPreviewURL(e){return this.compositionController.invalidateViewForObject(e),this.notifyEditorElement("change")}compositionDidRemoveAttachment(e){const t=this.attachmentManager.unmanageAttachment(e);return this.notifyEditorElement("attachment-remove",{attachment:t})}compositionDidStartEditingAttachment(e,t){return this.attachmentLocationRange=this.composition.document.getLocationRangeOfAttachment(e),this.compositionController.installAttachmentEditorForAttachment(e,t),this.selectionManager.setLocationRange(this.attachmentLocationRange)}compositionDidStopEditingAttachment(e){this.compositionController.uninstallAttachmentEditor(),this.attachmentLocationRange=null}compositionDidRequestChangingSelectionToLocationRange(e){if(!this.loadingSnapshot||this.isFocused())return this.requestedLocationRange=e,this.compositionRevisionWhenLocationRangeRequested=this.composition.revision,this.handlingInput?void 0:this.render()}compositionWillLoadSnapshot(){this.loadingSnapshot=!0}compositionDidLoadSnapshot(){this.compositionController.refreshViewCache(),this.render(),this.loadingSnapshot=!1}getSelectionManager(){return this.selectionManager}attachmentManagerDidRequestRemovalOfAttachment(e){return this.removeAttachment(e)}compositionControllerWillSyncDocumentView(){return this.inputController.editorWillSyncDocumentView(),this.selectionManager.lock(),this.selectionManager.clearSelection()}compositionControllerDidSyncDocumentView(){return this.inputController.editorDidSyncDocumentView(),this.selectionManager.unlock(),this.updateCurrentActions(),this.notifyEditorElement("sync")}compositionControllerDidRender(){this.requestedLocationRange&&(this.compositionRevisionWhenLocationRangeRequested===this.composition.revision&&this.selectionManager.setLocationRange(this.requestedLocationRange),this.requestedLocationRange=null,this.compositionRevisionWhenLocationRangeRequested=null),this.renderedCompositionRevision!==this.composition.revision&&(this.runEditorFilters(),this.composition.updateCurrentAttributes(),this.notifyEditorElement("render")),this.renderedCompositionRevision=this.composition.revision}compositionControllerDidFocus(){return this.isFocusedInvisibly()&&this.setLocationRange({index:0,offset:0}),this.toolbarController.hideDialog(),this.notifyEditorElement("focus")}compositionControllerDidBlur(){return this.notifyEditorElement("blur")}compositionControllerDidSelectAttachment(e,t){return this.toolbarController.hideDialog(),this.composition.editAttachment(e,t)}compositionControllerDidRequestDeselectingAttachment(e){const t=this.attachmentLocationRange||this.composition.document.getLocationRangeOfAttachment(e);return this.selectionManager.setLocationRange(t[1])}compositionControllerWillUpdateAttachment(e){return this.editor.recordUndoEntry("Edit Attachment",{context:e.id,consolidatable:!0})}compositionControllerDidRequestRemovalOfAttachment(e){return this.removeAttachment(e)}inputControllerWillHandleInput(){this.handlingInput=!0,this.requestedRender=!1}inputControllerDidRequestRender(){this.requestedRender=!0}inputControllerDidHandleInput(){if(this.handlingInput=!1,this.requestedRender)return this.requestedRender=!1,this.render()}inputControllerDidAllowUnhandledInput(){return this.notifyEditorElement("change")}inputControllerDidRequestReparse(){return this.reparse()}inputControllerWillPerformTyping(){return this.recordTypingUndoEntry()}inputControllerWillPerformFormatting(e){return this.recordFormattingUndoEntry(e)}inputControllerWillCutText(){return this.editor.recordUndoEntry("Cut")}inputControllerWillPaste(e){return this.editor.recordUndoEntry("Paste"),this.pasting=!0,this.notifyEditorElement("before-paste",{paste:e})}inputControllerDidPaste(e){return e.range=this.pastedRange,this.pastedRange=null,this.pasting=null,this.notifyEditorElement("paste",{paste:e})}inputControllerWillMoveText(){return this.editor.recordUndoEntry("Move")}inputControllerWillAttachFiles(){return this.editor.recordUndoEntry("Drop Files")}inputControllerWillPerformUndo(){return this.editor.undo()}inputControllerWillPerformRedo(){return this.editor.redo()}inputControllerDidReceiveKeyboardCommand(e){return this.toolbarController.applyKeyboardCommand(e)}inputControllerDidStartDrag(){this.locationRangeBeforeDrag=this.selectionManager.getLocationRange()}inputControllerDidReceiveDragOverPoint(e){return this.selectionManager.setLocationRangeFromPointRange(e)}inputControllerDidCancelDrag(){this.selectionManager.setLocationRange(this.locationRangeBeforeDrag),this.locationRangeBeforeDrag=null}locationRangeDidChange(e){return this.composition.updateCurrentAttributes(),this.updateCurrentActions(),this.attachmentLocationRange&&!Ni(this.attachmentLocationRange,e)&&this.composition.stopEditingAttachment(),this.notifyEditorElement("selection-change")}toolbarDidClickButton(){if(!this.getLocationRange())return this.setLocationRange({index:0,offset:0})}toolbarDidInvokeAction(e,t){return this.invokeAction(e,t)}toolbarDidToggleAttribute(e){if(this.recordFormattingUndoEntry(e),this.composition.toggleCurrentAttribute(e),this.render(),!this.selectionFrozen)return this.editorElement.focus()}toolbarDidUpdateAttribute(e,t){if(this.recordFormattingUndoEntry(e),this.composition.setCurrentAttribute(e,t),this.render(),!this.selectionFrozen)return this.editorElement.focus()}toolbarDidRemoveAttribute(e){if(this.recordFormattingUndoEntry(e),this.composition.removeCurrentAttribute(e),this.render(),!this.selectionFrozen)return this.editorElement.focus()}toolbarWillShowDialog(e){return this.composition.expandSelectionForEditing(),this.freezeSelection()}toolbarDidShowDialog(e){return this.notifyEditorElement("toolbar-dialog-show",{dialogName:e})}toolbarDidHideDialog(e){return this.thawSelection(),this.editorElement.focus(),this.notifyEditorElement("toolbar-dialog-hide",{dialogName:e})}freezeSelection(){if(!this.selectionFrozen)return this.selectionManager.lock(),this.composition.freezeSelection(),this.selectionFrozen=!0,this.render()}thawSelection(){if(this.selectionFrozen)return this.composition.thawSelection(),this.selectionManager.unlock(),this.selectionFrozen=!1,this.render()}canInvokeAction(e){return!!this.actionIsExternal(e)||!((t=this.actions[e])===null||t===void 0||(t=t.test)===null||t===void 0||!t.call(this));var t}invokeAction(e,t){return this.actionIsExternal(e)?this.notifyEditorElement("action-invoke",{actionName:e,invokingElement:t}):(n=this.actions[e])===null||n===void 0||(n=n.perform)===null||n===void 0?void 0:n.call(this);var n}actionIsExternal(e){return/^x-./.test(e)}getCurrentActions(){const e={};for(const t in this.actions)e[t]=this.canInvokeAction(t);return e}updateCurrentActions(){const e=this.getCurrentActions();if(!_n(e,this.currentActions))return this.currentActions=e,this.toolbarController.updateActions(this.currentActions),this.notifyEditorElement("actions-change",{actions:this.currentActions})}runEditorFilters(){let e=this.composition.getSnapshot();if(Array.from(this.editor.filters).forEach(r=>{const{document:o,selectedRange:a}=e;e=r.call(this.editor,e)||{},e.document||(e.document=o),e.selectedRange||(e.selectedRange=a)}),t=e,n=this.composition.getSnapshot(),!Ni(t.selectedRange,n.selectedRange)||!t.document.isEqualTo(n.document))return this.composition.loadSnapshot(e);var t,n}updateInputElement(){const e=function(t,n){const r=zu[n];if(r)return r(t);throw new Error("unknown content type: ".concat(n))}(this.compositionController.getSerializableElement(),"text/html");return this.editorElement.setFormValue(e)}notifyEditorElement(e,t){switch(e){case"document-change":this.documentChangedSinceLastRender=!0;break;case"render":this.documentChangedSinceLastRender&&(this.documentChangedSinceLastRender=!1,this.notifyEditorElement("change"));break;case"change":case"attachment-add":case"attachment-edit":case"attachment-remove":this.updateInputElement()}return this.editorElement.notify(e,t)}removeAttachment(e){return this.editor.recordUndoEntry("Delete Attachment"),this.composition.removeAttachment(e),this.render()}recordFormattingUndoEntry(e){const t=At(e),n=this.selectionManager.getLocationRange();if(t||!Oe(n))return this.editor.recordUndoEntry("Formatting",{context:this.getUndoContext(),consolidatable:!0})}recordTypingUndoEntry(){return this.editor.recordUndoEntry("Typing",{context:this.getUndoContext(this.currentAttributes),consolidatable:!0})}getUndoContext(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return[this.getLocationContext(),this.getTimeContext(),...Array.from(t)]}getLocationContext(){const e=this.selectionManager.getLocationRange();return Oe(e)?e[0].index:e}getTimeContext(){return qr.interval>0?Math.floor(new Date().getTime()/qr.interval):0}isFocused(){var e;return this.editorElement===((e=this.editorElement.ownerDocument)===null||e===void 0?void 0:e.activeElement)}isFocusedInvisibly(){return this.isFocused()&&!this.getLocationRange()}get actions(){return this.constructor.actions}}Kt(oi,"actions",{undo:{test(){return this.editor.canUndo()},perform(){return this.editor.undo()}},redo:{test(){return this.editor.canRedo()},perform(){return this.editor.redo()}},link:{test(){return this.editor.canActivateAttribute("href")}},increaseNestingLevel:{test(){return this.editor.canIncreaseNestingLevel()},perform(){return this.editor.increaseNestingLevel()&&this.render()}},decreaseNestingLevel:{test(){return this.editor.canDecreaseNestingLevel()},perform(){return this.editor.decreaseNestingLevel()&&this.render()}},attachFiles:{test:()=>!0,perform(){return mo.pickFiles(this.editor.insertFiles)}}}),oi.proxyMethod("getSelectionManager().setLocationRange"),oi.proxyMethod("getSelectionManager().getLocationRange");var mh=Object.freeze({__proto__:null,AttachmentEditorController:Da,CompositionController:Ra,Controller:La,EditorController:oi,InputController:Yi,Level0InputController:_e,Level2InputController:ri,ToolbarController:Ia}),bh=Object.freeze({__proto__:null,MutationObserver:Oa,SelectionChangeObserver:ia}),vh=Object.freeze({__proto__:null,FileVerificationOperation:Pa,ImagePreloadOperation:ma});Zs("trix-toolbar",`%t {
  display: block;
}

%t {
  white-space: nowrap;
}

%t [data-trix-dialog] {
  display: none;
}

%t [data-trix-dialog][data-trix-active] {
  display: block;
}

%t [data-trix-dialog] [data-trix-validate]:invalid {
  background-color: #ffdddd;
}`);class Fa extends HTMLElement{connectedCallback(){this.innerHTML===""&&(this.innerHTML=Qs.getDefaultHTML())}}let yh=0;const Ah=function(i){if(!i.hasAttribute("contenteditable"))return i.setAttribute("contenteditable",""),function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return t.times=1,bt(e,t)}("focus",{onElement:i,withCallback:()=>wh(i)})},wh=function(i){return Ch(i),xh()},Ch=function(i){var e,t;if((e=(t=document).queryCommandSupported)!==null&&e!==void 0&&e.call(t,"enableObjectResizing"))return document.execCommand("enableObjectResizing",!1,!1),bt("mscontrolselect",{onElement:i,preventDefault:!0})},xh=function(i){var e,t;if((e=(t=document).queryCommandSupported)!==null&&e!==void 0&&e.call(t,"DefaultParagraphSeparator")){const{tagName:n}=Ht.default;if(["div","p"].includes(n))return document.execCommand("DefaultParagraphSeparator",!1,n)}},Ds=fi.forcesObjectResizing?{display:"inline",width:"auto"}:{display:"inline-block",width:"1px"};Zs("trix-editor",`%t {
    display: block;
}

%t:empty::before {
    content: attr(placeholder);
    color: graytext;
    cursor: text;
    pointer-events: none;
    white-space: pre-line;
}

%t a[contenteditable=false] {
    cursor: text;
}

%t img {
    max-width: 100%;
    height: auto;
}

%t `.concat(un,` figcaption textarea {
    resize: none;
}

%t `).concat(un,` figcaption textarea.trix-autoresize-clone {
    position: absolute;
    left: -9999px;
    max-height: 0px;
}

%t `).concat(un,` figcaption[data-trix-placeholder]:empty::before {
    content: attr(data-trix-placeholder);
    color: graytext;
}

%t [data-trix-cursor-target] {
    display: `).concat(Ds.display,` !important;
    width: `).concat(Ds.width,` !important;
    padding: 0 !important;
    margin: 0 !important;
    border: none !important;
}

%t [data-trix-cursor-target=left] {
    vertical-align: top !important;
    margin-left: -1px !important;
}

%t [data-trix-cursor-target=right] {
    vertical-align: bottom !important;
    margin-right: -1px !important;
}`));var Le=new WeakMap,Xn=new WeakSet;class Sh{constructor(e){var t,n;ga(t=this,n=Xn),n.add(t),ii(this,Le,{writable:!0,value:void 0}),this.element=e,xo(this,Le,e.attachInternals())}connectedCallback(){ki(this,Xn,Ei).call(this)}disconnectedCallback(){}get labels(){return dt(this,Le).labels}get disabled(){var e;return(e=this.element.inputElement)===null||e===void 0?void 0:e.disabled}set disabled(e){this.element.toggleAttribute("disabled",e)}get required(){return this.element.hasAttribute("required")}set required(e){this.element.toggleAttribute("required",e),ki(this,Xn,Ei).call(this)}get validity(){return dt(this,Le).validity}get validationMessage(){return dt(this,Le).validationMessage}get willValidate(){return dt(this,Le).willValidate}setFormValue(e){ki(this,Xn,Ei).call(this)}checkValidity(){return dt(this,Le).checkValidity()}reportValidity(){return dt(this,Le).reportValidity()}setCustomValidity(e){ki(this,Xn,Ei).call(this,e)}}function Ei(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";const{required:e,value:t}=this.element,n=e&&!t,r=!!i,o=Z("input",{required:e}),a=i||o.validationMessage;dt(this,Le).setValidity({valueMissing:n,customError:r},a)}var Lr=new WeakMap,_r=new WeakMap,Or=new WeakMap;class kh{constructor(e){ii(this,Lr,{writable:!0,value:void 0}),ii(this,_r,{writable:!0,value:t=>{t.defaultPrevented||t.target===this.element.form&&this.element.reset()}}),ii(this,Or,{writable:!0,value:t=>{if(t.defaultPrevented||this.element.contains(t.target))return;const n=Ve(t.target,{matchingSelector:"label"});n&&Array.from(this.labels).includes(n)&&this.element.focus()}}),this.element=e}connectedCallback(){xo(this,Lr,function(e){if(e.hasAttribute("aria-label")||e.hasAttribute("aria-labelledby"))return;const t=function(){const n=Array.from(e.labels).map(o=>{if(!o.contains(e))return o.textContent}).filter(o=>o),r=n.join(" ");return r?e.setAttribute("aria-label",r):e.removeAttribute("aria-label")};return t(),bt("focus",{onElement:e,withCallback:t})}(this.element)),window.addEventListener("reset",dt(this,_r),!1),window.addEventListener("click",dt(this,Or),!1)}disconnectedCallback(){var e;(e=dt(this,Lr))===null||e===void 0||e.destroy(),window.removeEventListener("reset",dt(this,_r),!1),window.removeEventListener("click",dt(this,Or),!1)}get labels(){const e=[];this.element.id&&this.element.ownerDocument&&e.push(...Array.from(this.element.ownerDocument.querySelectorAll("label[for='".concat(this.element.id,"']"))||[]));const t=Ve(this.element,{matchingSelector:"label"});return t&&[this.element,null].includes(t.control)&&e.push(t),e}get disabled(){return console.warn("This browser does not support the [disabled] attribute for trix-editor elements."),!1}set disabled(e){console.warn("This browser does not support the [disabled] attribute for trix-editor elements.")}get required(){return console.warn("This browser does not support the [required] attribute for trix-editor elements."),!1}set required(e){console.warn("This browser does not support the [required] attribute for trix-editor elements.")}get validity(){return console.warn("This browser does not support the validity property for trix-editor elements."),null}get validationMessage(){return console.warn("This browser does not support the validationMessage property for trix-editor elements."),""}get willValidate(){return console.warn("This browser does not support the willValidate property for trix-editor elements."),!1}setFormValue(e){}checkValidity(){return console.warn("This browser does not support checkValidity() for trix-editor elements."),!0}reportValidity(){return console.warn("This browser does not support reportValidity() for trix-editor elements."),!0}setCustomValidity(e){console.warn("This browser does not support setCustomValidity(validationMessage) for trix-editor elements.")}}var Pt=new WeakMap;let ko=class extends HTMLElement{constructor(){super(),ii(this,Pt,{writable:!0,value:void 0}),xo(this,Pt,this.constructor.formAssociated?new Sh(this):new kh(this))}get trixId(){return this.hasAttribute("trix-id")?this.getAttribute("trix-id"):(this.setAttribute("trix-id",++yh),this.trixId)}get labels(){return dt(this,Pt).labels}get disabled(){return dt(this,Pt).disabled}set disabled(e){dt(this,Pt).disabled=e}get required(){return dt(this,Pt).required}set required(e){dt(this,Pt).required=e}get validity(){return dt(this,Pt).validity}get validationMessage(){return dt(this,Pt).validationMessage}get willValidate(){return dt(this,Pt).willValidate}get type(){return this.localName}get toolbarElement(){var e;if(this.hasAttribute("toolbar"))return(e=this.ownerDocument)===null||e===void 0?void 0:e.getElementById(this.getAttribute("toolbar"));if(this.parentNode){const t="trix-toolbar-".concat(this.trixId);this.setAttribute("toolbar",t);const n=Z("trix-toolbar",{id:t});return this.parentNode.insertBefore(n,this),n}}get form(){var e;return(e=this.inputElement)===null||e===void 0?void 0:e.form}get inputElement(){var e;if(this.hasAttribute("input"))return(e=this.ownerDocument)===null||e===void 0?void 0:e.getElementById(this.getAttribute("input"));if(this.parentNode){const t="trix-input-".concat(this.trixId);this.setAttribute("input",t);const n=Z("input",{type:"hidden",id:t});return this.parentNode.insertBefore(n,this.nextElementSibling),n}}get editor(){var e;return(e=this.editorController)===null||e===void 0?void 0:e.editor}get name(){var e;return(e=this.inputElement)===null||e===void 0?void 0:e.name}get value(){var e;return(e=this.inputElement)===null||e===void 0?void 0:e.value}set value(e){var t;this.defaultValue=e,(t=this.editor)===null||t===void 0||t.loadHTML(this.defaultValue)}notify(e,t){if(this.editorController)return Zn("trix-".concat(e),{onElement:this,attributes:t})}setFormValue(e){this.inputElement&&(this.inputElement.value=e,dt(this,Pt).setFormValue(e))}connectedCallback(){this.hasAttribute("data-trix-internal")||(Ah(this),function(e){e.hasAttribute("role")||e.setAttribute("role","textbox")}(this),this.editorController||(Zn("trix-before-initialize",{onElement:this}),this.editorController=new oi({editorElement:this,html:this.defaultValue=this.value}),requestAnimationFrame(()=>Zn("trix-initialize",{onElement:this}))),this.editorController.registerSelectionManager(),dt(this,Pt).connectedCallback(),function(e){!document.querySelector(":focus")&&e.hasAttribute("autofocus")&&document.querySelector("[autofocus]")===e&&e.focus()}(this))}disconnectedCallback(){var e;(e=this.editorController)===null||e===void 0||e.unregisterSelectionManager(),dt(this,Pt).disconnectedCallback()}checkValidity(){return dt(this,Pt).checkValidity()}reportValidity(){return dt(this,Pt).reportValidity()}setCustomValidity(e){dt(this,Pt).setCustomValidity(e)}formDisabledCallback(e){this.inputElement&&(this.inputElement.disabled=e),this.toggleAttribute("contenteditable",!e)}formResetCallback(){this.reset()}reset(){this.value=this.defaultValue}};Kt(ko,"formAssociated","ElementInternals"in window);const eo={VERSION:Dl,config:pi,core:Vu,models:Ta,views:Xu,controllers:mh,observers:bh,operations:vh,elements:Object.freeze({__proto__:null,TrixEditorElement:ko,TrixToolbarElement:Fa}),filters:Object.freeze({__proto__:null,Filter:wa,attachmentGalleryFilter:Ca})};Object.assign(eo,Ta),window.Trix=eo,setTimeout(function(){customElements.get("trix-toolbar")||customElements.define("trix-toolbar",Fa),customElements.get("trix-editor")||customElements.define("trix-editor",ko)},0);window.Trix=eo;function Ba(i,e){return function(){return i.apply(e,arguments)}}const{toString:Eh}=Object.prototype,{getPrototypeOf:Eo}=Object,$i=(i=>e=>{const t=Eh.call(e);return i[t]||(i[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),Ae=i=>(i=i.toLowerCase(),e=>$i(e)===i),Xi=i=>e=>typeof e===i,{isArray:Pn}=Array,ui=Xi("undefined");function Th(i){return i!==null&&!ui(i)&&i.constructor!==null&&!ui(i.constructor)&&se(i.constructor.isBuffer)&&i.constructor.isBuffer(i)}const ja=Ae("ArrayBuffer");function Dh(i){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(i):e=i&&i.buffer&&ja(i.buffer),e}const Rh=Xi("string"),se=Xi("function"),Ua=Xi("number"),Gi=i=>i!==null&&typeof i=="object",Lh=i=>i===!0||i===!1,Oi=i=>{if($i(i)!=="object")return!1;const e=Eo(i);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in i)&&!(Symbol.iterator in i)},_h=Ae("Date"),Oh=Ae("File"),Ph=Ae("Blob"),Mh=Ae("FileList"),Nh=i=>Gi(i)&&se(i.pipe),Ih=i=>{let e;return i&&(typeof FormData=="function"&&i instanceof FormData||se(i.append)&&((e=$i(i))==="formdata"||e==="object"&&se(i.toString)&&i.toString()==="[object FormData]"))},Fh=Ae("URLSearchParams"),[Bh,jh,Uh,Hh]=["ReadableStream","Request","Response","Headers"].map(Ae),qh=i=>i.trim?i.trim():i.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function gi(i,e,{allOwnKeys:t=!1}={}){if(i===null||typeof i>"u")return;let n,r;if(typeof i!="object"&&(i=[i]),Pn(i))for(n=0,r=i.length;n<r;n++)e.call(null,i[n],n,i);else{const o=t?Object.getOwnPropertyNames(i):Object.keys(i),a=o.length;let u;for(n=0;n<a;n++)u=o[n],e.call(null,i[u],u,i)}}function Ha(i,e){e=e.toLowerCase();const t=Object.keys(i);let n=t.length,r;for(;n-- >0;)if(r=t[n],e===r.toLowerCase())return r;return null}const ln=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,qa=i=>!ui(i)&&i!==ln;function no(){const{caseless:i}=qa(this)&&this||{},e={},t=(n,r)=>{const o=i&&Ha(e,r)||r;Oi(e[o])&&Oi(n)?e[o]=no(e[o],n):Oi(n)?e[o]=no({},n):Pn(n)?e[o]=n.slice():e[o]=n};for(let n=0,r=arguments.length;n<r;n++)arguments[n]&&gi(arguments[n],t);return e}const Wh=(i,e,t,{allOwnKeys:n}={})=>(gi(e,(r,o)=>{t&&se(r)?i[o]=Ba(r,t):i[o]=r},{allOwnKeys:n}),i),zh=i=>(i.charCodeAt(0)===65279&&(i=i.slice(1)),i),Vh=(i,e,t,n)=>{i.prototype=Object.create(e.prototype,n),i.prototype.constructor=i,Object.defineProperty(i,"super",{value:e.prototype}),t&&Object.assign(i.prototype,t)},Jh=(i,e,t,n)=>{let r,o,a;const u={};if(e=e||{},i==null)return e;do{for(r=Object.getOwnPropertyNames(i),o=r.length;o-- >0;)a=r[o],(!n||n(a,i,e))&&!u[a]&&(e[a]=i[a],u[a]=!0);i=t!==!1&&Eo(i)}while(i&&(!t||t(i,e))&&i!==Object.prototype);return e},Yh=(i,e,t)=>{i=String(i),(t===void 0||t>i.length)&&(t=i.length),t-=e.length;const n=i.indexOf(e,t);return n!==-1&&n===t},Kh=i=>{if(!i)return null;if(Pn(i))return i;let e=i.length;if(!Ua(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=i[e];return t},$h=(i=>e=>i&&e instanceof i)(typeof Uint8Array<"u"&&Eo(Uint8Array)),Xh=(i,e)=>{const n=(i&&i[Symbol.iterator]).call(i);let r;for(;(r=n.next())&&!r.done;){const o=r.value;e.call(i,o[0],o[1])}},Gh=(i,e)=>{let t;const n=[];for(;(t=i.exec(e))!==null;)n.push(t);return n},Qh=Ae("HTMLFormElement"),Zh=i=>i.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,n,r){return n.toUpperCase()+r}),Rs=(({hasOwnProperty:i})=>(e,t)=>i.call(e,t))(Object.prototype),td=Ae("RegExp"),Wa=(i,e)=>{const t=Object.getOwnPropertyDescriptors(i),n={};gi(t,(r,o)=>{let a;(a=e(r,o,i))!==!1&&(n[o]=a||r)}),Object.defineProperties(i,n)},ed=i=>{Wa(i,(e,t)=>{if(se(i)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const n=i[t];if(se(n)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},nd=(i,e)=>{const t={},n=r=>{r.forEach(o=>{t[o]=!0})};return Pn(i)?n(i):n(String(i).split(e)),t},id=()=>{},rd=(i,e)=>i!=null&&Number.isFinite(i=+i)?i:e,Pr="abcdefghijklmnopqrstuvwxyz",Ls="0123456789",za={DIGIT:Ls,ALPHA:Pr,ALPHA_DIGIT:Pr+Pr.toUpperCase()+Ls},od=(i=16,e=za.ALPHA_DIGIT)=>{let t="";const{length:n}=e;for(;i--;)t+=e[Math.random()*n|0];return t};function sd(i){return!!(i&&se(i.append)&&i[Symbol.toStringTag]==="FormData"&&i[Symbol.iterator])}const ad=i=>{const e=new Array(10),t=(n,r)=>{if(Gi(n)){if(e.indexOf(n)>=0)return;if(!("toJSON"in n)){e[r]=n;const o=Pn(n)?[]:{};return gi(n,(a,u)=>{const p=t(a,r+1);!ui(p)&&(o[u]=p)}),e[r]=void 0,o}}return n};return t(i,0)},cd=Ae("AsyncFunction"),ld=i=>i&&(Gi(i)||se(i))&&se(i.then)&&se(i.catch),Va=((i,e)=>i?setImmediate:e?((t,n)=>(ln.addEventListener("message",({source:r,data:o})=>{r===ln&&o===t&&n.length&&n.shift()()},!1),r=>{n.push(r),ln.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",se(ln.postMessage)),ud=typeof queueMicrotask<"u"?queueMicrotask.bind(ln):typeof process<"u"&&process.nextTick||Va,x={isArray:Pn,isArrayBuffer:ja,isBuffer:Th,isFormData:Ih,isArrayBufferView:Dh,isString:Rh,isNumber:Ua,isBoolean:Lh,isObject:Gi,isPlainObject:Oi,isReadableStream:Bh,isRequest:jh,isResponse:Uh,isHeaders:Hh,isUndefined:ui,isDate:_h,isFile:Oh,isBlob:Ph,isRegExp:td,isFunction:se,isStream:Nh,isURLSearchParams:Fh,isTypedArray:$h,isFileList:Mh,forEach:gi,merge:no,extend:Wh,trim:qh,stripBOM:zh,inherits:Vh,toFlatObject:Jh,kindOf:$i,kindOfTest:Ae,endsWith:Yh,toArray:Kh,forEachEntry:Xh,matchAll:Gh,isHTMLForm:Qh,hasOwnProperty:Rs,hasOwnProp:Rs,reduceDescriptors:Wa,freezeMethods:ed,toObjectSet:nd,toCamelCase:Zh,noop:id,toFiniteNumber:rd,findKey:Ha,global:ln,isContextDefined:qa,ALPHABET:za,generateString:od,isSpecCompliantForm:sd,toJSONObject:ad,isAsyncFn:cd,isThenable:ld,setImmediate:Va,asap:ud};function K(i,e,t,n,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=i,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),n&&(this.request=n),r&&(this.response=r,this.status=r.status?r.status:null)}x.inherits(K,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:x.toJSONObject(this.config),code:this.code,status:this.status}}});const Ja=K.prototype,Ya={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(i=>{Ya[i]={value:i}});Object.defineProperties(K,Ya);Object.defineProperty(Ja,"isAxiosError",{value:!0});K.from=(i,e,t,n,r,o)=>{const a=Object.create(Ja);return x.toFlatObject(i,a,function(p){return p!==Error.prototype},u=>u!=="isAxiosError"),K.call(a,i.message,e,t,n,r),a.cause=i,a.name=i.name,o&&Object.assign(a,o),a};const hd=null;function ro(i){return x.isPlainObject(i)||x.isArray(i)}function Ka(i){return x.endsWith(i,"[]")?i.slice(0,-2):i}function _s(i,e,t){return i?i.concat(e).map(function(r,o){return r=Ka(r),!t&&o?"["+r+"]":r}).join(t?".":""):e}function dd(i){return x.isArray(i)&&!i.some(ro)}const fd=x.toFlatObject(x,{},null,function(e){return/^is[A-Z]/.test(e)});function Qi(i,e,t){if(!x.isObject(i))throw new TypeError("target must be an object");e=e||new FormData,t=x.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(C,A){return!x.isUndefined(A[C])});const n=t.metaTokens,r=t.visitor||y,o=t.dots,a=t.indexes,p=(t.Blob||typeof Blob<"u"&&Blob)&&x.isSpecCompliantForm(e);if(!x.isFunction(r))throw new TypeError("visitor must be a function");function v(E){if(E===null)return"";if(x.isDate(E))return E.toISOString();if(!p&&x.isBlob(E))throw new K("Blob is not supported. Use a Buffer instead.");return x.isArrayBuffer(E)||x.isTypedArray(E)?p&&typeof Blob=="function"?new Blob([E]):Buffer.from(E):E}function y(E,C,A){let T=E;if(E&&!A&&typeof E=="object"){if(x.endsWith(C,"{}"))C=n?C:C.slice(0,-2),E=JSON.stringify(E);else if(x.isArray(E)&&dd(E)||(x.isFileList(E)||x.endsWith(C,"[]"))&&(T=x.toArray(E)))return C=Ka(C),T.forEach(function(U,q){!(x.isUndefined(U)||U===null)&&e.append(a===!0?_s([C],q,o):a===null?C:C+"[]",v(U))}),!1}return ro(E)?!0:(e.append(_s(A,C,o),v(E)),!1)}const k=[],D=Object.assign(fd,{defaultVisitor:y,convertValue:v,isVisitable:ro});function _(E,C){if(!x.isUndefined(E)){if(k.indexOf(E)!==-1)throw Error("Circular reference detected in "+C.join("."));k.push(E),x.forEach(E,function(T,P){(!(x.isUndefined(T)||T===null)&&r.call(e,T,x.isString(P)?P.trim():P,C,D))===!0&&_(T,C?C.concat(P):[P])}),k.pop()}}if(!x.isObject(i))throw new TypeError("data must be an object");return _(i),e}function Os(i){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(i).replace(/[!'()~]|%20|%00/g,function(n){return e[n]})}function To(i,e){this._pairs=[],i&&Qi(i,this,e)}const $a=To.prototype;$a.append=function(e,t){this._pairs.push([e,t])};$a.toString=function(e){const t=e?function(n){return e.call(this,n,Os)}:Os;return this._pairs.map(function(r){return t(r[0])+"="+t(r[1])},"").join("&")};function pd(i){return encodeURIComponent(i).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Xa(i,e,t){if(!e)return i;const n=t&&t.encode||pd,r=t&&t.serialize;let o;if(r?o=r(e,t):o=x.isURLSearchParams(e)?e.toString():new To(e,t).toString(n),o){const a=i.indexOf("#");a!==-1&&(i=i.slice(0,a)),i+=(i.indexOf("?")===-1?"?":"&")+o}return i}class Ps{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){x.forEach(this.handlers,function(n){n!==null&&e(n)})}}const Ga={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},gd=typeof URLSearchParams<"u"?URLSearchParams:To,md=typeof FormData<"u"?FormData:null,bd=typeof Blob<"u"?Blob:null,vd={isBrowser:!0,classes:{URLSearchParams:gd,FormData:md,Blob:bd},protocols:["http","https","file","blob","url","data"]},Do=typeof window<"u"&&typeof document<"u",oo=typeof navigator=="object"&&navigator||void 0,yd=Do&&(!oo||["ReactNative","NativeScript","NS"].indexOf(oo.product)<0),Ad=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",wd=Do&&window.location.href||"http://localhost",Cd=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Do,hasStandardBrowserEnv:yd,hasStandardBrowserWebWorkerEnv:Ad,navigator:oo,origin:wd},Symbol.toStringTag,{value:"Module"})),$t={...Cd,...vd};function xd(i,e){return Qi(i,new $t.classes.URLSearchParams,Object.assign({visitor:function(t,n,r,o){return $t.isNode&&x.isBuffer(t)?(this.append(n,t.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)}},e))}function Sd(i){return x.matchAll(/\w+|\[(\w*)]/g,i).map(e=>e[0]==="[]"?"":e[1]||e[0])}function kd(i){const e={},t=Object.keys(i);let n;const r=t.length;let o;for(n=0;n<r;n++)o=t[n],e[o]=i[o];return e}function Qa(i){function e(t,n,r,o){let a=t[o++];if(a==="__proto__")return!0;const u=Number.isFinite(+a),p=o>=t.length;return a=!a&&x.isArray(r)?r.length:a,p?(x.hasOwnProp(r,a)?r[a]=[r[a],n]:r[a]=n,!u):((!r[a]||!x.isObject(r[a]))&&(r[a]=[]),e(t,n,r[a],o)&&x.isArray(r[a])&&(r[a]=kd(r[a])),!u)}if(x.isFormData(i)&&x.isFunction(i.entries)){const t={};return x.forEachEntry(i,(n,r)=>{e(Sd(n),r,t,0)}),t}return null}function Ed(i,e,t){if(x.isString(i))try{return(e||JSON.parse)(i),x.trim(i)}catch(n){if(n.name!=="SyntaxError")throw n}return(t||JSON.stringify)(i)}const mi={transitional:Ga,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const n=t.getContentType()||"",r=n.indexOf("application/json")>-1,o=x.isObject(e);if(o&&x.isHTMLForm(e)&&(e=new FormData(e)),x.isFormData(e))return r?JSON.stringify(Qa(e)):e;if(x.isArrayBuffer(e)||x.isBuffer(e)||x.isStream(e)||x.isFile(e)||x.isBlob(e)||x.isReadableStream(e))return e;if(x.isArrayBufferView(e))return e.buffer;if(x.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let u;if(o){if(n.indexOf("application/x-www-form-urlencoded")>-1)return xd(e,this.formSerializer).toString();if((u=x.isFileList(e))||n.indexOf("multipart/form-data")>-1){const p=this.env&&this.env.FormData;return Qi(u?{"files[]":e}:e,p&&new p,this.formSerializer)}}return o||r?(t.setContentType("application/json",!1),Ed(e)):e}],transformResponse:[function(e){const t=this.transitional||mi.transitional,n=t&&t.forcedJSONParsing,r=this.responseType==="json";if(x.isResponse(e)||x.isReadableStream(e))return e;if(e&&x.isString(e)&&(n&&!this.responseType||r)){const a=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(u){if(a)throw u.name==="SyntaxError"?K.from(u,K.ERR_BAD_RESPONSE,this,null,this.response):u}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:$t.classes.FormData,Blob:$t.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};x.forEach(["delete","get","head","post","put","patch"],i=>{mi.headers[i]={}});const Td=x.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Dd=i=>{const e={};let t,n,r;return i&&i.split(`
`).forEach(function(a){r=a.indexOf(":"),t=a.substring(0,r).trim().toLowerCase(),n=a.substring(r+1).trim(),!(!t||e[t]&&Td[t])&&(t==="set-cookie"?e[t]?e[t].push(n):e[t]=[n]:e[t]=e[t]?e[t]+", "+n:n)}),e},Ms=Symbol("internals");function Gn(i){return i&&String(i).trim().toLowerCase()}function Pi(i){return i===!1||i==null?i:x.isArray(i)?i.map(Pi):String(i)}function Rd(i){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=t.exec(i);)e[n[1]]=n[2];return e}const Ld=i=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(i.trim());function Mr(i,e,t,n,r){if(x.isFunction(n))return n.call(this,e,t);if(r&&(e=t),!!x.isString(e)){if(x.isString(n))return e.indexOf(n)!==-1;if(x.isRegExp(n))return n.test(e)}}function _d(i){return i.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,n)=>t.toUpperCase()+n)}function Od(i,e){const t=x.toCamelCase(" "+e);["get","set","has"].forEach(n=>{Object.defineProperty(i,n+t,{value:function(r,o,a){return this[n].call(this,e,r,o,a)},configurable:!0})})}class Xt{constructor(e){e&&this.set(e)}set(e,t,n){const r=this;function o(u,p,v){const y=Gn(p);if(!y)throw new Error("header name must be a non-empty string");const k=x.findKey(r,y);(!k||r[k]===void 0||v===!0||v===void 0&&r[k]!==!1)&&(r[k||p]=Pi(u))}const a=(u,p)=>x.forEach(u,(v,y)=>o(v,y,p));if(x.isPlainObject(e)||e instanceof this.constructor)a(e,t);else if(x.isString(e)&&(e=e.trim())&&!Ld(e))a(Dd(e),t);else if(x.isHeaders(e))for(const[u,p]of e.entries())o(p,u,n);else e!=null&&o(t,e,n);return this}get(e,t){if(e=Gn(e),e){const n=x.findKey(this,e);if(n){const r=this[n];if(!t)return r;if(t===!0)return Rd(r);if(x.isFunction(t))return t.call(this,r,n);if(x.isRegExp(t))return t.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Gn(e),e){const n=x.findKey(this,e);return!!(n&&this[n]!==void 0&&(!t||Mr(this,this[n],n,t)))}return!1}delete(e,t){const n=this;let r=!1;function o(a){if(a=Gn(a),a){const u=x.findKey(n,a);u&&(!t||Mr(n,n[u],u,t))&&(delete n[u],r=!0)}}return x.isArray(e)?e.forEach(o):o(e),r}clear(e){const t=Object.keys(this);let n=t.length,r=!1;for(;n--;){const o=t[n];(!e||Mr(this,this[o],o,e,!0))&&(delete this[o],r=!0)}return r}normalize(e){const t=this,n={};return x.forEach(this,(r,o)=>{const a=x.findKey(n,o);if(a){t[a]=Pi(r),delete t[o];return}const u=e?_d(o):String(o).trim();u!==o&&delete t[o],t[u]=Pi(r),n[u]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return x.forEach(this,(n,r)=>{n!=null&&n!==!1&&(t[r]=e&&x.isArray(n)?n.join(", "):n)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const n=new this(e);return t.forEach(r=>n.set(r)),n}static accessor(e){const n=(this[Ms]=this[Ms]={accessors:{}}).accessors,r=this.prototype;function o(a){const u=Gn(a);n[u]||(Od(r,a),n[u]=!0)}return x.isArray(e)?e.forEach(o):o(e),this}}Xt.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);x.reduceDescriptors(Xt.prototype,({value:i},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>i,set(n){this[t]=n}}});x.freezeMethods(Xt);function Nr(i,e){const t=this||mi,n=e||t,r=Xt.from(n.headers);let o=n.data;return x.forEach(i,function(u){o=u.call(t,o,r.normalize(),e?e.status:void 0)}),r.normalize(),o}function Za(i){return!!(i&&i.__CANCEL__)}function Mn(i,e,t){K.call(this,i??"canceled",K.ERR_CANCELED,e,t),this.name="CanceledError"}x.inherits(Mn,K,{__CANCEL__:!0});function tc(i,e,t){const n=t.config.validateStatus;!t.status||!n||n(t.status)?i(t):e(new K("Request failed with status code "+t.status,[K.ERR_BAD_REQUEST,K.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function Pd(i){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(i);return e&&e[1]||""}function Md(i,e){i=i||10;const t=new Array(i),n=new Array(i);let r=0,o=0,a;return e=e!==void 0?e:1e3,function(p){const v=Date.now(),y=n[o];a||(a=v),t[r]=p,n[r]=v;let k=o,D=0;for(;k!==r;)D+=t[k++],k=k%i;if(r=(r+1)%i,r===o&&(o=(o+1)%i),v-a<e)return;const _=y&&v-y;return _?Math.round(D*1e3/_):void 0}}function Nd(i,e){let t=0,n=1e3/e,r,o;const a=(v,y=Date.now())=>{t=y,r=null,o&&(clearTimeout(o),o=null),i.apply(null,v)};return[(...v)=>{const y=Date.now(),k=y-t;k>=n?a(v,y):(r=v,o||(o=setTimeout(()=>{o=null,a(r)},n-k)))},()=>r&&a(r)]}const ji=(i,e,t=3)=>{let n=0;const r=Md(50,250);return Nd(o=>{const a=o.loaded,u=o.lengthComputable?o.total:void 0,p=a-n,v=r(p),y=a<=u;n=a;const k={loaded:a,total:u,progress:u?a/u:void 0,bytes:p,rate:v||void 0,estimated:v&&u&&y?(u-a)/v:void 0,event:o,lengthComputable:u!=null,[e?"download":"upload"]:!0};i(k)},t)},Ns=(i,e)=>{const t=i!=null;return[n=>e[0]({lengthComputable:t,total:i,loaded:n}),e[1]]},Is=i=>(...e)=>x.asap(()=>i(...e)),Id=$t.hasStandardBrowserEnv?function(){const e=$t.navigator&&/(msie|trident)/i.test($t.navigator.userAgent),t=document.createElement("a");let n;function r(o){let a=o;return e&&(t.setAttribute("href",a),a=t.href),t.setAttribute("href",a),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:t.pathname.charAt(0)==="/"?t.pathname:"/"+t.pathname}}return n=r(window.location.href),function(a){const u=x.isString(a)?r(a):a;return u.protocol===n.protocol&&u.host===n.host}}():function(){return function(){return!0}}(),Fd=$t.hasStandardBrowserEnv?{write(i,e,t,n,r,o){const a=[i+"="+encodeURIComponent(e)];x.isNumber(t)&&a.push("expires="+new Date(t).toGMTString()),x.isString(n)&&a.push("path="+n),x.isString(r)&&a.push("domain="+r),o===!0&&a.push("secure"),document.cookie=a.join("; ")},read(i){const e=document.cookie.match(new RegExp("(^|;\\s*)("+i+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(i){this.write(i,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Bd(i){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(i)}function jd(i,e){return e?i.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):i}function ec(i,e){return i&&!Bd(e)?jd(i,e):e}const Fs=i=>i instanceof Xt?{...i}:i;function mn(i,e){e=e||{};const t={};function n(v,y,k){return x.isPlainObject(v)&&x.isPlainObject(y)?x.merge.call({caseless:k},v,y):x.isPlainObject(y)?x.merge({},y):x.isArray(y)?y.slice():y}function r(v,y,k){if(x.isUndefined(y)){if(!x.isUndefined(v))return n(void 0,v,k)}else return n(v,y,k)}function o(v,y){if(!x.isUndefined(y))return n(void 0,y)}function a(v,y){if(x.isUndefined(y)){if(!x.isUndefined(v))return n(void 0,v)}else return n(void 0,y)}function u(v,y,k){if(k in e)return n(v,y);if(k in i)return n(void 0,v)}const p={url:o,method:o,data:o,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:u,headers:(v,y)=>r(Fs(v),Fs(y),!0)};return x.forEach(Object.keys(Object.assign({},i,e)),function(y){const k=p[y]||r,D=k(i[y],e[y],y);x.isUndefined(D)&&k!==u||(t[y]=D)}),t}const nc=i=>{const e=mn({},i);let{data:t,withXSRFToken:n,xsrfHeaderName:r,xsrfCookieName:o,headers:a,auth:u}=e;e.headers=a=Xt.from(a),e.url=Xa(ec(e.baseURL,e.url),i.params,i.paramsSerializer),u&&a.set("Authorization","Basic "+btoa((u.username||"")+":"+(u.password?unescape(encodeURIComponent(u.password)):"")));let p;if(x.isFormData(t)){if($t.hasStandardBrowserEnv||$t.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if((p=a.getContentType())!==!1){const[v,...y]=p?p.split(";").map(k=>k.trim()).filter(Boolean):[];a.setContentType([v||"multipart/form-data",...y].join("; "))}}if($t.hasStandardBrowserEnv&&(n&&x.isFunction(n)&&(n=n(e)),n||n!==!1&&Id(e.url))){const v=r&&o&&Fd.read(o);v&&a.set(r,v)}return e},Ud=typeof XMLHttpRequest<"u",Hd=Ud&&function(i){return new Promise(function(t,n){const r=nc(i);let o=r.data;const a=Xt.from(r.headers).normalize();let{responseType:u,onUploadProgress:p,onDownloadProgress:v}=r,y,k,D,_,E;function C(){_&&_(),E&&E(),r.cancelToken&&r.cancelToken.unsubscribe(y),r.signal&&r.signal.removeEventListener("abort",y)}let A=new XMLHttpRequest;A.open(r.method.toUpperCase(),r.url,!0),A.timeout=r.timeout;function T(){if(!A)return;const U=Xt.from("getAllResponseHeaders"in A&&A.getAllResponseHeaders()),j={data:!u||u==="text"||u==="json"?A.responseText:A.response,status:A.status,statusText:A.statusText,headers:U,config:i,request:A};tc(function(rt){t(rt),C()},function(rt){n(rt),C()},j),A=null}"onloadend"in A?A.onloadend=T:A.onreadystatechange=function(){!A||A.readyState!==4||A.status===0&&!(A.responseURL&&A.responseURL.indexOf("file:")===0)||setTimeout(T)},A.onabort=function(){A&&(n(new K("Request aborted",K.ECONNABORTED,i,A)),A=null)},A.onerror=function(){n(new K("Network Error",K.ERR_NETWORK,i,A)),A=null},A.ontimeout=function(){let q=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const j=r.transitional||Ga;r.timeoutErrorMessage&&(q=r.timeoutErrorMessage),n(new K(q,j.clarifyTimeoutError?K.ETIMEDOUT:K.ECONNABORTED,i,A)),A=null},o===void 0&&a.setContentType(null),"setRequestHeader"in A&&x.forEach(a.toJSON(),function(q,j){A.setRequestHeader(j,q)}),x.isUndefined(r.withCredentials)||(A.withCredentials=!!r.withCredentials),u&&u!=="json"&&(A.responseType=r.responseType),v&&([D,E]=ji(v,!0),A.addEventListener("progress",D)),p&&A.upload&&([k,_]=ji(p),A.upload.addEventListener("progress",k),A.upload.addEventListener("loadend",_)),(r.cancelToken||r.signal)&&(y=U=>{A&&(n(!U||U.type?new Mn(null,i,A):U),A.abort(),A=null)},r.cancelToken&&r.cancelToken.subscribe(y),r.signal&&(r.signal.aborted?y():r.signal.addEventListener("abort",y)));const P=Pd(r.url);if(P&&$t.protocols.indexOf(P)===-1){n(new K("Unsupported protocol "+P+":",K.ERR_BAD_REQUEST,i));return}A.send(o||null)})},qd=(i,e)=>{const{length:t}=i=i?i.filter(Boolean):[];if(e||t){let n=new AbortController,r;const o=function(v){if(!r){r=!0,u();const y=v instanceof Error?v:this.reason;n.abort(y instanceof K?y:new Mn(y instanceof Error?y.message:y))}};let a=e&&setTimeout(()=>{a=null,o(new K(`timeout ${e} of ms exceeded`,K.ETIMEDOUT))},e);const u=()=>{i&&(a&&clearTimeout(a),a=null,i.forEach(v=>{v.unsubscribe?v.unsubscribe(o):v.removeEventListener("abort",o)}),i=null)};i.forEach(v=>v.addEventListener("abort",o));const{signal:p}=n;return p.unsubscribe=()=>x.asap(u),p}},Wd=function*(i,e){let t=i.byteLength;if(!e||t<e){yield i;return}let n=0,r;for(;n<t;)r=n+e,yield i.slice(n,r),n=r},zd=async function*(i,e){for await(const t of Vd(i))yield*Wd(t,e)},Vd=async function*(i){if(i[Symbol.asyncIterator]){yield*i;return}const e=i.getReader();try{for(;;){const{done:t,value:n}=await e.read();if(t)break;yield n}}finally{await e.cancel()}},Bs=(i,e,t,n)=>{const r=zd(i,e);let o=0,a,u=p=>{a||(a=!0,n&&n(p))};return new ReadableStream({async pull(p){try{const{done:v,value:y}=await r.next();if(v){u(),p.close();return}let k=y.byteLength;if(t){let D=o+=k;t(D)}p.enqueue(new Uint8Array(y))}catch(v){throw u(v),v}},cancel(p){return u(p),r.return()}},{highWaterMark:2})},Zi=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",ic=Zi&&typeof ReadableStream=="function",Jd=Zi&&(typeof TextEncoder=="function"?(i=>e=>i.encode(e))(new TextEncoder):async i=>new Uint8Array(await new Response(i).arrayBuffer())),rc=(i,...e)=>{try{return!!i(...e)}catch{return!1}},Yd=ic&&rc(()=>{let i=!1;const e=new Request($t.origin,{body:new ReadableStream,method:"POST",get duplex(){return i=!0,"half"}}).headers.has("Content-Type");return i&&!e}),js=64*1024,so=ic&&rc(()=>x.isReadableStream(new Response("").body)),Ui={stream:so&&(i=>i.body)};Zi&&(i=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!Ui[e]&&(Ui[e]=x.isFunction(i[e])?t=>t[e]():(t,n)=>{throw new K(`Response type '${e}' is not supported`,K.ERR_NOT_SUPPORT,n)})})})(new Response);const Kd=async i=>{if(i==null)return 0;if(x.isBlob(i))return i.size;if(x.isSpecCompliantForm(i))return(await new Request($t.origin,{method:"POST",body:i}).arrayBuffer()).byteLength;if(x.isArrayBufferView(i)||x.isArrayBuffer(i))return i.byteLength;if(x.isURLSearchParams(i)&&(i=i+""),x.isString(i))return(await Jd(i)).byteLength},$d=async(i,e)=>{const t=x.toFiniteNumber(i.getContentLength());return t??Kd(e)},Xd=Zi&&(async i=>{let{url:e,method:t,data:n,signal:r,cancelToken:o,timeout:a,onDownloadProgress:u,onUploadProgress:p,responseType:v,headers:y,withCredentials:k="same-origin",fetchOptions:D}=nc(i);v=v?(v+"").toLowerCase():"text";let _=qd([r,o&&o.toAbortSignal()],a),E;const C=_&&_.unsubscribe&&(()=>{_.unsubscribe()});let A;try{if(p&&Yd&&t!=="get"&&t!=="head"&&(A=await $d(y,n))!==0){let j=new Request(e,{method:"POST",body:n,duplex:"half"}),Q;if(x.isFormData(n)&&(Q=j.headers.get("content-type"))&&y.setContentType(Q),j.body){const[rt,ht]=Ns(A,ji(Is(p)));n=Bs(j.body,js,rt,ht)}}x.isString(k)||(k=k?"include":"omit");const T="credentials"in Request.prototype;E=new Request(e,{...D,signal:_,method:t.toUpperCase(),headers:y.normalize().toJSON(),body:n,duplex:"half",credentials:T?k:void 0});let P=await fetch(E);const U=so&&(v==="stream"||v==="response");if(so&&(u||U&&C)){const j={};["status","statusText","headers"].forEach(kt=>{j[kt]=P[kt]});const Q=x.toFiniteNumber(P.headers.get("content-length")),[rt,ht]=u&&Ns(Q,ji(Is(u),!0))||[];P=new Response(Bs(P.body,js,rt,()=>{ht&&ht(),C&&C()}),j)}v=v||"text";let q=await Ui[x.findKey(Ui,v)||"text"](P,i);return!U&&C&&C(),await new Promise((j,Q)=>{tc(j,Q,{data:q,headers:Xt.from(P.headers),status:P.status,statusText:P.statusText,config:i,request:E})})}catch(T){throw C&&C(),T&&T.name==="TypeError"&&/fetch/i.test(T.message)?Object.assign(new K("Network Error",K.ERR_NETWORK,i,E),{cause:T.cause||T}):K.from(T,T&&T.code,i,E)}}),ao={http:hd,xhr:Hd,fetch:Xd};x.forEach(ao,(i,e)=>{if(i){try{Object.defineProperty(i,"name",{value:e})}catch{}Object.defineProperty(i,"adapterName",{value:e})}});const Us=i=>`- ${i}`,Gd=i=>x.isFunction(i)||i===null||i===!1,oc={getAdapter:i=>{i=x.isArray(i)?i:[i];const{length:e}=i;let t,n;const r={};for(let o=0;o<e;o++){t=i[o];let a;if(n=t,!Gd(t)&&(n=ao[(a=String(t)).toLowerCase()],n===void 0))throw new K(`Unknown adapter '${a}'`);if(n)break;r[a||"#"+o]=n}if(!n){const o=Object.entries(r).map(([u,p])=>`adapter ${u} `+(p===!1?"is not supported by the environment":"is not available in the build"));let a=e?o.length>1?`since :
`+o.map(Us).join(`
`):" "+Us(o[0]):"as no adapter specified";throw new K("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return n},adapters:ao};function Ir(i){if(i.cancelToken&&i.cancelToken.throwIfRequested(),i.signal&&i.signal.aborted)throw new Mn(null,i)}function Hs(i){return Ir(i),i.headers=Xt.from(i.headers),i.data=Nr.call(i,i.transformRequest),["post","put","patch"].indexOf(i.method)!==-1&&i.headers.setContentType("application/x-www-form-urlencoded",!1),oc.getAdapter(i.adapter||mi.adapter)(i).then(function(n){return Ir(i),n.data=Nr.call(i,i.transformResponse,n),n.headers=Xt.from(n.headers),n},function(n){return Za(n)||(Ir(i),n&&n.response&&(n.response.data=Nr.call(i,i.transformResponse,n.response),n.response.headers=Xt.from(n.response.headers))),Promise.reject(n)})}const sc="1.7.7",Ro={};["object","boolean","number","function","string","symbol"].forEach((i,e)=>{Ro[i]=function(n){return typeof n===i||"a"+(e<1?"n ":" ")+i}});const qs={};Ro.transitional=function(e,t,n){function r(o,a){return"[Axios v"+sc+"] Transitional option '"+o+"'"+a+(n?". "+n:"")}return(o,a,u)=>{if(e===!1)throw new K(r(a," has been removed"+(t?" in "+t:"")),K.ERR_DEPRECATED);return t&&!qs[a]&&(qs[a]=!0,console.warn(r(a," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(o,a,u):!0}};function Qd(i,e,t){if(typeof i!="object")throw new K("options must be an object",K.ERR_BAD_OPTION_VALUE);const n=Object.keys(i);let r=n.length;for(;r-- >0;){const o=n[r],a=e[o];if(a){const u=i[o],p=u===void 0||a(u,o,i);if(p!==!0)throw new K("option "+o+" must be "+p,K.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new K("Unknown option "+o,K.ERR_BAD_OPTION)}}const co={assertOptions:Qd,validators:Ro},He=co.validators;class dn{constructor(e){this.defaults=e,this.interceptors={request:new Ps,response:new Ps}}async request(e,t){try{return await this._request(e,t)}catch(n){if(n instanceof Error){let r;Error.captureStackTrace?Error.captureStackTrace(r={}):r=new Error;const o=r.stack?r.stack.replace(/^.+\n/,""):"";try{n.stack?o&&!String(n.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+o):n.stack=o}catch{}}throw n}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=mn(this.defaults,t);const{transitional:n,paramsSerializer:r,headers:o}=t;n!==void 0&&co.assertOptions(n,{silentJSONParsing:He.transitional(He.boolean),forcedJSONParsing:He.transitional(He.boolean),clarifyTimeoutError:He.transitional(He.boolean)},!1),r!=null&&(x.isFunction(r)?t.paramsSerializer={serialize:r}:co.assertOptions(r,{encode:He.function,serialize:He.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase();let a=o&&x.merge(o.common,o[t.method]);o&&x.forEach(["delete","get","head","post","put","patch","common"],E=>{delete o[E]}),t.headers=Xt.concat(a,o);const u=[];let p=!0;this.interceptors.request.forEach(function(C){typeof C.runWhen=="function"&&C.runWhen(t)===!1||(p=p&&C.synchronous,u.unshift(C.fulfilled,C.rejected))});const v=[];this.interceptors.response.forEach(function(C){v.push(C.fulfilled,C.rejected)});let y,k=0,D;if(!p){const E=[Hs.bind(this),void 0];for(E.unshift.apply(E,u),E.push.apply(E,v),D=E.length,y=Promise.resolve(t);k<D;)y=y.then(E[k++],E[k++]);return y}D=u.length;let _=t;for(k=0;k<D;){const E=u[k++],C=u[k++];try{_=E(_)}catch(A){C.call(this,A);break}}try{y=Hs.call(this,_)}catch(E){return Promise.reject(E)}for(k=0,D=v.length;k<D;)y=y.then(v[k++],v[k++]);return y}getUri(e){e=mn(this.defaults,e);const t=ec(e.baseURL,e.url);return Xa(t,e.params,e.paramsSerializer)}}x.forEach(["delete","get","head","options"],function(e){dn.prototype[e]=function(t,n){return this.request(mn(n||{},{method:e,url:t,data:(n||{}).data}))}});x.forEach(["post","put","patch"],function(e){function t(n){return function(o,a,u){return this.request(mn(u||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:o,data:a}))}}dn.prototype[e]=t(),dn.prototype[e+"Form"]=t(!0)});class Lo{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(o){t=o});const n=this;this.promise.then(r=>{if(!n._listeners)return;let o=n._listeners.length;for(;o-- >0;)n._listeners[o](r);n._listeners=null}),this.promise.then=r=>{let o;const a=new Promise(u=>{n.subscribe(u),o=u}).then(r);return a.cancel=function(){n.unsubscribe(o)},a},e(function(o,a,u){n.reason||(n.reason=new Mn(o,a,u),t(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=n=>{e.abort(n)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new Lo(function(r){e=r}),cancel:e}}}function Zd(i){return function(t){return i.apply(null,t)}}function tf(i){return x.isObject(i)&&i.isAxiosError===!0}const lo={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(lo).forEach(([i,e])=>{lo[e]=i});function ac(i){const e=new dn(i),t=Ba(dn.prototype.request,e);return x.extend(t,dn.prototype,e,{allOwnKeys:!0}),x.extend(t,e,null,{allOwnKeys:!0}),t.create=function(r){return ac(mn(i,r))},t}const Ct=ac(mi);Ct.Axios=dn;Ct.CanceledError=Mn;Ct.CancelToken=Lo;Ct.isCancel=Za;Ct.VERSION=sc;Ct.toFormData=Qi;Ct.AxiosError=K;Ct.Cancel=Ct.CanceledError;Ct.all=function(e){return Promise.all(e)};Ct.spread=Zd;Ct.isAxiosError=tf;Ct.mergeConfig=mn;Ct.AxiosHeaders=Xt;Ct.formToJSON=i=>Qa(x.isHTMLForm(i)?new FormData(i):i);Ct.getAdapter=oc.getAdapter;Ct.HttpStatusCode=lo;Ct.default=Ct;function si(i){"@babel/helpers - typeof";return si=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},si(i)}function Tt(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function ef(i,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(i,n.key,n)}}function Dt(i,e,t){return e&&ef(i.prototype,e),Object.defineProperty(i,"prototype",{writable:!1}),i}function hi(){return hi=Object.assign||function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},hi.apply(this,arguments)}function Gt(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(e&&e.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),e&&uo(i,e)}function Hi(i){return Hi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Hi(i)}function uo(i,e){return uo=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},uo(i,e)}function nf(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function rf(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function of(i,e){if(e&&(typeof e=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return rf(i)}function Qt(i){var e=nf();return function(){var n=Hi(i),r;if(e){var o=Hi(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return of(this,r)}}var _o=function(){function i(){Tt(this,i)}return Dt(i,[{key:"listenForWhisper",value:function(t,n){return this.listen(".client-"+t,n)}},{key:"notification",value:function(t){return this.listen(".Illuminate\\Notifications\\Events\\BroadcastNotificationCreated",t)}},{key:"stopListeningForWhisper",value:function(t,n){return this.stopListening(".client-"+t,n)}}]),i}(),cc=function(){function i(e){Tt(this,i),this.namespace=e}return Dt(i,[{key:"format",value:function(t){return[".","\\"].includes(t.charAt(0))?t.substring(1):(this.namespace&&(t=this.namespace+"."+t),t.replace(/\./g,"\\"))}},{key:"setNamespace",value:function(t){this.namespace=t}}]),i}();function sf(i){try{new i}catch(e){if(e.message.includes("is not a constructor"))return!1}return!0}var Oo=function(i){Gt(t,i);var e=Qt(t);function t(n,r,o){var a;return Tt(this,t),a=e.call(this),a.name=r,a.pusher=n,a.options=o,a.eventFormatter=new cc(a.options.namespace),a.subscribe(),a}return Dt(t,[{key:"subscribe",value:function(){this.subscription=this.pusher.subscribe(this.name)}},{key:"unsubscribe",value:function(){this.pusher.unsubscribe(this.name)}},{key:"listen",value:function(r,o){return this.on(this.eventFormatter.format(r),o),this}},{key:"listenToAll",value:function(r){var o=this;return this.subscription.bind_global(function(a,u){if(!a.startsWith("pusher:")){var p=o.options.namespace.replace(/\./g,"\\"),v=a.startsWith(p)?a.substring(p.length+1):"."+a;r(v,u)}}),this}},{key:"stopListening",value:function(r,o){return o?this.subscription.unbind(this.eventFormatter.format(r),o):this.subscription.unbind(this.eventFormatter.format(r)),this}},{key:"stopListeningToAll",value:function(r){return r?this.subscription.unbind_global(r):this.subscription.unbind_global(),this}},{key:"subscribed",value:function(r){return this.on("pusher:subscription_succeeded",function(){r()}),this}},{key:"error",value:function(r){return this.on("pusher:subscription_error",function(o){r(o)}),this}},{key:"on",value:function(r,o){return this.subscription.bind(r,o),this}}]),t}(_o),lc=function(i){Gt(t,i);var e=Qt(t);function t(){return Tt(this,t),e.apply(this,arguments)}return Dt(t,[{key:"whisper",value:function(r,o){return this.pusher.channels.channels[this.name].trigger("client-".concat(r),o),this}}]),t}(Oo),af=function(i){Gt(t,i);var e=Qt(t);function t(){return Tt(this,t),e.apply(this,arguments)}return Dt(t,[{key:"whisper",value:function(r,o){return this.pusher.channels.channels[this.name].trigger("client-".concat(r),o),this}}]),t}(Oo),cf=function(i){Gt(t,i);var e=Qt(t);function t(){return Tt(this,t),e.apply(this,arguments)}return Dt(t,[{key:"here",value:function(r){return this.on("pusher:subscription_succeeded",function(o){r(Object.keys(o.members).map(function(a){return o.members[a]}))}),this}},{key:"joining",value:function(r){return this.on("pusher:member_added",function(o){r(o.info)}),this}},{key:"whisper",value:function(r,o){return this.pusher.channels.channels[this.name].trigger("client-".concat(r),o),this}},{key:"leaving",value:function(r){return this.on("pusher:member_removed",function(o){r(o.info)}),this}}]),t}(lc),uc=function(i){Gt(t,i);var e=Qt(t);function t(n,r,o){var a;return Tt(this,t),a=e.call(this),a.events={},a.listeners={},a.name=r,a.socket=n,a.options=o,a.eventFormatter=new cc(a.options.namespace),a.subscribe(),a}return Dt(t,[{key:"subscribe",value:function(){this.socket.emit("subscribe",{channel:this.name,auth:this.options.auth||{}})}},{key:"unsubscribe",value:function(){this.unbind(),this.socket.emit("unsubscribe",{channel:this.name,auth:this.options.auth||{}})}},{key:"listen",value:function(r,o){return this.on(this.eventFormatter.format(r),o),this}},{key:"stopListening",value:function(r,o){return this.unbindEvent(this.eventFormatter.format(r),o),this}},{key:"subscribed",value:function(r){return this.on("connect",function(o){r(o)}),this}},{key:"error",value:function(r){return this}},{key:"on",value:function(r,o){var a=this;return this.listeners[r]=this.listeners[r]||[],this.events[r]||(this.events[r]=function(u,p){a.name===u&&a.listeners[r]&&a.listeners[r].forEach(function(v){return v(p)})},this.socket.on(r,this.events[r])),this.listeners[r].push(o),this}},{key:"unbind",value:function(){var r=this;Object.keys(this.events).forEach(function(o){r.unbindEvent(o)})}},{key:"unbindEvent",value:function(r,o){this.listeners[r]=this.listeners[r]||[],o&&(this.listeners[r]=this.listeners[r].filter(function(a){return a!==o})),(!o||this.listeners[r].length===0)&&(this.events[r]&&(this.socket.removeListener(r,this.events[r]),delete this.events[r]),delete this.listeners[r])}}]),t}(_o),hc=function(i){Gt(t,i);var e=Qt(t);function t(){return Tt(this,t),e.apply(this,arguments)}return Dt(t,[{key:"whisper",value:function(r,o){return this.socket.emit("client event",{channel:this.name,event:"client-".concat(r),data:o}),this}}]),t}(uc),lf=function(i){Gt(t,i);var e=Qt(t);function t(){return Tt(this,t),e.apply(this,arguments)}return Dt(t,[{key:"here",value:function(r){return this.on("presence:subscribed",function(o){r(o.map(function(a){return a.user_info}))}),this}},{key:"joining",value:function(r){return this.on("presence:joining",function(o){return r(o.user_info)}),this}},{key:"whisper",value:function(r,o){return this.socket.emit("client event",{channel:this.name,event:"client-".concat(r),data:o}),this}},{key:"leaving",value:function(r){return this.on("presence:leaving",function(o){return r(o.user_info)}),this}}]),t}(hc),qi=function(i){Gt(t,i);var e=Qt(t);function t(){return Tt(this,t),e.apply(this,arguments)}return Dt(t,[{key:"subscribe",value:function(){}},{key:"unsubscribe",value:function(){}},{key:"listen",value:function(r,o){return this}},{key:"listenToAll",value:function(r){return this}},{key:"stopListening",value:function(r,o){return this}},{key:"subscribed",value:function(r){return this}},{key:"error",value:function(r){return this}},{key:"on",value:function(r,o){return this}}]),t}(_o),dc=function(i){Gt(t,i);var e=Qt(t);function t(){return Tt(this,t),e.apply(this,arguments)}return Dt(t,[{key:"whisper",value:function(r,o){return this}}]),t}(qi),uf=function(i){Gt(t,i);var e=Qt(t);function t(){return Tt(this,t),e.apply(this,arguments)}return Dt(t,[{key:"whisper",value:function(r,o){return this}}]),t}(qi),hf=function(i){Gt(t,i);var e=Qt(t);function t(){return Tt(this,t),e.apply(this,arguments)}return Dt(t,[{key:"here",value:function(r){return this}},{key:"joining",value:function(r){return this}},{key:"whisper",value:function(r,o){return this}},{key:"leaving",value:function(r){return this}}]),t}(dc),Po=function(){function i(e){Tt(this,i),this._defaultOptions={auth:{headers:{}},authEndpoint:"/broadcasting/auth",userAuthentication:{endpoint:"/broadcasting/user-auth",headers:{}},broadcaster:"pusher",csrfToken:null,bearerToken:null,host:null,key:null,namespace:"App.Events"},this.setOptions(e),this.connect()}return Dt(i,[{key:"setOptions",value:function(t){this.options=hi(this._defaultOptions,t);var n=this.csrfToken();return n&&(this.options.auth.headers["X-CSRF-TOKEN"]=n,this.options.userAuthentication.headers["X-CSRF-TOKEN"]=n),n=this.options.bearerToken,n&&(this.options.auth.headers.Authorization="Bearer "+n,this.options.userAuthentication.headers.Authorization="Bearer "+n),t}},{key:"csrfToken",value:function(){var t;return typeof window<"u"&&window.Laravel&&window.Laravel.csrfToken?window.Laravel.csrfToken:this.options.csrfToken?this.options.csrfToken:typeof document<"u"&&typeof document.querySelector=="function"&&(t=document.querySelector('meta[name="csrf-token"]'))?t.getAttribute("content"):null}}]),i}(),Ws=function(i){Gt(t,i);var e=Qt(t);function t(){var n;return Tt(this,t),n=e.apply(this,arguments),n.channels={},n}return Dt(t,[{key:"connect",value:function(){typeof this.options.client<"u"?this.pusher=this.options.client:this.options.Pusher?this.pusher=new this.options.Pusher(this.options.key,this.options):this.pusher=new Pusher(this.options.key,this.options)}},{key:"signin",value:function(){this.pusher.signin()}},{key:"listen",value:function(r,o,a){return this.channel(r).listen(o,a)}},{key:"channel",value:function(r){return this.channels[r]||(this.channels[r]=new Oo(this.pusher,r,this.options)),this.channels[r]}},{key:"privateChannel",value:function(r){return this.channels["private-"+r]||(this.channels["private-"+r]=new lc(this.pusher,"private-"+r,this.options)),this.channels["private-"+r]}},{key:"encryptedPrivateChannel",value:function(r){return this.channels["private-encrypted-"+r]||(this.channels["private-encrypted-"+r]=new af(this.pusher,"private-encrypted-"+r,this.options)),this.channels["private-encrypted-"+r]}},{key:"presenceChannel",value:function(r){return this.channels["presence-"+r]||(this.channels["presence-"+r]=new cf(this.pusher,"presence-"+r,this.options)),this.channels["presence-"+r]}},{key:"leave",value:function(r){var o=this,a=[r,"private-"+r,"private-encrypted-"+r,"presence-"+r];a.forEach(function(u,p){o.leaveChannel(u)})}},{key:"leaveChannel",value:function(r){this.channels[r]&&(this.channels[r].unsubscribe(),delete this.channels[r])}},{key:"socketId",value:function(){return this.pusher.connection.socket_id}},{key:"disconnect",value:function(){this.pusher.disconnect()}}]),t}(Po),zs=function(i){Gt(t,i);var e=Qt(t);function t(){var n;return Tt(this,t),n=e.apply(this,arguments),n.channels={},n}return Dt(t,[{key:"connect",value:function(){var r=this,o=this.getSocketIO();return this.socket=o(this.options.host,this.options),this.socket.on("reconnect",function(){Object.values(r.channels).forEach(function(a){a.subscribe()})}),this.socket}},{key:"getSocketIO",value:function(){if(typeof this.options.client<"u")return this.options.client;if(typeof io<"u")return io;throw new Error("Socket.io client not found. Should be globally available or passed via options.client")}},{key:"listen",value:function(r,o,a){return this.channel(r).listen(o,a)}},{key:"channel",value:function(r){return this.channels[r]||(this.channels[r]=new uc(this.socket,r,this.options)),this.channels[r]}},{key:"privateChannel",value:function(r){return this.channels["private-"+r]||(this.channels["private-"+r]=new hc(this.socket,"private-"+r,this.options)),this.channels["private-"+r]}},{key:"presenceChannel",value:function(r){return this.channels["presence-"+r]||(this.channels["presence-"+r]=new lf(this.socket,"presence-"+r,this.options)),this.channels["presence-"+r]}},{key:"leave",value:function(r){var o=this,a=[r,"private-"+r,"presence-"+r];a.forEach(function(u){o.leaveChannel(u)})}},{key:"leaveChannel",value:function(r){this.channels[r]&&(this.channels[r].unsubscribe(),delete this.channels[r])}},{key:"socketId",value:function(){return this.socket.id}},{key:"disconnect",value:function(){this.socket.disconnect()}}]),t}(Po),df=function(i){Gt(t,i);var e=Qt(t);function t(){var n;return Tt(this,t),n=e.apply(this,arguments),n.channels={},n}return Dt(t,[{key:"connect",value:function(){}},{key:"listen",value:function(r,o,a){return new qi}},{key:"channel",value:function(r){return new qi}},{key:"privateChannel",value:function(r){return new dc}},{key:"encryptedPrivateChannel",value:function(r){return new uf}},{key:"presenceChannel",value:function(r){return new hf}},{key:"leave",value:function(r){}},{key:"leaveChannel",value:function(r){}},{key:"socketId",value:function(){return"fake-socket-id"}},{key:"disconnect",value:function(){}}]),t}(Po),ff=function(){function i(e){Tt(this,i),this.options=e,this.connect(),this.options.withoutInterceptors||this.registerInterceptors()}return Dt(i,[{key:"channel",value:function(t){return this.connector.channel(t)}},{key:"connect",value:function(){if(this.options.broadcaster=="reverb")this.connector=new Ws(hi(hi({},this.options),{cluster:""}));else if(this.options.broadcaster=="pusher")this.connector=new Ws(this.options);else if(this.options.broadcaster=="socket.io")this.connector=new zs(this.options);else if(this.options.broadcaster=="null")this.connector=new df(this.options);else if(typeof this.options.broadcaster=="function"&&sf(this.options.broadcaster))this.connector=new this.options.broadcaster(this.options);else throw new Error("Broadcaster ".concat(si(this.options.broadcaster)," ").concat(this.options.broadcaster," is not supported."))}},{key:"disconnect",value:function(){this.connector.disconnect()}},{key:"join",value:function(t){return this.connector.presenceChannel(t)}},{key:"leave",value:function(t){this.connector.leave(t)}},{key:"leaveChannel",value:function(t){this.connector.leaveChannel(t)}},{key:"leaveAllChannels",value:function(){for(var t in this.connector.channels)this.leaveChannel(t)}},{key:"listen",value:function(t,n,r){return this.connector.listen(t,n,r)}},{key:"private",value:function(t){return this.connector.privateChannel(t)}},{key:"encryptedPrivate",value:function(t){if(this.connector instanceof zs)throw new Error("Broadcaster ".concat(si(this.options.broadcaster)," ").concat(this.options.broadcaster," does not support encrypted private channels."));return this.connector.encryptedPrivateChannel(t)}},{key:"socketId",value:function(){return this.connector.socketId()}},{key:"registerInterceptors",value:function(){typeof Vue=="function"&&Vue.http&&this.registerVueRequestInterceptor(),typeof axios=="function"&&this.registerAxiosRequestInterceptor(),typeof jQuery=="function"&&this.registerjQueryAjaxSetup(),(typeof Turbo>"u"?"undefined":si(Turbo))==="object"&&this.registerTurboRequestInterceptor()}},{key:"registerVueRequestInterceptor",value:function(){var t=this;Vue.http.interceptors.push(function(n,r){t.socketId()&&n.headers.set("X-Socket-ID",t.socketId()),r()})}},{key:"registerAxiosRequestInterceptor",value:function(){var t=this;axios.interceptors.request.use(function(n){return t.socketId()&&(n.headers["X-Socket-Id"]=t.socketId()),n})}},{key:"registerjQueryAjaxSetup",value:function(){var t=this;typeof jQuery.ajax<"u"&&jQuery.ajaxPrefilter(function(n,r,o){t.socketId()&&o.setRequestHeader("X-Socket-Id",t.socketId())})}},{key:"registerTurboRequestInterceptor",value:function(){var t=this;document.addEventListener("turbo:before-fetch-request",function(n){n.detail.fetchOptions.headers["X-Socket-Id"]=t.socketId()})}}]),i}();function pf(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var fc={exports:{}};/*!
 * Pusher JavaScript Library v8.4.0
 * https://pusher.com/
 *
 * Copyright 2020, Pusher
 * Released under the MIT licence.
 */(function(i,e){(function(n,r){i.exports=r()})(window,function(){return function(t){var n={};function r(o){if(n[o])return n[o].exports;var a=n[o]={i:o,l:!1,exports:{}};return t[o].call(a.exports,a,a.exports,r),a.l=!0,a.exports}return r.m=t,r.c=n,r.d=function(o,a,u){r.o(o,a)||Object.defineProperty(o,a,{enumerable:!0,get:u})},r.r=function(o){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},r.t=function(o,a){if(a&1&&(o=r(o)),a&8||a&4&&typeof o=="object"&&o&&o.__esModule)return o;var u=Object.create(null);if(r.r(u),Object.defineProperty(u,"default",{enumerable:!0,value:o}),a&2&&typeof o!="string")for(var p in o)r.d(u,p,(function(v){return o[v]}).bind(null,p));return u},r.n=function(o){var a=o&&o.__esModule?function(){return o.default}:function(){return o};return r.d(a,"a",a),a},r.o=function(o,a){return Object.prototype.hasOwnProperty.call(o,a)},r.p="",r(r.s=2)}([function(t,n,r){var o=this&&this.__extends||function(){var C=function(A,T){return C=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,U){P.__proto__=U}||function(P,U){for(var q in U)U.hasOwnProperty(q)&&(P[q]=U[q])},C(A,T)};return function(A,T){C(A,T);function P(){this.constructor=A}A.prototype=T===null?Object.create(T):(P.prototype=T.prototype,new P)}}();Object.defineProperty(n,"__esModule",{value:!0});var a=256,u=function(){function C(A){A===void 0&&(A="="),this._paddingCharacter=A}return C.prototype.encodedLength=function(A){return this._paddingCharacter?(A+2)/3*4|0:(A*8+5)/6|0},C.prototype.encode=function(A){for(var T="",P=0;P<A.length-2;P+=3){var U=A[P]<<16|A[P+1]<<8|A[P+2];T+=this._encodeByte(U>>>3*6&63),T+=this._encodeByte(U>>>2*6&63),T+=this._encodeByte(U>>>1*6&63),T+=this._encodeByte(U>>>0*6&63)}var q=A.length-P;if(q>0){var U=A[P]<<16|(q===2?A[P+1]<<8:0);T+=this._encodeByte(U>>>3*6&63),T+=this._encodeByte(U>>>2*6&63),q===2?T+=this._encodeByte(U>>>1*6&63):T+=this._paddingCharacter||"",T+=this._paddingCharacter||""}return T},C.prototype.maxDecodedLength=function(A){return this._paddingCharacter?A/4*3|0:(A*6+7)/8|0},C.prototype.decodedLength=function(A){return this.maxDecodedLength(A.length-this._getPaddingLength(A))},C.prototype.decode=function(A){if(A.length===0)return new Uint8Array(0);for(var T=this._getPaddingLength(A),P=A.length-T,U=new Uint8Array(this.maxDecodedLength(P)),q=0,j=0,Q=0,rt=0,ht=0,kt=0,Ot=0;j<P-4;j+=4)rt=this._decodeChar(A.charCodeAt(j+0)),ht=this._decodeChar(A.charCodeAt(j+1)),kt=this._decodeChar(A.charCodeAt(j+2)),Ot=this._decodeChar(A.charCodeAt(j+3)),U[q++]=rt<<2|ht>>>4,U[q++]=ht<<4|kt>>>2,U[q++]=kt<<6|Ot,Q|=rt&a,Q|=ht&a,Q|=kt&a,Q|=Ot&a;if(j<P-1&&(rt=this._decodeChar(A.charCodeAt(j)),ht=this._decodeChar(A.charCodeAt(j+1)),U[q++]=rt<<2|ht>>>4,Q|=rt&a,Q|=ht&a),j<P-2&&(kt=this._decodeChar(A.charCodeAt(j+2)),U[q++]=ht<<4|kt>>>2,Q|=kt&a),j<P-3&&(Ot=this._decodeChar(A.charCodeAt(j+3)),U[q++]=kt<<6|Ot,Q|=Ot&a),Q!==0)throw new Error("Base64Coder: incorrect characters for decoding");return U},C.prototype._encodeByte=function(A){var T=A;return T+=65,T+=25-A>>>8&6,T+=51-A>>>8&-75,T+=61-A>>>8&-15,T+=62-A>>>8&3,String.fromCharCode(T)},C.prototype._decodeChar=function(A){var T=a;return T+=(42-A&A-44)>>>8&-a+A-43+62,T+=(46-A&A-48)>>>8&-a+A-47+63,T+=(47-A&A-58)>>>8&-a+A-48+52,T+=(64-A&A-91)>>>8&-a+A-65+0,T+=(96-A&A-123)>>>8&-a+A-97+26,T},C.prototype._getPaddingLength=function(A){var T=0;if(this._paddingCharacter){for(var P=A.length-1;P>=0&&A[P]===this._paddingCharacter;P--)T++;if(A.length<4||T>2)throw new Error("Base64Coder: incorrect padding")}return T},C}();n.Coder=u;var p=new u;function v(C){return p.encode(C)}n.encode=v;function y(C){return p.decode(C)}n.decode=y;var k=function(C){o(A,C);function A(){return C!==null&&C.apply(this,arguments)||this}return A.prototype._encodeByte=function(T){var P=T;return P+=65,P+=25-T>>>8&6,P+=51-T>>>8&-75,P+=61-T>>>8&-13,P+=62-T>>>8&49,String.fromCharCode(P)},A.prototype._decodeChar=function(T){var P=a;return P+=(44-T&T-46)>>>8&-a+T-45+62,P+=(94-T&T-96)>>>8&-a+T-95+63,P+=(47-T&T-58)>>>8&-a+T-48+52,P+=(64-T&T-91)>>>8&-a+T-65+0,P+=(96-T&T-123)>>>8&-a+T-97+26,P},A}(u);n.URLSafeCoder=k;var D=new k;function _(C){return D.encode(C)}n.encodeURLSafe=_;function E(C){return D.decode(C)}n.decodeURLSafe=E,n.encodedLength=function(C){return p.encodedLength(C)},n.maxDecodedLength=function(C){return p.maxDecodedLength(C)},n.decodedLength=function(C){return p.decodedLength(C)}},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var o="utf8: invalid string",a="utf8: invalid source encoding";function u(y){for(var k=new Uint8Array(p(y)),D=0,_=0;_<y.length;_++){var E=y.charCodeAt(_);E<128?k[D++]=E:E<2048?(k[D++]=192|E>>6,k[D++]=128|E&63):E<55296?(k[D++]=224|E>>12,k[D++]=128|E>>6&63,k[D++]=128|E&63):(_++,E=(E&1023)<<10,E|=y.charCodeAt(_)&1023,E+=65536,k[D++]=240|E>>18,k[D++]=128|E>>12&63,k[D++]=128|E>>6&63,k[D++]=128|E&63)}return k}n.encode=u;function p(y){for(var k=0,D=0;D<y.length;D++){var _=y.charCodeAt(D);if(_<128)k+=1;else if(_<2048)k+=2;else if(_<55296)k+=3;else if(_<=57343){if(D>=y.length-1)throw new Error(o);D++,k+=4}else throw new Error(o)}return k}n.encodedLength=p;function v(y){for(var k=[],D=0;D<y.length;D++){var _=y[D];if(_&128){var E=void 0;if(_<224){if(D>=y.length)throw new Error(a);var C=y[++D];if((C&192)!==128)throw new Error(a);_=(_&31)<<6|C&63,E=128}else if(_<240){if(D>=y.length-1)throw new Error(a);var C=y[++D],A=y[++D];if((C&192)!==128||(A&192)!==128)throw new Error(a);_=(_&15)<<12|(C&63)<<6|A&63,E=2048}else if(_<248){if(D>=y.length-2)throw new Error(a);var C=y[++D],A=y[++D],T=y[++D];if((C&192)!==128||(A&192)!==128||(T&192)!==128)throw new Error(a);_=(_&15)<<18|(C&63)<<12|(A&63)<<6|T&63,E=65536}else throw new Error(a);if(_<E||_>=55296&&_<=57343)throw new Error(a);if(_>=65536){if(_>1114111)throw new Error(a);_-=65536,k.push(String.fromCharCode(55296|_>>10)),_=56320|_&1023}}k.push(String.fromCharCode(_))}return k.join("")}n.decode=v},function(t,n,r){t.exports=r(3).default},function(t,n,r){r.r(n);class o{constructor(s,c){this.lastId=0,this.prefix=s,this.name=c}create(s){this.lastId++;var c=this.lastId,d=this.prefix+c,g=this.name+"["+c+"]",S=!1,L=function(){S||(s.apply(null,arguments),S=!0)};return this[c]=L,{number:c,id:d,name:g,callback:L}}remove(s){delete this[s.number]}}var a=new o("_pusher_script_","Pusher.ScriptReceivers"),u={VERSION:"8.4.0",PROTOCOL:7,wsPort:80,wssPort:443,wsPath:"",httpHost:"sockjs.pusher.com",httpPort:80,httpsPort:443,httpPath:"/pusher",stats_host:"stats.pusher.com",authEndpoint:"/pusher/auth",authTransport:"ajax",activityTimeout:12e4,pongTimeout:3e4,unavailableTimeout:1e4,userAuthentication:{endpoint:"/pusher/user-auth",transport:"ajax"},channelAuthorization:{endpoint:"/pusher/auth",transport:"ajax"},cdn_http:"http://js.pusher.com",cdn_https:"https://js.pusher.com",dependency_suffix:""},p=u;class v{constructor(s){this.options=s,this.receivers=s.receivers||a,this.loading={}}load(s,c,d){var g=this;if(g.loading[s]&&g.loading[s].length>0)g.loading[s].push(d);else{g.loading[s]=[d];var S=J.createScriptRequest(g.getPath(s,c)),L=g.receivers.create(function(B){if(g.receivers.remove(L),g.loading[s]){var V=g.loading[s];delete g.loading[s];for(var st=function(wt){wt||S.cleanup()},ct=0;ct<V.length;ct++)V[ct](B,st)}});S.send(L)}}getRoot(s){var c,d=J.getDocument().location.protocol;return s&&s.useTLS||d==="https:"?c=this.options.cdn_https:c=this.options.cdn_http,c.replace(/\/*$/,"")+"/"+this.options.version}getPath(s,c){return this.getRoot(c)+"/"+s+this.options.suffix+".js"}}var y=new o("_pusher_dependencies","Pusher.DependenciesReceivers"),k=new v({cdn_http:p.cdn_http,cdn_https:p.cdn_https,version:p.VERSION,suffix:p.dependency_suffix,receivers:y});const D={baseUrl:"https://pusher.com",urls:{authenticationEndpoint:{path:"/docs/channels/server_api/authenticating_users"},authorizationEndpoint:{path:"/docs/channels/server_api/authorizing-users/"},javascriptQuickStart:{path:"/docs/javascript_quick_start"},triggeringClientEvents:{path:"/docs/client_api_guide/client_events#trigger-events"},encryptedChannelSupport:{fullUrl:"https://github.com/pusher/pusher-js/tree/cc491015371a4bde5743d1c87a0fbac0feb53195#encrypted-channel-support"}}};var E={buildLogSuffix:function(l){const s="See:",c=D.urls[l];if(!c)return"";let d;return c.fullUrl?d=c.fullUrl:c.path&&(d=D.baseUrl+c.path),d?`${s} ${d}`:""}},C;(function(l){l.UserAuthentication="user-authentication",l.ChannelAuthorization="channel-authorization"})(C||(C={}));class A extends Error{constructor(s){super(s),Object.setPrototypeOf(this,new.target.prototype)}}class T extends Error{constructor(s){super(s),Object.setPrototypeOf(this,new.target.prototype)}}class P extends Error{constructor(s){super(s),Object.setPrototypeOf(this,new.target.prototype)}}class U extends Error{constructor(s){super(s),Object.setPrototypeOf(this,new.target.prototype)}}class q extends Error{constructor(s){super(s),Object.setPrototypeOf(this,new.target.prototype)}}class j extends Error{constructor(s){super(s),Object.setPrototypeOf(this,new.target.prototype)}}class Q extends Error{constructor(s){super(s),Object.setPrototypeOf(this,new.target.prototype)}}class rt extends Error{constructor(s){super(s),Object.setPrototypeOf(this,new.target.prototype)}}class ht extends Error{constructor(s,c){super(c),this.status=s,Object.setPrototypeOf(this,new.target.prototype)}}var Ot=function(l,s,c,d,g){const S=J.createXHR();S.open("POST",c.endpoint,!0),S.setRequestHeader("Content-Type","application/x-www-form-urlencoded");for(var L in c.headers)S.setRequestHeader(L,c.headers[L]);if(c.headersProvider!=null){let B=c.headersProvider();for(var L in B)S.setRequestHeader(L,B[L])}return S.onreadystatechange=function(){if(S.readyState===4)if(S.status===200){let B,V=!1;try{B=JSON.parse(S.responseText),V=!0}catch{g(new ht(200,`JSON returned from ${d.toString()} endpoint was invalid, yet status code was 200. Data was: ${S.responseText}`),null)}V&&g(null,B)}else{let B="";switch(d){case C.UserAuthentication:B=E.buildLogSuffix("authenticationEndpoint");break;case C.ChannelAuthorization:B=`Clients must be authorized to join private or presence channels. ${E.buildLogSuffix("authorizationEndpoint")}`;break}g(new ht(S.status,`Unable to retrieve auth string from ${d.toString()} endpoint - received status: ${S.status} from ${c.endpoint}. ${B}`),null)}},S.send(s),S};function Nn(l){return Fn(Pe(l))}var gt=String.fromCharCode,Nt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ye=function(l){var s=l.charCodeAt(0);return s<128?l:s<2048?gt(192|s>>>6)+gt(128|s&63):gt(224|s>>>12&15)+gt(128|s>>>6&63)+gt(128|s&63)},Pe=function(l){return l.replace(/[^\x00-\x7F]/g,Ye)},In=function(l){var s=[0,2,1][l.length%3],c=l.charCodeAt(0)<<16|(l.length>1?l.charCodeAt(1):0)<<8|(l.length>2?l.charCodeAt(2):0),d=[Nt.charAt(c>>>18),Nt.charAt(c>>>12&63),s>=2?"=":Nt.charAt(c>>>6&63),s>=1?"=":Nt.charAt(c&63)];return d.join("")},Fn=window.btoa||function(l){return l.replace(/[\s\S]{1,3}/g,In)};class An{constructor(s,c,d,g){this.clear=c,this.timer=s(()=>{this.timer&&(this.timer=g(this.timer))},d)}isRunning(){return this.timer!==null}ensureAborted(){this.timer&&(this.clear(this.timer),this.timer=null)}}var Me=An;function Bn(l){window.clearTimeout(l)}function Ne(l){window.clearInterval(l)}class ut extends Me{constructor(s,c){super(setTimeout,Bn,s,function(d){return c(),null})}}class wn extends Me{constructor(s,c){super(setInterval,Ne,s,function(d){return c(),d})}}var vt={now(){return Date.now?Date.now():new Date().valueOf()},defer(l){return new ut(0,l)},method(l,...s){var c=Array.prototype.slice.call(arguments,1);return function(d){return d[l].apply(d,c.concat(arguments))}}},ft=vt;function G(l,...s){for(var c=0;c<s.length;c++){var d=s[c];for(var g in d)d[g]&&d[g].constructor&&d[g].constructor===Object?l[g]=G(l[g]||{},d[g]):l[g]=d[g]}return l}function ce(){for(var l=["Pusher"],s=0;s<arguments.length;s++)typeof arguments[s]=="string"?l.push(arguments[s]):l.push(ue(arguments[s]));return l.join(" : ")}function Wt(l,s){var c=Array.prototype.indexOf;if(l===null)return-1;if(c&&l.indexOf===c)return l.indexOf(s);for(var d=0,g=l.length;d<g;d++)if(l[d]===s)return d;return-1}function Rt(l,s){for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&s(l[c],c,l)}function Ie(l){var s=[];return Rt(l,function(c,d){s.push(d)}),s}function Ke(l){var s=[];return Rt(l,function(c){s.push(c)}),s}function Zt(l,s,c){for(var d=0;d<l.length;d++)s.call(c||window,l[d],d,l)}function pe(l,s){for(var c=[],d=0;d<l.length;d++)c.push(s(l[d],d,l,c));return c}function $e(l,s){var c={};return Rt(l,function(d,g){c[g]=s(d)}),c}function te(l,s){s=s||function(g){return!!g};for(var c=[],d=0;d<l.length;d++)s(l[d],d,l,c)&&c.push(l[d]);return c}function Fe(l,s){var c={};return Rt(l,function(d,g){(s&&s(d,g,l,c)||d)&&(c[g]=d)}),c}function Be(l){var s=[];return Rt(l,function(c,d){s.push([d,c])}),s}function le(l,s){for(var c=0;c<l.length;c++)if(s(l[c],c,l))return!0;return!1}function ge(l,s){for(var c=0;c<l.length;c++)if(!s(l[c],c,l))return!1;return!0}function je(l){return $e(l,function(s){return typeof s=="object"&&(s=ue(s)),encodeURIComponent(Nn(s.toString()))})}function Cn(l){var s=Fe(l,function(d){return d!==void 0}),c=pe(Be(je(s)),ft.method("join","=")).join("&");return c}function Xe(l){var s=[],c=[];return function d(g,S){var L,B,V;switch(typeof g){case"object":if(!g)return null;for(L=0;L<s.length;L+=1)if(s[L]===g)return{$ref:c[L]};if(s.push(g),c.push(S),Object.prototype.toString.apply(g)==="[object Array]")for(V=[],L=0;L<g.length;L+=1)V[L]=d(g[L],S+"["+L+"]");else{V={};for(B in g)Object.prototype.hasOwnProperty.call(g,B)&&(V[B]=d(g[B],S+"["+JSON.stringify(B)+"]"))}return V;case"number":case"string":case"boolean":return g}}(l,"$")}function ue(l){try{return JSON.stringify(l)}catch{return JSON.stringify(Xe(l))}}class we{constructor(){this.globalLog=s=>{window.console&&window.console.log&&window.console.log(s)}}debug(...s){this.log(this.globalLog,s)}warn(...s){this.log(this.globalLogWarn,s)}error(...s){this.log(this.globalLogError,s)}globalLogWarn(s){window.console&&window.console.warn?window.console.warn(s):this.globalLog(s)}globalLogError(s){window.console&&window.console.error?window.console.error(s):this.globalLogWarn(s)}log(s,...c){var d=ce.apply(this,arguments);rr.log?rr.log(d):rr.logToConsole&&s.bind(this)(d)}}var et=new we,Ce=function(l,s,c,d,g){(c.headers!==void 0||c.headersProvider!=null)&&et.warn(`To send headers with the ${d.toString()} request, you must use AJAX, rather than JSONP.`);var S=l.nextAuthCallbackID.toString();l.nextAuthCallbackID++;var L=l.getDocument(),B=L.createElement("script");l.auth_callbacks[S]=function(ct){g(null,ct)};var V="Pusher.auth_callbacks['"+S+"']";B.src=c.endpoint+"?callback="+encodeURIComponent(V)+"&"+s;var st=L.getElementsByTagName("head")[0]||L.documentElement;st.insertBefore(B,st.firstChild)},Ge=Ce;class xn{constructor(s){this.src=s}send(s){var c=this,d="Error loading "+c.src;c.script=document.createElement("script"),c.script.id=s.id,c.script.src=c.src,c.script.type="text/javascript",c.script.charset="UTF-8",c.script.addEventListener?(c.script.onerror=function(){s.callback(d)},c.script.onload=function(){s.callback(null)}):c.script.onreadystatechange=function(){(c.script.readyState==="loaded"||c.script.readyState==="complete")&&s.callback(null)},c.script.async===void 0&&document.attachEvent&&/opera/i.test(navigator.userAgent)?(c.errorScript=document.createElement("script"),c.errorScript.id=s.id+"_error",c.errorScript.text=s.name+"('"+d+"');",c.script.async=c.errorScript.async=!1):c.script.async=!0;var g=document.getElementsByTagName("head")[0];g.insertBefore(c.script,g.firstChild),c.errorScript&&g.insertBefore(c.errorScript,c.script.nextSibling)}cleanup(){this.script&&(this.script.onload=this.script.onerror=null,this.script.onreadystatechange=null),this.script&&this.script.parentNode&&this.script.parentNode.removeChild(this.script),this.errorScript&&this.errorScript.parentNode&&this.errorScript.parentNode.removeChild(this.errorScript),this.script=null,this.errorScript=null}}class Qe{constructor(s,c){this.url=s,this.data=c}send(s){if(!this.request){var c=Cn(this.data),d=this.url+"/"+s.number+"?"+c;this.request=J.createScriptRequest(d),this.request.send(s)}}cleanup(){this.request&&this.request.cleanup()}}var Ze=function(l,s){return function(c,d){var g="http"+(s?"s":"")+"://",S=g+(l.host||l.options.host)+l.options.path,L=J.createJSONPRequest(S,c),B=J.ScriptReceivers.create(function(V,st){a.remove(B),L.cleanup(),st&&st.host&&(l.host=st.host),d&&d(V,st)});L.send(B)}},Sn={name:"jsonp",getAgent:Ze},Ee=Sn;function xe(l,s,c){var d=l+(s.useTLS?"s":""),g=s.useTLS?s.hostTLS:s.hostNonTLS;return d+"://"+g+c}function It(l,s){var c="/app/"+l,d="?protocol="+p.PROTOCOL+"&client=js&version="+p.VERSION+(s?"&"+s:"");return c+d}var ot={getInitial:function(l,s){var c=(s.httpPath||"")+It(l,"flash=false");return xe("ws",s,c)}},Te={getInitial:function(l,s){var c=(s.httpPath||"/pusher")+It(l);return xe("http",s,c)}},De={getInitial:function(l,s){return xe("http",s,s.httpPath||"/pusher")},getPath:function(l,s){return It(l)}};class jn{constructor(){this._callbacks={}}get(s){return this._callbacks[ee(s)]}add(s,c,d){var g=ee(s);this._callbacks[g]=this._callbacks[g]||[],this._callbacks[g].push({fn:c,context:d})}remove(s,c,d){if(!s&&!c&&!d){this._callbacks={};return}var g=s?[ee(s)]:Ie(this._callbacks);c||d?this.removeCallback(g,c,d):this.removeAllCallbacks(g)}removeCallback(s,c,d){Zt(s,function(g){this._callbacks[g]=te(this._callbacks[g]||[],function(S){return c&&c!==S.fn||d&&d!==S.context}),this._callbacks[g].length===0&&delete this._callbacks[g]},this)}removeAllCallbacks(s){Zt(s,function(c){delete this._callbacks[c]},this)}}function ee(l){return"_"+l}class Et{constructor(s){this.callbacks=new jn,this.global_callbacks=[],this.failThrough=s}bind(s,c,d){return this.callbacks.add(s,c,d),this}bind_global(s){return this.global_callbacks.push(s),this}unbind(s,c,d){return this.callbacks.remove(s,c,d),this}unbind_global(s){return s?(this.global_callbacks=te(this.global_callbacks||[],c=>c!==s),this):(this.global_callbacks=[],this)}unbind_all(){return this.unbind(),this.unbind_global(),this}emit(s,c,d){for(var g=0;g<this.global_callbacks.length;g++)this.global_callbacks[g](s,c);var S=this.callbacks.get(s),L=[];if(d?L.push(c,d):c&&L.push(c),S&&S.length>0)for(var g=0;g<S.length;g++)S[g].fn.apply(S[g].context||window,L);else this.failThrough&&this.failThrough(s,c);return this}}class ne extends Et{constructor(s,c,d,g,S){super(),this.initialize=J.transportConnectionInitializer,this.hooks=s,this.name=c,this.priority=d,this.key=g,this.options=S,this.state="new",this.timeline=S.timeline,this.activityTimeout=S.activityTimeout,this.id=this.timeline.generateUniqueID()}handlesActivityChecks(){return!!this.hooks.handlesActivityChecks}supportsPing(){return!!this.hooks.supportsPing}connect(){if(this.socket||this.state!=="initialized")return!1;var s=this.hooks.urls.getInitial(this.key,this.options);try{this.socket=this.hooks.getSocket(s,this.options)}catch(c){return ft.defer(()=>{this.onError(c),this.changeState("closed")}),!1}return this.bindListeners(),et.debug("Connecting",{transport:this.name,url:s}),this.changeState("connecting"),!0}close(){return this.socket?(this.socket.close(),!0):!1}send(s){return this.state==="open"?(ft.defer(()=>{this.socket&&this.socket.send(s)}),!0):!1}ping(){this.state==="open"&&this.supportsPing()&&this.socket.ping()}onOpen(){this.hooks.beforeOpen&&this.hooks.beforeOpen(this.socket,this.hooks.urls.getPath(this.key,this.options)),this.changeState("open"),this.socket.onopen=void 0}onError(s){this.emit("error",{type:"WebSocketError",error:s}),this.timeline.error(this.buildTimelineMessage({error:s.toString()}))}onClose(s){s?this.changeState("closed",{code:s.code,reason:s.reason,wasClean:s.wasClean}):this.changeState("closed"),this.unbindListeners(),this.socket=void 0}onMessage(s){this.emit("message",s)}onActivity(){this.emit("activity")}bindListeners(){this.socket.onopen=()=>{this.onOpen()},this.socket.onerror=s=>{this.onError(s)},this.socket.onclose=s=>{this.onClose(s)},this.socket.onmessage=s=>{this.onMessage(s)},this.supportsPing()&&(this.socket.onactivity=()=>{this.onActivity()})}unbindListeners(){this.socket&&(this.socket.onopen=void 0,this.socket.onerror=void 0,this.socket.onclose=void 0,this.socket.onmessage=void 0,this.supportsPing()&&(this.socket.onactivity=void 0))}changeState(s,c){this.state=s,this.timeline.info(this.buildTimelineMessage({state:s,params:c})),this.emit(s,c)}buildTimelineMessage(s){return G({cid:this.id},s)}}class zt{constructor(s){this.hooks=s}isSupported(s){return this.hooks.isSupported(s)}createConnection(s,c,d,g){return new ne(this.hooks,s,c,d,g)}}var Un=new zt({urls:ot,handlesActivityChecks:!1,supportsPing:!1,isInitialized:function(){return!!J.getWebSocketAPI()},isSupported:function(){return!!J.getWebSocketAPI()},getSocket:function(l){return J.createWebSocket(l)}}),h={urls:Te,handlesActivityChecks:!1,supportsPing:!0,isInitialized:function(){return!0}},f=G({getSocket:function(l){return J.HTTPFactory.createStreamingSocket(l)}},h),b=G({getSocket:function(l){return J.HTTPFactory.createPollingSocket(l)}},h),w={isSupported:function(){return J.isXHRSupported()}},R=new zt(G({},f,w)),N=new zt(G({},b,w)),W={ws:Un,xhr_streaming:R,xhr_polling:N},M=W,z=new zt({file:"sockjs",urls:De,handlesActivityChecks:!0,supportsPing:!1,isSupported:function(){return!0},isInitialized:function(){return window.SockJS!==void 0},getSocket:function(l,s){return new window.SockJS(l,null,{js_path:k.getPath("sockjs",{useTLS:s.useTLS}),ignore_null_origin:s.ignoreNullOrigin})},beforeOpen:function(l,s){l.send(JSON.stringify({path:s}))}}),I={isSupported:function(l){var s=J.isXDRSupported(l.useTLS);return s}},H=new zt(G({},f,I)),it=new zt(G({},b,I));M.xdr_streaming=H,M.xdr_polling=it,M.sockjs=z;var Ft=M;class pt extends Et{constructor(){super();var s=this;window.addEventListener!==void 0&&(window.addEventListener("online",function(){s.emit("online")},!1),window.addEventListener("offline",function(){s.emit("offline")},!1))}isOnline(){return window.navigator.onLine===void 0?!0:window.navigator.onLine}}var Se=new pt;class me{constructor(s,c,d){this.manager=s,this.transport=c,this.minPingDelay=d.minPingDelay,this.maxPingDelay=d.maxPingDelay,this.pingDelay=void 0}createConnection(s,c,d,g){g=G({},g,{activityTimeout:this.pingDelay});var S=this.transport.createConnection(s,c,d,g),L=null,B=function(){S.unbind("open",B),S.bind("closed",V),L=ft.now()},V=st=>{if(S.unbind("closed",V),st.code===1002||st.code===1003)this.manager.reportDeath();else if(!st.wasClean&&L){var ct=ft.now()-L;ct<2*this.maxPingDelay&&(this.manager.reportDeath(),this.pingDelay=Math.max(ct/2,this.minPingDelay))}};return S.bind("open",B),S}isSupported(s){return this.manager.isAlive()&&this.transport.isSupported(s)}}const tn={decodeMessage:function(l){try{var s=JSON.parse(l.data),c=s.data;if(typeof c=="string")try{c=JSON.parse(s.data)}catch{}var d={event:s.event,channel:s.channel,data:c};return s.user_id&&(d.user_id=s.user_id),d}catch(g){throw{type:"MessageParseError",error:g,data:l.data}}},encodeMessage:function(l){return JSON.stringify(l)},processHandshake:function(l){var s=tn.decodeMessage(l);if(s.event==="pusher:connection_established"){if(!s.data.activity_timeout)throw"No activity timeout specified in handshake";return{action:"connected",id:s.data.socket_id,activityTimeout:s.data.activity_timeout*1e3}}else{if(s.event==="pusher:error")return{action:this.getCloseAction(s.data),error:this.getCloseError(s.data)};throw"Invalid handshake"}},getCloseAction:function(l){return l.code<4e3?l.code>=1002&&l.code<=1004?"backoff":null:l.code===4e3?"tls_only":l.code<4100?"refused":l.code<4200?"backoff":l.code<4300?"retry":"refused"},getCloseError:function(l){return l.code!==1e3&&l.code!==1001?{type:"PusherError",data:{code:l.code,message:l.reason||l.message}}:null}};var Vt=tn;class Hn extends Et{constructor(s,c){super(),this.id=s,this.transport=c,this.activityTimeout=c.activityTimeout,this.bindListeners()}handlesActivityChecks(){return this.transport.handlesActivityChecks()}send(s){return this.transport.send(s)}send_event(s,c,d){var g={event:s,data:c};return d&&(g.channel=d),et.debug("Event sent",g),this.send(Vt.encodeMessage(g))}ping(){this.transport.supportsPing()?this.transport.ping():this.send_event("pusher:ping",{})}close(){this.transport.close()}bindListeners(){var s={message:d=>{var g;try{g=Vt.decodeMessage(d)}catch(S){this.emit("error",{type:"MessageParseError",error:S,data:d.data})}if(g!==void 0){switch(et.debug("Event recd",g),g.event){case"pusher:error":this.emit("error",{type:"PusherError",data:g.data});break;case"pusher:ping":this.emit("ping");break;case"pusher:pong":this.emit("pong");break}this.emit("message",g)}},activity:()=>{this.emit("activity")},error:d=>{this.emit("error",d)},closed:d=>{c(),d&&d.code&&this.handleCloseEvent(d),this.transport=null,this.emit("closed")}},c=()=>{Rt(s,(d,g)=>{this.transport.unbind(g,d)})};Rt(s,(d,g)=>{this.transport.bind(g,d)})}handleCloseEvent(s){var c=Vt.getCloseAction(s),d=Vt.getCloseError(s);d&&this.emit("error",d),c&&this.emit(c,{action:c,error:d})}}class m{constructor(s,c){this.transport=s,this.callback=c,this.bindListeners()}close(){this.unbindListeners(),this.transport.close()}bindListeners(){this.onMessage=s=>{this.unbindListeners();var c;try{c=Vt.processHandshake(s)}catch(d){this.finish("error",{error:d}),this.transport.close();return}c.action==="connected"?this.finish("connected",{connection:new Hn(c.id,this.transport),activityTimeout:c.activityTimeout}):(this.finish(c.action,{error:c.error}),this.transport.close())},this.onClosed=s=>{this.unbindListeners();var c=Vt.getCloseAction(s)||"backoff",d=Vt.getCloseError(s);this.finish(c,{error:d})},this.transport.bind("message",this.onMessage),this.transport.bind("closed",this.onClosed)}unbindListeners(){this.transport.unbind("message",this.onMessage),this.transport.unbind("closed",this.onClosed)}finish(s,c){this.callback(G({transport:this.transport,action:s},c))}}class F{constructor(s,c){this.timeline=s,this.options=c||{}}send(s,c){this.timeline.isEmpty()||this.timeline.send(J.TimelineTransport.getAgent(this,s),c)}}class O extends Et{constructor(s,c){super(function(d,g){et.debug("No callbacks on "+s+" for "+d)}),this.name=s,this.pusher=c,this.subscribed=!1,this.subscriptionPending=!1,this.subscriptionCancelled=!1}authorize(s,c){return c(null,{auth:""})}trigger(s,c){if(s.indexOf("client-")!==0)throw new A("Event '"+s+"' does not start with 'client-'");if(!this.subscribed){var d=E.buildLogSuffix("triggeringClientEvents");et.warn(`Client event triggered before channel 'subscription_succeeded' event . ${d}`)}return this.pusher.send_event(s,c,this.name)}disconnect(){this.subscribed=!1,this.subscriptionPending=!1}handleEvent(s){var c=s.event,d=s.data;if(c==="pusher_internal:subscription_succeeded")this.handleSubscriptionSucceededEvent(s);else if(c==="pusher_internal:subscription_count")this.handleSubscriptionCountEvent(s);else if(c.indexOf("pusher_internal:")!==0){var g={};this.emit(c,d,g)}}handleSubscriptionSucceededEvent(s){this.subscriptionPending=!1,this.subscribed=!0,this.subscriptionCancelled?this.pusher.unsubscribe(this.name):this.emit("pusher:subscription_succeeded",s.data)}handleSubscriptionCountEvent(s){s.data.subscription_count&&(this.subscriptionCount=s.data.subscription_count),this.emit("pusher:subscription_count",s.data)}subscribe(){this.subscribed||(this.subscriptionPending=!0,this.subscriptionCancelled=!1,this.authorize(this.pusher.connection.socket_id,(s,c)=>{s?(this.subscriptionPending=!1,et.error(s.toString()),this.emit("pusher:subscription_error",Object.assign({},{type:"AuthError",error:s.message},s instanceof ht?{status:s.status}:{}))):this.pusher.send_event("pusher:subscribe",{auth:c.auth,channel_data:c.channel_data,channel:this.name})}))}unsubscribe(){this.subscribed=!1,this.pusher.send_event("pusher:unsubscribe",{channel:this.name})}cancelSubscription(){this.subscriptionCancelled=!0}reinstateSubscription(){this.subscriptionCancelled=!1}}class $ extends O{authorize(s,c){return this.pusher.config.channelAuthorizer({channelName:this.name,socketId:s},c)}}class nt{constructor(){this.reset()}get(s){return Object.prototype.hasOwnProperty.call(this.members,s)?{id:s,info:this.members[s]}:null}each(s){Rt(this.members,(c,d)=>{s(this.get(d))})}setMyID(s){this.myID=s}onSubscription(s){this.members=s.presence.hash,this.count=s.presence.count,this.me=this.get(this.myID)}addMember(s){return this.get(s.user_id)===null&&this.count++,this.members[s.user_id]=s.user_info,this.get(s.user_id)}removeMember(s){var c=this.get(s.user_id);return c&&(delete this.members[s.user_id],this.count--),c}reset(){this.members={},this.count=0,this.myID=null,this.me=null}}var X=function(l,s,c,d){function g(S){return S instanceof c?S:new c(function(L){L(S)})}return new(c||(c=Promise))(function(S,L){function B(ct){try{st(d.next(ct))}catch(wt){L(wt)}}function V(ct){try{st(d.throw(ct))}catch(wt){L(wt)}}function st(ct){ct.done?S(ct.value):g(ct.value).then(B,V)}st((d=d.apply(l,s||[])).next())})};class mt extends ${constructor(s,c){super(s,c),this.members=new nt}authorize(s,c){super.authorize(s,(d,g)=>X(this,void 0,void 0,function*(){if(!d)if(g=g,g.channel_data!=null){var S=JSON.parse(g.channel_data);this.members.setMyID(S.user_id)}else if(yield this.pusher.user.signinDonePromise,this.pusher.user.user_data!=null)this.members.setMyID(this.pusher.user.user_data.id);else{let L=E.buildLogSuffix("authorizationEndpoint");et.error(`Invalid auth response for channel '${this.name}', expected 'channel_data' field. ${L}, or the user should be signed in.`),c("Invalid auth response");return}c(d,g)}))}handleEvent(s){var c=s.event;if(c.indexOf("pusher_internal:")===0)this.handleInternalEvent(s);else{var d=s.data,g={};s.user_id&&(g.user_id=s.user_id),this.emit(c,d,g)}}handleInternalEvent(s){var c=s.event,d=s.data;switch(c){case"pusher_internal:subscription_succeeded":this.handleSubscriptionSucceededEvent(s);break;case"pusher_internal:subscription_count":this.handleSubscriptionCountEvent(s);break;case"pusher_internal:member_added":var g=this.members.addMember(d);this.emit("pusher:member_added",g);break;case"pusher_internal:member_removed":var S=this.members.removeMember(d);S&&this.emit("pusher:member_removed",S);break}}handleSubscriptionSucceededEvent(s){this.subscriptionPending=!1,this.subscribed=!0,this.subscriptionCancelled?this.pusher.unsubscribe(this.name):(this.members.onSubscription(s.data),this.emit("pusher:subscription_succeeded",this.members))}disconnect(){this.members.reset(),super.disconnect()}}var be=r(1),Jt=r(0);class Lt extends ${constructor(s,c,d){super(s,c),this.key=null,this.nacl=d}authorize(s,c){super.authorize(s,(d,g)=>{if(d){c(d,g);return}let S=g.shared_secret;if(!S){c(new Error(`No shared_secret key in auth payload for encrypted channel: ${this.name}`),null);return}this.key=Object(Jt.decode)(S),delete g.shared_secret,c(null,g)})}trigger(s,c){throw new j("Client events are not currently supported for encrypted channels")}handleEvent(s){var c=s.event,d=s.data;if(c.indexOf("pusher_internal:")===0||c.indexOf("pusher:")===0){super.handleEvent(s);return}this.handleEncryptedEvent(c,d)}handleEncryptedEvent(s,c){if(!this.key){et.debug("Received encrypted event before key has been retrieved from the authEndpoint");return}if(!c.ciphertext||!c.nonce){et.error("Unexpected format for encrypted event, expected object with `ciphertext` and `nonce` fields, got: "+c);return}let d=Object(Jt.decode)(c.ciphertext);if(d.length<this.nacl.secretbox.overheadLength){et.error(`Expected encrypted event ciphertext length to be ${this.nacl.secretbox.overheadLength}, got: ${d.length}`);return}let g=Object(Jt.decode)(c.nonce);if(g.length<this.nacl.secretbox.nonceLength){et.error(`Expected encrypted event nonce length to be ${this.nacl.secretbox.nonceLength}, got: ${g.length}`);return}let S=this.nacl.secretbox.open(d,g,this.key);if(S===null){et.debug("Failed to decrypt an event, probably because it was encrypted with a different key. Fetching a new key from the authEndpoint..."),this.authorize(this.pusher.connection.socket_id,(L,B)=>{if(L){et.error(`Failed to make a request to the authEndpoint: ${B}. Unable to fetch new key, so dropping encrypted event`);return}if(S=this.nacl.secretbox.open(d,g,this.key),S===null){et.error("Failed to decrypt event with new key. Dropping encrypted event");return}this.emit(s,this.getDataToEmit(S))});return}this.emit(s,this.getDataToEmit(S))}getDataToEmit(s){let c=Object(be.decode)(s);try{return JSON.parse(c)}catch{return c}}}class bi extends Et{constructor(s,c){super(),this.state="initialized",this.connection=null,this.key=s,this.options=c,this.timeline=this.options.timeline,this.usingTLS=this.options.useTLS,this.errorCallbacks=this.buildErrorCallbacks(),this.connectionCallbacks=this.buildConnectionCallbacks(this.errorCallbacks),this.handshakeCallbacks=this.buildHandshakeCallbacks(this.errorCallbacks);var d=J.getNetwork();d.bind("online",()=>{this.timeline.info({netinfo:"online"}),(this.state==="connecting"||this.state==="unavailable")&&this.retryIn(0)}),d.bind("offline",()=>{this.timeline.info({netinfo:"offline"}),this.connection&&this.sendActivityCheck()}),this.updateStrategy()}connect(){if(!(this.connection||this.runner)){if(!this.strategy.isSupported()){this.updateState("failed");return}this.updateState("connecting"),this.startConnecting(),this.setUnavailableTimer()}}send(s){return this.connection?this.connection.send(s):!1}send_event(s,c,d){return this.connection?this.connection.send_event(s,c,d):!1}disconnect(){this.disconnectInternally(),this.updateState("disconnected")}isUsingTLS(){return this.usingTLS}startConnecting(){var s=(c,d)=>{c?this.runner=this.strategy.connect(0,s):d.action==="error"?(this.emit("error",{type:"HandshakeError",error:d.error}),this.timeline.error({handshakeError:d.error})):(this.abortConnecting(),this.handshakeCallbacks[d.action](d))};this.runner=this.strategy.connect(0,s)}abortConnecting(){this.runner&&(this.runner.abort(),this.runner=null)}disconnectInternally(){if(this.abortConnecting(),this.clearRetryTimer(),this.clearUnavailableTimer(),this.connection){var s=this.abandonConnection();s.close()}}updateStrategy(){this.strategy=this.options.getStrategy({key:this.key,timeline:this.timeline,useTLS:this.usingTLS})}retryIn(s){this.timeline.info({action:"retry",delay:s}),s>0&&this.emit("connecting_in",Math.round(s/1e3)),this.retryTimer=new ut(s||0,()=>{this.disconnectInternally(),this.connect()})}clearRetryTimer(){this.retryTimer&&(this.retryTimer.ensureAborted(),this.retryTimer=null)}setUnavailableTimer(){this.unavailableTimer=new ut(this.options.unavailableTimeout,()=>{this.updateState("unavailable")})}clearUnavailableTimer(){this.unavailableTimer&&this.unavailableTimer.ensureAborted()}sendActivityCheck(){this.stopActivityCheck(),this.connection.ping(),this.activityTimer=new ut(this.options.pongTimeout,()=>{this.timeline.error({pong_timed_out:this.options.pongTimeout}),this.retryIn(0)})}resetActivityCheck(){this.stopActivityCheck(),this.connection&&!this.connection.handlesActivityChecks()&&(this.activityTimer=new ut(this.activityTimeout,()=>{this.sendActivityCheck()}))}stopActivityCheck(){this.activityTimer&&this.activityTimer.ensureAborted()}buildConnectionCallbacks(s){return G({},s,{message:c=>{this.resetActivityCheck(),this.emit("message",c)},ping:()=>{this.send_event("pusher:pong",{})},activity:()=>{this.resetActivityCheck()},error:c=>{this.emit("error",c)},closed:()=>{this.abandonConnection(),this.shouldRetry()&&this.retryIn(1e3)}})}buildHandshakeCallbacks(s){return G({},s,{connected:c=>{this.activityTimeout=Math.min(this.options.activityTimeout,c.activityTimeout,c.connection.activityTimeout||1/0),this.clearUnavailableTimer(),this.setConnection(c.connection),this.socket_id=this.connection.id,this.updateState("connected",{socket_id:this.socket_id})}})}buildErrorCallbacks(){let s=c=>d=>{d.error&&this.emit("error",{type:"WebSocketError",error:d.error}),c(d)};return{tls_only:s(()=>{this.usingTLS=!0,this.updateStrategy(),this.retryIn(0)}),refused:s(()=>{this.disconnect()}),backoff:s(()=>{this.retryIn(1e3)}),retry:s(()=>{this.retryIn(0)})}}setConnection(s){this.connection=s;for(var c in this.connectionCallbacks)this.connection.bind(c,this.connectionCallbacks[c]);this.resetActivityCheck()}abandonConnection(){if(this.connection){this.stopActivityCheck();for(var s in this.connectionCallbacks)this.connection.unbind(s,this.connectionCallbacks[s]);var c=this.connection;return this.connection=null,c}}updateState(s,c){var d=this.state;if(this.state=s,d!==s){var g=s;g==="connected"&&(g+=" with new socket ID "+c.socket_id),et.debug("State changed",d+" -> "+g),this.timeline.info({state:s,params:c}),this.emit("state_change",{previous:d,current:s}),this.emit(s,c)}}shouldRetry(){return this.state==="connecting"||this.state==="connected"}}class vi{constructor(){this.channels={}}add(s,c){return this.channels[s]||(this.channels[s]=mc(s,c)),this.channels[s]}all(){return Ke(this.channels)}find(s){return this.channels[s]}remove(s){var c=this.channels[s];return delete this.channels[s],c}disconnect(){Rt(this.channels,function(s){s.disconnect()})}}function mc(l,s){if(l.indexOf("private-encrypted-")===0){if(s.config.nacl)return Re.createEncryptedChannel(l,s,s.config.nacl);let c="Tried to subscribe to a private-encrypted- channel but no nacl implementation available",d=E.buildLogSuffix("encryptedChannelSupport");throw new j(`${c}. ${d}`)}else{if(l.indexOf("private-")===0)return Re.createPrivateChannel(l,s);if(l.indexOf("presence-")===0)return Re.createPresenceChannel(l,s);if(l.indexOf("#")===0)throw new T('Cannot create a channel with name "'+l+'".');return Re.createChannel(l,s)}}var bc={createChannels(){return new vi},createConnectionManager(l,s){return new bi(l,s)},createChannel(l,s){return new O(l,s)},createPrivateChannel(l,s){return new $(l,s)},createPresenceChannel(l,s){return new mt(l,s)},createEncryptedChannel(l,s,c){return new Lt(l,s,c)},createTimelineSender(l,s){return new F(l,s)},createHandshake(l,s){return new m(l,s)},createAssistantToTheTransportManager(l,s,c){return new me(l,s,c)}},Re=bc;class Mo{constructor(s){this.options=s||{},this.livesLeft=this.options.lives||1/0}getAssistant(s){return Re.createAssistantToTheTransportManager(this,s,{minPingDelay:this.options.minPingDelay,maxPingDelay:this.options.maxPingDelay})}isAlive(){return this.livesLeft>0}reportDeath(){this.livesLeft-=1}}class en{constructor(s,c){this.strategies=s,this.loop=!!c.loop,this.failFast=!!c.failFast,this.timeout=c.timeout,this.timeoutLimit=c.timeoutLimit}isSupported(){return le(this.strategies,ft.method("isSupported"))}connect(s,c){var d=this.strategies,g=0,S=this.timeout,L=null,B=(V,st)=>{st?c(null,st):(g=g+1,this.loop&&(g=g%d.length),g<d.length?(S&&(S=S*2,this.timeoutLimit&&(S=Math.min(S,this.timeoutLimit))),L=this.tryStrategy(d[g],s,{timeout:S,failFast:this.failFast},B)):c(!0))};return L=this.tryStrategy(d[g],s,{timeout:S,failFast:this.failFast},B),{abort:function(){L.abort()},forceMinPriority:function(V){s=V,L&&L.forceMinPriority(V)}}}tryStrategy(s,c,d,g){var S=null,L=null;return d.timeout>0&&(S=new ut(d.timeout,function(){L.abort(),g(!0)})),L=s.connect(c,function(B,V){B&&S&&S.isRunning()&&!d.failFast||(S&&S.ensureAborted(),g(B,V))}),{abort:function(){S&&S.ensureAborted(),L.abort()},forceMinPriority:function(B){L.forceMinPriority(B)}}}}class tr{constructor(s){this.strategies=s}isSupported(){return le(this.strategies,ft.method("isSupported"))}connect(s,c){return vc(this.strategies,s,function(d,g){return function(S,L){if(g[d].error=S,S){yc(g)&&c(!0);return}Zt(g,function(B){B.forceMinPriority(L.transport.priority)}),c(null,L)}})}}function vc(l,s,c){var d=pe(l,function(g,S,L,B){return g.connect(s,c(S,B))});return{abort:function(){Zt(d,Ac)},forceMinPriority:function(g){Zt(d,function(S){S.forceMinPriority(g)})}}}function yc(l){return ge(l,function(s){return!!s.error})}function Ac(l){!l.error&&!l.aborted&&(l.abort(),l.aborted=!0)}class wc{constructor(s,c,d){this.strategy=s,this.transports=c,this.ttl=d.ttl||1800*1e3,this.usingTLS=d.useTLS,this.timeline=d.timeline}isSupported(){return this.strategy.isSupported()}connect(s,c){var d=this.usingTLS,g=Cc(d),S=g&&g.cacheSkipCount?g.cacheSkipCount:0,L=[this.strategy];if(g&&g.timestamp+this.ttl>=ft.now()){var B=this.transports[g.transport];B&&(["ws","wss"].includes(g.transport)||S>3?(this.timeline.info({cached:!0,transport:g.transport,latency:g.latency}),L.push(new en([B],{timeout:g.latency*2+1e3,failFast:!0}))):S++)}var V=ft.now(),st=L.pop().connect(s,function ct(wt,wi){wt?(No(d),L.length>0?(V=ft.now(),st=L.pop().connect(s,ct)):c(wt)):(xc(d,wi.transport.name,ft.now()-V,S),c(null,wi))});return{abort:function(){st.abort()},forceMinPriority:function(ct){s=ct,st&&st.forceMinPriority(ct)}}}}function er(l){return"pusherTransport"+(l?"TLS":"NonTLS")}function Cc(l){var s=J.getLocalStorage();if(s)try{var c=s[er(l)];if(c)return JSON.parse(c)}catch{No(l)}return null}function xc(l,s,c,d){var g=J.getLocalStorage();if(g)try{g[er(l)]=ue({timestamp:ft.now(),transport:s,latency:c,cacheSkipCount:d})}catch{}}function No(l){var s=J.getLocalStorage();if(s)try{delete s[er(l)]}catch{}}class yi{constructor(s,{delay:c}){this.strategy=s,this.options={delay:c}}isSupported(){return this.strategy.isSupported()}connect(s,c){var d=this.strategy,g,S=new ut(this.options.delay,function(){g=d.connect(s,c)});return{abort:function(){S.ensureAborted(),g&&g.abort()},forceMinPriority:function(L){s=L,g&&g.forceMinPriority(L)}}}}class qn{constructor(s,c,d){this.test=s,this.trueBranch=c,this.falseBranch=d}isSupported(){var s=this.test()?this.trueBranch:this.falseBranch;return s.isSupported()}connect(s,c){var d=this.test()?this.trueBranch:this.falseBranch;return d.connect(s,c)}}class Sc{constructor(s){this.strategy=s}isSupported(){return this.strategy.isSupported()}connect(s,c){var d=this.strategy.connect(s,function(g,S){S&&d.abort(),c(g,S)});return d}}function Wn(l){return function(){return l.isSupported()}}var kc=function(l,s,c){var d={};function g(Jo,Sl,kl,El,Tl){var Yo=c(l,Jo,Sl,kl,El,Tl);return d[Jo]=Yo,Yo}var S=Object.assign({},s,{hostNonTLS:l.wsHost+":"+l.wsPort,hostTLS:l.wsHost+":"+l.wssPort,httpPath:l.wsPath}),L=Object.assign({},S,{useTLS:!0}),B=Object.assign({},s,{hostNonTLS:l.httpHost+":"+l.httpPort,hostTLS:l.httpHost+":"+l.httpsPort,httpPath:l.httpPath}),V={loop:!0,timeout:15e3,timeoutLimit:6e4},st=new Mo({minPingDelay:1e4,maxPingDelay:l.activityTimeout}),ct=new Mo({lives:2,minPingDelay:1e4,maxPingDelay:l.activityTimeout}),wt=g("ws","ws",3,S,st),wi=g("wss","ws",3,L,st),yl=g("sockjs","sockjs",1,B),Uo=g("xhr_streaming","xhr_streaming",1,B,ct),Al=g("xdr_streaming","xdr_streaming",1,B,ct),Ho=g("xhr_polling","xhr_polling",1,B),wl=g("xdr_polling","xdr_polling",1,B),qo=new en([wt],V),Cl=new en([wi],V),xl=new en([yl],V),Wo=new en([new qn(Wn(Uo),Uo,Al)],V),zo=new en([new qn(Wn(Ho),Ho,wl)],V),Vo=new en([new qn(Wn(Wo),new tr([Wo,new yi(zo,{delay:4e3})]),zo)],V),or=new qn(Wn(Vo),Vo,xl),sr;return s.useTLS?sr=new tr([qo,new yi(or,{delay:2e3})]):sr=new tr([qo,new yi(Cl,{delay:2e3}),new yi(or,{delay:5e3})]),new wc(new Sc(new qn(Wn(wt),sr,or)),d,{ttl:18e5,timeline:s.timeline,useTLS:s.useTLS})},Ec=kc,Tc=function(){var l=this;l.timeline.info(l.buildTimelineMessage({transport:l.name+(l.options.useTLS?"s":"")})),l.hooks.isInitialized()?l.changeState("initialized"):l.hooks.file?(l.changeState("initializing"),k.load(l.hooks.file,{useTLS:l.options.useTLS},function(s,c){l.hooks.isInitialized()?(l.changeState("initialized"),c(!0)):(s&&l.onError(s),l.onClose(),c(!1))})):l.onClose()},Dc={getRequest:function(l){var s=new window.XDomainRequest;return s.ontimeout=function(){l.emit("error",new P),l.close()},s.onerror=function(c){l.emit("error",c),l.close()},s.onprogress=function(){s.responseText&&s.responseText.length>0&&l.onChunk(200,s.responseText)},s.onload=function(){s.responseText&&s.responseText.length>0&&l.onChunk(200,s.responseText),l.emit("finished",200),l.close()},s},abortRequest:function(l){l.ontimeout=l.onerror=l.onprogress=l.onload=null,l.abort()}},Rc=Dc;const Lc=256*1024;class _c extends Et{constructor(s,c,d){super(),this.hooks=s,this.method=c,this.url=d}start(s){this.position=0,this.xhr=this.hooks.getRequest(this),this.unloader=()=>{this.close()},J.addUnloadListener(this.unloader),this.xhr.open(this.method,this.url,!0),this.xhr.setRequestHeader&&this.xhr.setRequestHeader("Content-Type","application/json"),this.xhr.send(s)}close(){this.unloader&&(J.removeUnloadListener(this.unloader),this.unloader=null),this.xhr&&(this.hooks.abortRequest(this.xhr),this.xhr=null)}onChunk(s,c){for(;;){var d=this.advanceBuffer(c);if(d)this.emit("chunk",{status:s,data:d});else break}this.isBufferTooLong(c)&&this.emit("buffer_too_long")}advanceBuffer(s){var c=s.slice(this.position),d=c.indexOf(`
`);return d!==-1?(this.position+=d+1,c.slice(0,d)):null}isBufferTooLong(s){return this.position===s.length&&s.length>Lc}}var nr;(function(l){l[l.CONNECTING=0]="CONNECTING",l[l.OPEN=1]="OPEN",l[l.CLOSED=3]="CLOSED"})(nr||(nr={}));var nn=nr,Oc=1;class Pc{constructor(s,c){this.hooks=s,this.session=Fo(1e3)+"/"+Fc(8),this.location=Mc(c),this.readyState=nn.CONNECTING,this.openStream()}send(s){return this.sendRaw(JSON.stringify([s]))}ping(){this.hooks.sendHeartbeat(this)}close(s,c){this.onClose(s,c,!0)}sendRaw(s){if(this.readyState===nn.OPEN)try{return J.createSocketRequest("POST",Io(Nc(this.location,this.session))).start(s),!0}catch{return!1}else return!1}reconnect(){this.closeStream(),this.openStream()}onClose(s,c,d){this.closeStream(),this.readyState=nn.CLOSED,this.onclose&&this.onclose({code:s,reason:c,wasClean:d})}onChunk(s){if(s.status===200){this.readyState===nn.OPEN&&this.onActivity();var c,d=s.data.slice(0,1);switch(d){case"o":c=JSON.parse(s.data.slice(1)||"{}"),this.onOpen(c);break;case"a":c=JSON.parse(s.data.slice(1)||"[]");for(var g=0;g<c.length;g++)this.onEvent(c[g]);break;case"m":c=JSON.parse(s.data.slice(1)||"null"),this.onEvent(c);break;case"h":this.hooks.onHeartbeat(this);break;case"c":c=JSON.parse(s.data.slice(1)||"[]"),this.onClose(c[0],c[1],!0);break}}}onOpen(s){this.readyState===nn.CONNECTING?(s&&s.hostname&&(this.location.base=Ic(this.location.base,s.hostname)),this.readyState=nn.OPEN,this.onopen&&this.onopen()):this.onClose(1006,"Server lost session",!0)}onEvent(s){this.readyState===nn.OPEN&&this.onmessage&&this.onmessage({data:s})}onActivity(){this.onactivity&&this.onactivity()}onError(s){this.onerror&&this.onerror(s)}openStream(){this.stream=J.createSocketRequest("POST",Io(this.hooks.getReceiveURL(this.location,this.session))),this.stream.bind("chunk",s=>{this.onChunk(s)}),this.stream.bind("finished",s=>{this.hooks.onFinished(this,s)}),this.stream.bind("buffer_too_long",()=>{this.reconnect()});try{this.stream.start()}catch(s){ft.defer(()=>{this.onError(s),this.onClose(1006,"Could not start streaming",!1)})}}closeStream(){this.stream&&(this.stream.unbind_all(),this.stream.close(),this.stream=null)}}function Mc(l){var s=/([^\?]*)\/*(\??.*)/.exec(l);return{base:s[1],queryString:s[2]}}function Nc(l,s){return l.base+"/"+s+"/xhr_send"}function Io(l){var s=l.indexOf("?")===-1?"?":"&";return l+s+"t="+ +new Date+"&n="+Oc++}function Ic(l,s){var c=/(https?:\/\/)([^\/:]+)((\/|:)?.*)/.exec(l);return c[1]+s+c[3]}function Fo(l){return J.randomInt(l)}function Fc(l){for(var s=[],c=0;c<l;c++)s.push(Fo(32).toString(32));return s.join("")}var Bc=Pc,jc={getReceiveURL:function(l,s){return l.base+"/"+s+"/xhr_streaming"+l.queryString},onHeartbeat:function(l){l.sendRaw("[]")},sendHeartbeat:function(l){l.sendRaw("[]")},onFinished:function(l,s){l.onClose(1006,"Connection interrupted ("+s+")",!1)}},Uc=jc,Hc={getReceiveURL:function(l,s){return l.base+"/"+s+"/xhr"+l.queryString},onHeartbeat:function(){},sendHeartbeat:function(l){l.sendRaw("[]")},onFinished:function(l,s){s===200?l.reconnect():l.onClose(1006,"Connection interrupted ("+s+")",!1)}},qc=Hc,Wc={getRequest:function(l){var s=J.getXHRAPI(),c=new s;return c.onreadystatechange=c.onprogress=function(){switch(c.readyState){case 3:c.responseText&&c.responseText.length>0&&l.onChunk(c.status,c.responseText);break;case 4:c.responseText&&c.responseText.length>0&&l.onChunk(c.status,c.responseText),l.emit("finished",c.status),l.close();break}},c},abortRequest:function(l){l.onreadystatechange=null,l.abort()}},zc=Wc,Vc={createStreamingSocket(l){return this.createSocket(Uc,l)},createPollingSocket(l){return this.createSocket(qc,l)},createSocket(l,s){return new Bc(l,s)},createXHR(l,s){return this.createRequest(zc,l,s)},createRequest(l,s,c){return new _c(l,s,c)}},Bo=Vc;Bo.createXDR=function(l,s){return this.createRequest(Rc,l,s)};var Jc=Bo,Yc={nextAuthCallbackID:1,auth_callbacks:{},ScriptReceivers:a,DependenciesReceivers:y,getDefaultStrategy:Ec,Transports:Ft,transportConnectionInitializer:Tc,HTTPFactory:Jc,TimelineTransport:Ee,getXHRAPI(){return window.XMLHttpRequest},getWebSocketAPI(){return window.WebSocket||window.MozWebSocket},setup(l){window.Pusher=l;var s=()=>{this.onDocumentBody(l.ready)};window.JSON?s():k.load("json2",{},s)},getDocument(){return document},getProtocol(){return this.getDocument().location.protocol},getAuthorizers(){return{ajax:Ot,jsonp:Ge}},onDocumentBody(l){document.body?l():setTimeout(()=>{this.onDocumentBody(l)},0)},createJSONPRequest(l,s){return new Qe(l,s)},createScriptRequest(l){return new xn(l)},getLocalStorage(){try{return window.localStorage}catch{return}},createXHR(){return this.getXHRAPI()?this.createXMLHttpRequest():this.createMicrosoftXHR()},createXMLHttpRequest(){var l=this.getXHRAPI();return new l},createMicrosoftXHR(){return new ActiveXObject("Microsoft.XMLHTTP")},getNetwork(){return Se},createWebSocket(l){var s=this.getWebSocketAPI();return new s(l)},createSocketRequest(l,s){if(this.isXHRSupported())return this.HTTPFactory.createXHR(l,s);if(this.isXDRSupported(s.indexOf("https:")===0))return this.HTTPFactory.createXDR(l,s);throw"Cross-origin HTTP requests are not supported"},isXHRSupported(){var l=this.getXHRAPI();return!!l&&new l().withCredentials!==void 0},isXDRSupported(l){var s=l?"https:":"http:",c=this.getProtocol();return!!window.XDomainRequest&&c===s},addUnloadListener(l){window.addEventListener!==void 0?window.addEventListener("unload",l,!1):window.attachEvent!==void 0&&window.attachEvent("onunload",l)},removeUnloadListener(l){window.addEventListener!==void 0?window.removeEventListener("unload",l,!1):window.detachEvent!==void 0&&window.detachEvent("onunload",l)},randomInt(l){return Math.floor(function(){return(window.crypto||window.msCrypto).getRandomValues(new Uint32Array(1))[0]/Math.pow(2,32)}()*l)}},J=Yc,ir;(function(l){l[l.ERROR=3]="ERROR",l[l.INFO=6]="INFO",l[l.DEBUG=7]="DEBUG"})(ir||(ir={}));var Ai=ir;class Kc{constructor(s,c,d){this.key=s,this.session=c,this.events=[],this.options=d||{},this.sent=0,this.uniqueID=0}log(s,c){s<=this.options.level&&(this.events.push(G({},c,{timestamp:ft.now()})),this.options.limit&&this.events.length>this.options.limit&&this.events.shift())}error(s){this.log(Ai.ERROR,s)}info(s){this.log(Ai.INFO,s)}debug(s){this.log(Ai.DEBUG,s)}isEmpty(){return this.events.length===0}send(s,c){var d=G({session:this.session,bundle:this.sent+1,key:this.key,lib:"js",version:this.options.version,cluster:this.options.cluster,features:this.options.features,timeline:this.events},this.options.params);return this.events=[],s(d,(g,S)=>{g||this.sent++,c&&c(g,S)}),!0}generateUniqueID(){return this.uniqueID++,this.uniqueID}}class $c{constructor(s,c,d,g){this.name=s,this.priority=c,this.transport=d,this.options=g||{}}isSupported(){return this.transport.isSupported({useTLS:this.options.useTLS})}connect(s,c){if(this.isSupported()){if(this.priority<s)return jo(new U,c)}else return jo(new rt,c);var d=!1,g=this.transport.createConnection(this.name,this.priority,this.options.key,this.options),S=null,L=function(){g.unbind("initialized",L),g.connect()},B=function(){S=Re.createHandshake(g,function(wt){d=!0,ct(),c(null,wt)})},V=function(wt){ct(),c(wt)},st=function(){ct();var wt;wt=ue(g),c(new q(wt))},ct=function(){g.unbind("initialized",L),g.unbind("open",B),g.unbind("error",V),g.unbind("closed",st)};return g.bind("initialized",L),g.bind("open",B),g.bind("error",V),g.bind("closed",st),g.initialize(),{abort:()=>{d||(ct(),S?S.close():g.close())},forceMinPriority:wt=>{d||this.priority<wt&&(S?S.close():g.close())}}}}function jo(l,s){return ft.defer(function(){s(l)}),{abort:function(){},forceMinPriority:function(){}}}const{Transports:Xc}=J;var Gc=function(l,s,c,d,g,S){var L=Xc[c];if(!L)throw new Q(c);var B=(!l.enabledTransports||Wt(l.enabledTransports,s)!==-1)&&(!l.disabledTransports||Wt(l.disabledTransports,s)===-1),V;return B?(g=Object.assign({ignoreNullOrigin:l.ignoreNullOrigin},g),V=new $c(s,d,S?S.getAssistant(L):L,g)):V=Qc,V},Qc={isSupported:function(){return!1},connect:function(l,s){var c=ft.defer(function(){s(new rt)});return{abort:function(){c.ensureAborted()},forceMinPriority:function(){}}}};function Zc(l){if(l==null)throw"You must pass an options object";if(l.cluster==null)throw"Options object must provide a cluster";"disableStats"in l&&et.warn("The disableStats option is deprecated in favor of enableStats")}const tl=(l,s)=>{var c="socket_id="+encodeURIComponent(l.socketId);for(var d in s.params)c+="&"+encodeURIComponent(d)+"="+encodeURIComponent(s.params[d]);if(s.paramsProvider!=null){let g=s.paramsProvider();for(var d in g)c+="&"+encodeURIComponent(d)+"="+encodeURIComponent(g[d])}return c};var el=l=>{if(typeof J.getAuthorizers()[l.transport]>"u")throw`'${l.transport}' is not a recognized auth transport`;return(s,c)=>{const d=tl(s,l);J.getAuthorizers()[l.transport](J,d,l,C.UserAuthentication,c)}};const nl=(l,s)=>{var c="socket_id="+encodeURIComponent(l.socketId);c+="&channel_name="+encodeURIComponent(l.channelName);for(var d in s.params)c+="&"+encodeURIComponent(d)+"="+encodeURIComponent(s.params[d]);if(s.paramsProvider!=null){let g=s.paramsProvider();for(var d in g)c+="&"+encodeURIComponent(d)+"="+encodeURIComponent(g[d])}return c};var il=l=>{if(typeof J.getAuthorizers()[l.transport]>"u")throw`'${l.transport}' is not a recognized auth transport`;return(s,c)=>{const d=nl(s,l);J.getAuthorizers()[l.transport](J,d,l,C.ChannelAuthorization,c)}};const rl=(l,s,c)=>{const d={authTransport:s.transport,authEndpoint:s.endpoint,auth:{params:s.params,headers:s.headers}};return(g,S)=>{const L=l.channel(g.channelName);c(L,d).authorize(g.socketId,S)}};function ol(l,s){let c={activityTimeout:l.activityTimeout||p.activityTimeout,cluster:l.cluster,httpPath:l.httpPath||p.httpPath,httpPort:l.httpPort||p.httpPort,httpsPort:l.httpsPort||p.httpsPort,pongTimeout:l.pongTimeout||p.pongTimeout,statsHost:l.statsHost||p.stats_host,unavailableTimeout:l.unavailableTimeout||p.unavailableTimeout,wsPath:l.wsPath||p.wsPath,wsPort:l.wsPort||p.wsPort,wssPort:l.wssPort||p.wssPort,enableStats:ul(l),httpHost:sl(l),useTLS:ll(l),wsHost:al(l),userAuthenticator:hl(l),channelAuthorizer:fl(l,s)};return"disabledTransports"in l&&(c.disabledTransports=l.disabledTransports),"enabledTransports"in l&&(c.enabledTransports=l.enabledTransports),"ignoreNullOrigin"in l&&(c.ignoreNullOrigin=l.ignoreNullOrigin),"timelineParams"in l&&(c.timelineParams=l.timelineParams),"nacl"in l&&(c.nacl=l.nacl),c}function sl(l){return l.httpHost?l.httpHost:l.cluster?`sockjs-${l.cluster}.pusher.com`:p.httpHost}function al(l){return l.wsHost?l.wsHost:cl(l.cluster)}function cl(l){return`ws-${l}.pusher.com`}function ll(l){return J.getProtocol()==="https:"?!0:l.forceTLS!==!1}function ul(l){return"enableStats"in l?l.enableStats:"disableStats"in l?!l.disableStats:!1}function hl(l){const s=Object.assign(Object.assign({},p.userAuthentication),l.userAuthentication);return"customHandler"in s&&s.customHandler!=null?s.customHandler:el(s)}function dl(l,s){let c;return"channelAuthorization"in l?c=Object.assign(Object.assign({},p.channelAuthorization),l.channelAuthorization):(c={transport:l.authTransport||p.authTransport,endpoint:l.authEndpoint||p.authEndpoint},"auth"in l&&("params"in l.auth&&(c.params=l.auth.params),"headers"in l.auth&&(c.headers=l.auth.headers)),"authorizer"in l&&(c.customHandler=rl(s,c,l.authorizer))),c}function fl(l,s){const c=dl(l,s);return"customHandler"in c&&c.customHandler!=null?c.customHandler:il(c)}class pl extends Et{constructor(s){super(function(c,d){et.debug(`No callbacks on watchlist events for ${c}`)}),this.pusher=s,this.bindWatchlistInternalEvent()}handleEvent(s){s.data.events.forEach(c=>{this.emit(c.name,c)})}bindWatchlistInternalEvent(){this.pusher.connection.bind("message",s=>{var c=s.event;c==="pusher_internal:watchlist_events"&&this.handleEvent(s)})}}function gl(){let l,s;return{promise:new Promise((d,g)=>{l=d,s=g}),resolve:l,reject:s}}var ml=gl;class bl extends Et{constructor(s){super(function(c,d){et.debug("No callbacks on user for "+c)}),this.signin_requested=!1,this.user_data=null,this.serverToUserChannel=null,this.signinDonePromise=null,this._signinDoneResolve=null,this._onAuthorize=(c,d)=>{if(c){et.warn(`Error during signin: ${c}`),this._cleanup();return}this.pusher.send_event("pusher:signin",{auth:d.auth,user_data:d.user_data})},this.pusher=s,this.pusher.connection.bind("state_change",({previous:c,current:d})=>{c!=="connected"&&d==="connected"&&this._signin(),c==="connected"&&d!=="connected"&&(this._cleanup(),this._newSigninPromiseIfNeeded())}),this.watchlist=new pl(s),this.pusher.connection.bind("message",c=>{var d=c.event;d==="pusher:signin_success"&&this._onSigninSuccess(c.data),this.serverToUserChannel&&this.serverToUserChannel.name===c.channel&&this.serverToUserChannel.handleEvent(c)})}signin(){this.signin_requested||(this.signin_requested=!0,this._signin())}_signin(){this.signin_requested&&(this._newSigninPromiseIfNeeded(),this.pusher.connection.state==="connected"&&this.pusher.config.userAuthenticator({socketId:this.pusher.connection.socket_id},this._onAuthorize))}_onSigninSuccess(s){try{this.user_data=JSON.parse(s.user_data)}catch{et.error(`Failed parsing user data after signin: ${s.user_data}`),this._cleanup();return}if(typeof this.user_data.id!="string"||this.user_data.id===""){et.error(`user_data doesn't contain an id. user_data: ${this.user_data}`),this._cleanup();return}this._signinDoneResolve(),this._subscribeChannels()}_subscribeChannels(){const s=c=>{c.subscriptionPending&&c.subscriptionCancelled?c.reinstateSubscription():!c.subscriptionPending&&this.pusher.connection.state==="connected"&&c.subscribe()};this.serverToUserChannel=new O(`#server-to-user-${this.user_data.id}`,this.pusher),this.serverToUserChannel.bind_global((c,d)=>{c.indexOf("pusher_internal:")===0||c.indexOf("pusher:")===0||this.emit(c,d)}),s(this.serverToUserChannel)}_cleanup(){this.user_data=null,this.serverToUserChannel&&(this.serverToUserChannel.unbind_all(),this.serverToUserChannel.disconnect(),this.serverToUserChannel=null),this.signin_requested&&this._signinDoneResolve()}_newSigninPromiseIfNeeded(){if(!this.signin_requested||this.signinDonePromise&&!this.signinDonePromise.done)return;const{promise:s,resolve:c,reject:d}=ml();s.done=!1;const g=()=>{s.done=!0};s.then(g).catch(g),this.signinDonePromise=s,this._signinDoneResolve=c}}class _t{static ready(){_t.isReady=!0;for(var s=0,c=_t.instances.length;s<c;s++)_t.instances[s].connect()}static getClientFeatures(){return Ie(Fe({ws:J.Transports.ws},function(s){return s.isSupported({})}))}constructor(s,c){vl(s),Zc(c),this.key=s,this.config=ol(c,this),this.channels=Re.createChannels(),this.global_emitter=new Et,this.sessionID=J.randomInt(1e9),this.timeline=new Kc(this.key,this.sessionID,{cluster:this.config.cluster,features:_t.getClientFeatures(),params:this.config.timelineParams||{},limit:50,level:Ai.INFO,version:p.VERSION}),this.config.enableStats&&(this.timelineSender=Re.createTimelineSender(this.timeline,{host:this.config.statsHost,path:"/timeline/v2/"+J.TimelineTransport.name}));var d=g=>J.getDefaultStrategy(this.config,g,Gc);this.connection=Re.createConnectionManager(this.key,{getStrategy:d,timeline:this.timeline,activityTimeout:this.config.activityTimeout,pongTimeout:this.config.pongTimeout,unavailableTimeout:this.config.unavailableTimeout,useTLS:!!this.config.useTLS}),this.connection.bind("connected",()=>{this.subscribeAll(),this.timelineSender&&this.timelineSender.send(this.connection.isUsingTLS())}),this.connection.bind("message",g=>{var S=g.event,L=S.indexOf("pusher_internal:")===0;if(g.channel){var B=this.channel(g.channel);B&&B.handleEvent(g)}L||this.global_emitter.emit(g.event,g.data)}),this.connection.bind("connecting",()=>{this.channels.disconnect()}),this.connection.bind("disconnected",()=>{this.channels.disconnect()}),this.connection.bind("error",g=>{et.warn(g)}),_t.instances.push(this),this.timeline.info({instances:_t.instances.length}),this.user=new bl(this),_t.isReady&&this.connect()}channel(s){return this.channels.find(s)}allChannels(){return this.channels.all()}connect(){if(this.connection.connect(),this.timelineSender&&!this.timelineSenderTimer){var s=this.connection.isUsingTLS(),c=this.timelineSender;this.timelineSenderTimer=new wn(6e4,function(){c.send(s)})}}disconnect(){this.connection.disconnect(),this.timelineSenderTimer&&(this.timelineSenderTimer.ensureAborted(),this.timelineSenderTimer=null)}bind(s,c,d){return this.global_emitter.bind(s,c,d),this}unbind(s,c,d){return this.global_emitter.unbind(s,c,d),this}bind_global(s){return this.global_emitter.bind_global(s),this}unbind_global(s){return this.global_emitter.unbind_global(s),this}unbind_all(s){return this.global_emitter.unbind_all(),this}subscribeAll(){var s;for(s in this.channels.channels)this.channels.channels.hasOwnProperty(s)&&this.subscribe(s)}subscribe(s){var c=this.channels.add(s,this);return c.subscriptionPending&&c.subscriptionCancelled?c.reinstateSubscription():!c.subscriptionPending&&this.connection.state==="connected"&&c.subscribe(),c}unsubscribe(s){var c=this.channels.find(s);c&&c.subscriptionPending?c.cancelSubscription():(c=this.channels.remove(s),c&&c.subscribed&&c.unsubscribe())}send_event(s,c,d){return this.connection.send_event(s,c,d)}shouldUseTLS(){return this.config.useTLS}signin(){this.user.signin()}}_t.instances=[],_t.isReady=!1,_t.logToConsole=!1,_t.Runtime=J,_t.ScriptReceivers=J.ScriptReceivers,_t.DependenciesReceivers=J.DependenciesReceivers,_t.auth_callbacks=J.auth_callbacks;var rr=n.default=_t;function vl(l){if(l==null)throw"You must pass your app key when you instantiate Pusher."}J.setup(_t)}])})})(fc);var gf=fc.exports;const mf=pf(gf);window.Pusher=mf;window.Echo=new ff({broadcaster:"pusher",key:"321f18d0e7d2c73940a9",cluster:"mt1",forceTLS:!0});window.axios=Ct;window.axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";var Fr=["onChange","onClose","onDayCreate","onDestroy","onKeyDown","onMonthChange","onOpen","onParseConfig","onReady","onValueUpdate","onYearChange","onPreCalendarPosition"],Dn={_disable:[],allowInput:!1,allowInvalidPreload:!1,altFormat:"F j, Y",altInput:!1,altInputClass:"form-control input",animate:typeof window=="object"&&window.navigator.userAgent.indexOf("MSIE")===-1,ariaDateFormat:"F j, Y",autoFillDefaultTime:!0,clickOpens:!0,closeOnSelect:!0,conjunction:", ",dateFormat:"Y-m-d",defaultHour:12,defaultMinute:0,defaultSeconds:0,disable:[],disableMobile:!1,enableSeconds:!1,enableTime:!1,errorHandler:function(i){return typeof console<"u"&&console.warn(i)},getWeek:function(i){var e=new Date(i.getTime());e.setHours(0,0,0,0),e.setDate(e.getDate()+3-(e.getDay()+6)%7);var t=new Date(e.getFullYear(),0,4);return 1+Math.round(((e.getTime()-t.getTime())/864e5-3+(t.getDay()+6)%7)/7)},hourIncrement:1,ignoredFocusElements:[],inline:!1,locale:"default",minuteIncrement:5,mode:"single",monthSelectorType:"dropdown",nextArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M13.207 8.472l-7.854 7.854-0.707-0.707 7.146-7.146-7.146-7.148 0.707-0.707 7.854 7.854z' /></svg>",noCalendar:!1,now:new Date,onChange:[],onClose:[],onDayCreate:[],onDestroy:[],onKeyDown:[],onMonthChange:[],onOpen:[],onParseConfig:[],onReady:[],onValueUpdate:[],onYearChange:[],onPreCalendarPosition:[],plugins:[],position:"auto",positionElement:void 0,prevArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M5.207 8.471l7.146 7.147-0.707 0.707-7.853-7.854 7.854-7.853 0.707 0.707-7.147 7.146z' /></svg>",shorthandCurrentMonth:!1,showMonths:1,static:!1,time_24hr:!1,weekNumbers:!1,wrap:!1},di={weekdays:{shorthand:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longhand:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},months:{shorthand:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longhand:["January","February","March","April","May","June","July","August","September","October","November","December"]},daysInMonth:[31,28,31,30,31,30,31,31,30,31,30,31],firstDayOfWeek:0,ordinal:function(i){var e=i%100;if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},rangeSeparator:" to ",weekAbbreviation:"Wk",scrollTitle:"Scroll to increment",toggleTitle:"Click to toggle",amPM:["AM","PM"],yearAriaLabel:"Year",monthAriaLabel:"Month",hourAriaLabel:"Hour",minuteAriaLabel:"Minute",time_24hr:!1},Yt=function(i,e){return e===void 0&&(e=2),("000"+i).slice(e*-1)},he=function(i){return i===!0?1:0};function Vs(i,e){var t;return function(){var n=this,r=arguments;clearTimeout(t),t=setTimeout(function(){return i.apply(n,r)},e)}}var Br=function(i){return i instanceof Array?i:[i]};function jt(i,e,t){if(t===!0)return i.classList.add(e);i.classList.remove(e)}function at(i,e,t){var n=window.document.createElement(i);return e=e||"",t=t||"",n.className=e,t!==void 0&&(n.textContent=t),n}function Ti(i){for(;i.firstChild;)i.removeChild(i.firstChild)}function pc(i,e){if(e(i))return i;if(i.parentNode)return pc(i.parentNode,e)}function Di(i,e){var t=at("div","numInputWrapper"),n=at("input","numInput "+i),r=at("span","arrowUp"),o=at("span","arrowDown");if(navigator.userAgent.indexOf("MSIE 9.0")===-1?n.type="number":(n.type="text",n.pattern="\\d*"),e!==void 0)for(var a in e)n.setAttribute(a,e[a]);return t.appendChild(n),t.appendChild(r),t.appendChild(o),t}function ie(i){try{if(typeof i.composedPath=="function"){var e=i.composedPath();return e[0]}return i.target}catch{return i.target}}var jr=function(){},Wi=function(i,e,t){return t.months[e?"shorthand":"longhand"][i]},bf={D:jr,F:function(i,e,t){i.setMonth(t.months.longhand.indexOf(e))},G:function(i,e){i.setHours((i.getHours()>=12?12:0)+parseFloat(e))},H:function(i,e){i.setHours(parseFloat(e))},J:function(i,e){i.setDate(parseFloat(e))},K:function(i,e,t){i.setHours(i.getHours()%12+12*he(new RegExp(t.amPM[1],"i").test(e)))},M:function(i,e,t){i.setMonth(t.months.shorthand.indexOf(e))},S:function(i,e){i.setSeconds(parseFloat(e))},U:function(i,e){return new Date(parseFloat(e)*1e3)},W:function(i,e,t){var n=parseInt(e),r=new Date(i.getFullYear(),0,2+(n-1)*7,0,0,0,0);return r.setDate(r.getDate()-r.getDay()+t.firstDayOfWeek),r},Y:function(i,e){i.setFullYear(parseFloat(e))},Z:function(i,e){return new Date(e)},d:function(i,e){i.setDate(parseFloat(e))},h:function(i,e){i.setHours((i.getHours()>=12?12:0)+parseFloat(e))},i:function(i,e){i.setMinutes(parseFloat(e))},j:function(i,e){i.setDate(parseFloat(e))},l:jr,m:function(i,e){i.setMonth(parseFloat(e)-1)},n:function(i,e){i.setMonth(parseFloat(e)-1)},s:function(i,e){i.setSeconds(parseFloat(e))},u:function(i,e){return new Date(parseFloat(e))},w:jr,y:function(i,e){i.setFullYear(2e3+parseFloat(e))}},an={D:"",F:"",G:"(\\d\\d|\\d)",H:"(\\d\\d|\\d)",J:"(\\d\\d|\\d)\\w+",K:"",M:"",S:"(\\d\\d|\\d)",U:"(.+)",W:"(\\d\\d|\\d)",Y:"(\\d{4})",Z:"(.+)",d:"(\\d\\d|\\d)",h:"(\\d\\d|\\d)",i:"(\\d\\d|\\d)",j:"(\\d\\d|\\d)",l:"",m:"(\\d\\d|\\d)",n:"(\\d\\d|\\d)",s:"(\\d\\d|\\d)",u:"(.+)",w:"(\\d\\d|\\d)",y:"(\\d{2})"},ai={Z:function(i){return i.toISOString()},D:function(i,e,t){return e.weekdays.shorthand[ai.w(i,e,t)]},F:function(i,e,t){return Wi(ai.n(i,e,t)-1,!1,e)},G:function(i,e,t){return Yt(ai.h(i,e,t))},H:function(i){return Yt(i.getHours())},J:function(i,e){return e.ordinal!==void 0?i.getDate()+e.ordinal(i.getDate()):i.getDate()},K:function(i,e){return e.amPM[he(i.getHours()>11)]},M:function(i,e){return Wi(i.getMonth(),!0,e)},S:function(i){return Yt(i.getSeconds())},U:function(i){return i.getTime()/1e3},W:function(i,e,t){return t.getWeek(i)},Y:function(i){return Yt(i.getFullYear(),4)},d:function(i){return Yt(i.getDate())},h:function(i){return i.getHours()%12?i.getHours()%12:12},i:function(i){return Yt(i.getMinutes())},j:function(i){return i.getDate()},l:function(i,e){return e.weekdays.longhand[i.getDay()]},m:function(i){return Yt(i.getMonth()+1)},n:function(i){return i.getMonth()+1},s:function(i){return i.getSeconds()},u:function(i){return i.getTime()},w:function(i){return i.getDay()},y:function(i){return String(i.getFullYear()).substring(2)}},gc=function(i){var e=i.config,t=e===void 0?Dn:e,n=i.l10n,r=n===void 0?di:n,o=i.isMobile,a=o===void 0?!1:o;return function(u,p,v){var y=v||r;return t.formatDate!==void 0&&!a?t.formatDate(u,p,y):p.split("").map(function(k,D,_){return ai[k]&&_[D-1]!=="\\"?ai[k](u,y,t):k!=="\\"?k:""}).join("")}},ho=function(i){var e=i.config,t=e===void 0?Dn:e,n=i.l10n,r=n===void 0?di:n;return function(o,a,u,p){if(!(o!==0&&!o)){var v=p||r,y,k=o;if(o instanceof Date)y=new Date(o.getTime());else if(typeof o!="string"&&o.toFixed!==void 0)y=new Date(o);else if(typeof o=="string"){var D=a||(t||Dn).dateFormat,_=String(o).trim();if(_==="today")y=new Date,u=!0;else if(t&&t.parseDate)y=t.parseDate(o,D);else if(/Z$/.test(_)||/GMT$/.test(_))y=new Date(o);else{for(var E=void 0,C=[],A=0,T=0,P="";A<D.length;A++){var U=D[A],q=U==="\\",j=D[A-1]==="\\"||q;if(an[U]&&!j){P+=an[U];var Q=new RegExp(P).exec(o);Q&&(E=!0)&&C[U!=="Y"?"push":"unshift"]({fn:bf[U],val:Q[++T]})}else q||(P+=".")}y=!t||!t.noCalendar?new Date(new Date().getFullYear(),0,1,0,0,0,0):new Date(new Date().setHours(0,0,0,0)),C.forEach(function(rt){var ht=rt.fn,kt=rt.val;return y=ht(y,kt,v)||y}),y=E?y:void 0}}if(!(y instanceof Date&&!isNaN(y.getTime()))){t.errorHandler(new Error("Invalid date provided: "+k));return}return u===!0&&y.setHours(0,0,0,0),y}}};function re(i,e,t){return t===void 0&&(t=!0),t!==!1?new Date(i.getTime()).setHours(0,0,0,0)-new Date(e.getTime()).setHours(0,0,0,0):i.getTime()-e.getTime()}var vf=function(i,e,t){return i>Math.min(e,t)&&i<Math.max(e,t)},Ur=function(i,e,t){return i*3600+e*60+t},yf=function(i){var e=Math.floor(i/3600),t=(i-e*3600)/60;return[e,t,i-e*3600-t*60]},Af={DAY:864e5};function Hr(i){var e=i.defaultHour,t=i.defaultMinute,n=i.defaultSeconds;if(i.minDate!==void 0){var r=i.minDate.getHours(),o=i.minDate.getMinutes(),a=i.minDate.getSeconds();e<r&&(e=r),e===r&&t<o&&(t=o),e===r&&t===o&&n<a&&(n=i.minDate.getSeconds())}if(i.maxDate!==void 0){var u=i.maxDate.getHours(),p=i.maxDate.getMinutes();e=Math.min(e,u),e===u&&(t=Math.min(p,t)),e===u&&t===p&&(n=i.maxDate.getSeconds())}return{hours:e,minutes:t,seconds:n}}typeof Object.assign!="function"&&(Object.assign=function(i){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];if(!i)throw TypeError("Cannot convert undefined or null to object");for(var n=function(u){u&&Object.keys(u).forEach(function(p){return i[p]=u[p]})},r=0,o=e;r<o.length;r++){var a=o[r];n(a)}return i});var Mt=function(){return Mt=Object.assign||function(i){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(i[r]=e[r])}return i},Mt.apply(this,arguments)},Js=function(){for(var i=0,e=0,t=arguments.length;e<t;e++)i+=arguments[e].length;for(var n=Array(i),r=0,e=0;e<t;e++)for(var o=arguments[e],a=0,u=o.length;a<u;a++,r++)n[r]=o[a];return n},wf=300;function Cf(i,e){var t={config:Mt(Mt({},Dn),St.defaultConfig),l10n:di};t.parseDate=ho({config:t.config,l10n:t.l10n}),t._handlers=[],t.pluginElements=[],t.loadedPlugins=[],t._bind=C,t._setHoursFromDate=D,t._positionCalendar=ge,t.changeMonth=Ne,t.changeYear=ce,t.clear=ut,t.close=wn,t.onMouseOver=Zt,t._createElement=at,t.createDay=Q,t.destroy=vt,t.isEnabled=Wt,t.jumpToDate=P,t.updateValue=ne,t.open=$e,t.redraw=Xe,t.set=Ce,t.setDate=xn,t.toggle=It;function n(){t.utils={getDaysInMonth:function(h,f){return h===void 0&&(h=t.currentMonth),f===void 0&&(f=t.currentYear),h===1&&(f%4===0&&f%100!==0||f%400===0)?29:t.l10n.daysInMonth[h]}}}function r(){t.element=t.input=i,t.isOpen=!1,Fe(),le(),Sn(),Ze(),n(),t.isMobile||j(),T(),(t.selectedDates.length||t.config.noCalendar)&&(t.config.enableTime&&D(t.config.noCalendar?t.latestSelectedDateObj:void 0),ne(!1)),u();var h=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);!t.isMobile&&h&&ge(),ot("onReady")}function o(){var h;return((h=t.calendarContainer)===null||h===void 0?void 0:h.getRootNode()).activeElement||document.activeElement}function a(h){return h.bind(t)}function u(){var h=t.config;h.weekNumbers===!1&&h.showMonths===1||h.noCalendar!==!0&&window.requestAnimationFrame(function(){if(t.calendarContainer!==void 0&&(t.calendarContainer.style.visibility="hidden",t.calendarContainer.style.display="block"),t.daysContainer!==void 0){var f=(t.days.offsetWidth+1)*h.showMonths;t.daysContainer.style.width=f+"px",t.calendarContainer.style.width=f+(t.weekWrapper!==void 0?t.weekWrapper.offsetWidth:0)+"px",t.calendarContainer.style.removeProperty("visibility"),t.calendarContainer.style.removeProperty("display")}})}function p(h){if(t.selectedDates.length===0){var f=t.config.minDate===void 0||re(new Date,t.config.minDate)>=0?new Date:new Date(t.config.minDate.getTime()),b=Hr(t.config);f.setHours(b.hours,b.minutes,b.seconds,f.getMilliseconds()),t.selectedDates=[f],t.latestSelectedDateObj=f}h!==void 0&&h.type!=="blur"&&Un(h);var w=t._input.value;k(),ne(),t._input.value!==w&&t._debouncedChange()}function v(h,f){return h%12+12*he(f===t.l10n.amPM[1])}function y(h){switch(h%24){case 0:case 12:return 12;default:return h%12}}function k(){if(!(t.hourElement===void 0||t.minuteElement===void 0)){var h=(parseInt(t.hourElement.value.slice(-2),10)||0)%24,f=(parseInt(t.minuteElement.value,10)||0)%60,b=t.secondElement!==void 0?(parseInt(t.secondElement.value,10)||0)%60:0;t.amPM!==void 0&&(h=v(h,t.amPM.textContent));var w=t.config.minTime!==void 0||t.config.minDate&&t.minDateHasTime&&t.latestSelectedDateObj&&re(t.latestSelectedDateObj,t.config.minDate,!0)===0,R=t.config.maxTime!==void 0||t.config.maxDate&&t.maxDateHasTime&&t.latestSelectedDateObj&&re(t.latestSelectedDateObj,t.config.maxDate,!0)===0;if(t.config.maxTime!==void 0&&t.config.minTime!==void 0&&t.config.minTime>t.config.maxTime){var N=Ur(t.config.minTime.getHours(),t.config.minTime.getMinutes(),t.config.minTime.getSeconds()),W=Ur(t.config.maxTime.getHours(),t.config.maxTime.getMinutes(),t.config.maxTime.getSeconds()),M=Ur(h,f,b);if(M>W&&M<N){var z=yf(N);h=z[0],f=z[1],b=z[2]}}else{if(R){var I=t.config.maxTime!==void 0?t.config.maxTime:t.config.maxDate;h=Math.min(h,I.getHours()),h===I.getHours()&&(f=Math.min(f,I.getMinutes())),f===I.getMinutes()&&(b=Math.min(b,I.getSeconds()))}if(w){var H=t.config.minTime!==void 0?t.config.minTime:t.config.minDate;h=Math.max(h,H.getHours()),h===H.getHours()&&f<H.getMinutes()&&(f=H.getMinutes()),f===H.getMinutes()&&(b=Math.max(b,H.getSeconds()))}}_(h,f,b)}}function D(h){var f=h||t.latestSelectedDateObj;f&&f instanceof Date&&_(f.getHours(),f.getMinutes(),f.getSeconds())}function _(h,f,b){t.latestSelectedDateObj!==void 0&&t.latestSelectedDateObj.setHours(h%24,f,b||0,0),!(!t.hourElement||!t.minuteElement||t.isMobile)&&(t.hourElement.value=Yt(t.config.time_24hr?h:(12+h)%12+12*he(h%12===0)),t.minuteElement.value=Yt(f),t.amPM!==void 0&&(t.amPM.textContent=t.l10n.amPM[he(h>=12)]),t.secondElement!==void 0&&(t.secondElement.value=Yt(b)))}function E(h){var f=ie(h),b=parseInt(f.value)+(h.delta||0);(b/1e3>1||h.key==="Enter"&&!/[^\d]/.test(b.toString()))&&ce(b)}function C(h,f,b,w){if(f instanceof Array)return f.forEach(function(R){return C(h,R,b,w)});if(h instanceof Array)return h.forEach(function(R){return C(R,f,b,w)});h.addEventListener(f,b,w),t._handlers.push({remove:function(){return h.removeEventListener(f,b,w)}})}function A(){ot("onChange")}function T(){if(t.config.wrap&&["open","close","toggle","clear"].forEach(function(b){Array.prototype.forEach.call(t.element.querySelectorAll("[data-"+b+"]"),function(w){return C(w,"click",t[b])})}),t.isMobile){xe();return}var h=Vs(pe,50);if(t._debouncedChange=Vs(A,wf),t.daysContainer&&!/iPhone|iPad|iPod/i.test(navigator.userAgent)&&C(t.daysContainer,"mouseover",function(b){t.config.mode==="range"&&Zt(ie(b))}),C(t._input,"keydown",Ke),t.calendarContainer!==void 0&&C(t.calendarContainer,"keydown",Ke),!t.config.inline&&!t.config.static&&C(window,"resize",h),window.ontouchstart!==void 0?C(window.document,"touchstart",G):C(window.document,"mousedown",G),C(window.document,"focus",G,{capture:!0}),t.config.clickOpens===!0&&(C(t._input,"focus",t.open),C(t._input,"click",t.open)),t.daysContainer!==void 0&&(C(t.monthNav,"click",zt),C(t.monthNav,["keyup","increment"],E),C(t.daysContainer,"click",we)),t.timeContainer!==void 0&&t.minuteElement!==void 0&&t.hourElement!==void 0){var f=function(b){return ie(b).select()};C(t.timeContainer,["increment"],p),C(t.timeContainer,"blur",p,{capture:!0}),C(t.timeContainer,"click",U),C([t.hourElement,t.minuteElement],["focus","click"],f),t.secondElement!==void 0&&C(t.secondElement,"focus",function(){return t.secondElement&&t.secondElement.select()}),t.amPM!==void 0&&C(t.amPM,"click",function(b){p(b)})}t.config.allowInput&&C(t._input,"blur",Ie)}function P(h,f){var b=h!==void 0?t.parseDate(h):t.latestSelectedDateObj||(t.config.minDate&&t.config.minDate>t.now?t.config.minDate:t.config.maxDate&&t.config.maxDate<t.now?t.config.maxDate:t.now),w=t.currentYear,R=t.currentMonth;try{b!==void 0&&(t.currentYear=b.getFullYear(),t.currentMonth=b.getMonth())}catch(N){N.message="Invalid date supplied: "+b,t.config.errorHandler(N)}f&&t.currentYear!==w&&(ot("onYearChange"),Nt()),f&&(t.currentYear!==w||t.currentMonth!==R)&&ot("onMonthChange"),t.redraw()}function U(h){var f=ie(h);~f.className.indexOf("arrow")&&q(h,f.classList.contains("arrowUp")?1:-1)}function q(h,f,b){var w=h&&ie(h),R=b||w&&w.parentNode&&w.parentNode.firstChild,N=Te("increment");N.delta=f,R&&R.dispatchEvent(N)}function j(){var h=window.document.createDocumentFragment();if(t.calendarContainer=at("div","flatpickr-calendar"),t.calendarContainer.tabIndex=-1,!t.config.noCalendar){if(h.appendChild(In()),t.innerContainer=at("div","flatpickr-innerContainer"),t.config.weekNumbers){var f=Bn(),b=f.weekWrapper,w=f.weekNumbers;t.innerContainer.appendChild(b),t.weekNumbers=w,t.weekWrapper=b}t.rContainer=at("div","flatpickr-rContainer"),t.rContainer.appendChild(An()),t.daysContainer||(t.daysContainer=at("div","flatpickr-days"),t.daysContainer.tabIndex=-1),gt(),t.rContainer.appendChild(t.daysContainer),t.innerContainer.appendChild(t.rContainer),h.appendChild(t.innerContainer)}t.config.enableTime&&h.appendChild(Fn()),jt(t.calendarContainer,"rangeMode",t.config.mode==="range"),jt(t.calendarContainer,"animate",t.config.animate===!0),jt(t.calendarContainer,"multiMonth",t.config.showMonths>1),t.calendarContainer.appendChild(h);var R=t.config.appendTo!==void 0&&t.config.appendTo.nodeType!==void 0;if((t.config.inline||t.config.static)&&(t.calendarContainer.classList.add(t.config.inline?"inline":"static"),t.config.inline&&(!R&&t.element.parentNode?t.element.parentNode.insertBefore(t.calendarContainer,t._input.nextSibling):t.config.appendTo!==void 0&&t.config.appendTo.appendChild(t.calendarContainer)),t.config.static)){var N=at("div","flatpickr-wrapper");t.element.parentNode&&t.element.parentNode.insertBefore(N,t.element),N.appendChild(t.element),t.altInput&&N.appendChild(t.altInput),N.appendChild(t.calendarContainer)}!t.config.static&&!t.config.inline&&(t.config.appendTo!==void 0?t.config.appendTo:window.document.body).appendChild(t.calendarContainer)}function Q(h,f,b,w){var R=Wt(f,!0),N=at("span",h,f.getDate().toString());return N.dateObj=f,N.$i=w,N.setAttribute("aria-label",t.formatDate(f,t.config.ariaDateFormat)),h.indexOf("hidden")===-1&&re(f,t.now)===0&&(t.todayDateElem=N,N.classList.add("today"),N.setAttribute("aria-current","date")),R?(N.tabIndex=-1,De(f)&&(N.classList.add("selected"),t.selectedDateElem=N,t.config.mode==="range"&&(jt(N,"startRange",t.selectedDates[0]&&re(f,t.selectedDates[0],!0)===0),jt(N,"endRange",t.selectedDates[1]&&re(f,t.selectedDates[1],!0)===0),h==="nextMonthDay"&&N.classList.add("inRange")))):N.classList.add("flatpickr-disabled"),t.config.mode==="range"&&jn(f)&&!De(f)&&N.classList.add("inRange"),t.weekNumbers&&t.config.showMonths===1&&h!=="prevMonthDay"&&w%7===6&&t.weekNumbers.insertAdjacentHTML("beforeend","<span class='flatpickr-day'>"+t.config.getWeek(f)+"</span>"),ot("onDayCreate",N),N}function rt(h){h.focus(),t.config.mode==="range"&&Zt(h)}function ht(h){for(var f=h>0?0:t.config.showMonths-1,b=h>0?t.config.showMonths:-1,w=f;w!=b;w+=h)for(var R=t.daysContainer.children[w],N=h>0?0:R.children.length-1,W=h>0?R.children.length:-1,M=N;M!=W;M+=h){var z=R.children[M];if(z.className.indexOf("hidden")===-1&&Wt(z.dateObj))return z}}function kt(h,f){for(var b=h.className.indexOf("Month")===-1?h.dateObj.getMonth():t.currentMonth,w=f>0?t.config.showMonths:-1,R=f>0?1:-1,N=b-t.currentMonth;N!=w;N+=R)for(var W=t.daysContainer.children[N],M=b-t.currentMonth===N?h.$i+f:f<0?W.children.length-1:0,z=W.children.length,I=M;I>=0&&I<z&&I!=(f>0?z:-1);I+=R){var H=W.children[I];if(H.className.indexOf("hidden")===-1&&Wt(H.dateObj)&&Math.abs(h.$i-I)>=Math.abs(f))return rt(H)}t.changeMonth(R),Ot(ht(R),0)}function Ot(h,f){var b=o(),w=Rt(b||document.body),R=h!==void 0?h:w?b:t.selectedDateElem!==void 0&&Rt(t.selectedDateElem)?t.selectedDateElem:t.todayDateElem!==void 0&&Rt(t.todayDateElem)?t.todayDateElem:ht(f>0?1:-1);R===void 0?t._input.focus():w?kt(R,f):rt(R)}function Nn(h,f){for(var b=(new Date(h,f,1).getDay()-t.l10n.firstDayOfWeek+7)%7,w=t.utils.getDaysInMonth((f-1+12)%12,h),R=t.utils.getDaysInMonth(f,h),N=window.document.createDocumentFragment(),W=t.config.showMonths>1,M=W?"prevMonthDay hidden":"prevMonthDay",z=W?"nextMonthDay hidden":"nextMonthDay",I=w+1-b,H=0;I<=w;I++,H++)N.appendChild(Q("flatpickr-day "+M,new Date(h,f-1,I),I,H));for(I=1;I<=R;I++,H++)N.appendChild(Q("flatpickr-day",new Date(h,f,I),I,H));for(var it=R+1;it<=42-b&&(t.config.showMonths===1||H%7!==0);it++,H++)N.appendChild(Q("flatpickr-day "+z,new Date(h,f+1,it%R),it,H));var Ft=at("div","dayContainer");return Ft.appendChild(N),Ft}function gt(){if(t.daysContainer!==void 0){Ti(t.daysContainer),t.weekNumbers&&Ti(t.weekNumbers);for(var h=document.createDocumentFragment(),f=0;f<t.config.showMonths;f++){var b=new Date(t.currentYear,t.currentMonth,1);b.setMonth(t.currentMonth+f),h.appendChild(Nn(b.getFullYear(),b.getMonth()))}t.daysContainer.appendChild(h),t.days=t.daysContainer.firstChild,t.config.mode==="range"&&t.selectedDates.length===1&&Zt()}}function Nt(){if(!(t.config.showMonths>1||t.config.monthSelectorType!=="dropdown")){var h=function(w){return t.config.minDate!==void 0&&t.currentYear===t.config.minDate.getFullYear()&&w<t.config.minDate.getMonth()?!1:!(t.config.maxDate!==void 0&&t.currentYear===t.config.maxDate.getFullYear()&&w>t.config.maxDate.getMonth())};t.monthsDropdownContainer.tabIndex=-1,t.monthsDropdownContainer.innerHTML="";for(var f=0;f<12;f++)if(h(f)){var b=at("option","flatpickr-monthDropdown-month");b.value=new Date(t.currentYear,f).getMonth().toString(),b.textContent=Wi(f,t.config.shorthandCurrentMonth,t.l10n),b.tabIndex=-1,t.currentMonth===f&&(b.selected=!0),t.monthsDropdownContainer.appendChild(b)}}}function Ye(){var h=at("div","flatpickr-month"),f=window.document.createDocumentFragment(),b;t.config.showMonths>1||t.config.monthSelectorType==="static"?b=at("span","cur-month"):(t.monthsDropdownContainer=at("select","flatpickr-monthDropdown-months"),t.monthsDropdownContainer.setAttribute("aria-label",t.l10n.monthAriaLabel),C(t.monthsDropdownContainer,"change",function(W){var M=ie(W),z=parseInt(M.value,10);t.changeMonth(z-t.currentMonth),ot("onMonthChange")}),Nt(),b=t.monthsDropdownContainer);var w=Di("cur-year",{tabindex:"-1"}),R=w.getElementsByTagName("input")[0];R.setAttribute("aria-label",t.l10n.yearAriaLabel),t.config.minDate&&R.setAttribute("min",t.config.minDate.getFullYear().toString()),t.config.maxDate&&(R.setAttribute("max",t.config.maxDate.getFullYear().toString()),R.disabled=!!t.config.minDate&&t.config.minDate.getFullYear()===t.config.maxDate.getFullYear());var N=at("div","flatpickr-current-month");return N.appendChild(b),N.appendChild(w),f.appendChild(N),h.appendChild(f),{container:h,yearElement:R,monthElement:b}}function Pe(){Ti(t.monthNav),t.monthNav.appendChild(t.prevMonthNav),t.config.showMonths&&(t.yearElements=[],t.monthElements=[]);for(var h=t.config.showMonths;h--;){var f=Ye();t.yearElements.push(f.yearElement),t.monthElements.push(f.monthElement),t.monthNav.appendChild(f.container)}t.monthNav.appendChild(t.nextMonthNav)}function In(){return t.monthNav=at("div","flatpickr-months"),t.yearElements=[],t.monthElements=[],t.prevMonthNav=at("span","flatpickr-prev-month"),t.prevMonthNav.innerHTML=t.config.prevArrow,t.nextMonthNav=at("span","flatpickr-next-month"),t.nextMonthNav.innerHTML=t.config.nextArrow,Pe(),Object.defineProperty(t,"_hidePrevMonthArrow",{get:function(){return t.__hidePrevMonthArrow},set:function(h){t.__hidePrevMonthArrow!==h&&(jt(t.prevMonthNav,"flatpickr-disabled",h),t.__hidePrevMonthArrow=h)}}),Object.defineProperty(t,"_hideNextMonthArrow",{get:function(){return t.__hideNextMonthArrow},set:function(h){t.__hideNextMonthArrow!==h&&(jt(t.nextMonthNav,"flatpickr-disabled",h),t.__hideNextMonthArrow=h)}}),t.currentYearElement=t.yearElements[0],ee(),t.monthNav}function Fn(){t.calendarContainer.classList.add("hasTime"),t.config.noCalendar&&t.calendarContainer.classList.add("noCalendar");var h=Hr(t.config);t.timeContainer=at("div","flatpickr-time"),t.timeContainer.tabIndex=-1;var f=at("span","flatpickr-time-separator",":"),b=Di("flatpickr-hour",{"aria-label":t.l10n.hourAriaLabel});t.hourElement=b.getElementsByTagName("input")[0];var w=Di("flatpickr-minute",{"aria-label":t.l10n.minuteAriaLabel});if(t.minuteElement=w.getElementsByTagName("input")[0],t.hourElement.tabIndex=t.minuteElement.tabIndex=-1,t.hourElement.value=Yt(t.latestSelectedDateObj?t.latestSelectedDateObj.getHours():t.config.time_24hr?h.hours:y(h.hours)),t.minuteElement.value=Yt(t.latestSelectedDateObj?t.latestSelectedDateObj.getMinutes():h.minutes),t.hourElement.setAttribute("step",t.config.hourIncrement.toString()),t.minuteElement.setAttribute("step",t.config.minuteIncrement.toString()),t.hourElement.setAttribute("min",t.config.time_24hr?"0":"1"),t.hourElement.setAttribute("max",t.config.time_24hr?"23":"12"),t.hourElement.setAttribute("maxlength","2"),t.minuteElement.setAttribute("min","0"),t.minuteElement.setAttribute("max","59"),t.minuteElement.setAttribute("maxlength","2"),t.timeContainer.appendChild(b),t.timeContainer.appendChild(f),t.timeContainer.appendChild(w),t.config.time_24hr&&t.timeContainer.classList.add("time24hr"),t.config.enableSeconds){t.timeContainer.classList.add("hasSeconds");var R=Di("flatpickr-second");t.secondElement=R.getElementsByTagName("input")[0],t.secondElement.value=Yt(t.latestSelectedDateObj?t.latestSelectedDateObj.getSeconds():h.seconds),t.secondElement.setAttribute("step",t.minuteElement.getAttribute("step")),t.secondElement.setAttribute("min","0"),t.secondElement.setAttribute("max","59"),t.secondElement.setAttribute("maxlength","2"),t.timeContainer.appendChild(at("span","flatpickr-time-separator",":")),t.timeContainer.appendChild(R)}return t.config.time_24hr||(t.amPM=at("span","flatpickr-am-pm",t.l10n.amPM[he((t.latestSelectedDateObj?t.hourElement.value:t.config.defaultHour)>11)]),t.amPM.title=t.l10n.toggleTitle,t.amPM.tabIndex=-1,t.timeContainer.appendChild(t.amPM)),t.timeContainer}function An(){t.weekdayContainer?Ti(t.weekdayContainer):t.weekdayContainer=at("div","flatpickr-weekdays");for(var h=t.config.showMonths;h--;){var f=at("div","flatpickr-weekdaycontainer");t.weekdayContainer.appendChild(f)}return Me(),t.weekdayContainer}function Me(){if(t.weekdayContainer){var h=t.l10n.firstDayOfWeek,f=Js(t.l10n.weekdays.shorthand);h>0&&h<f.length&&(f=Js(f.splice(h,f.length),f.splice(0,h)));for(var b=t.config.showMonths;b--;)t.weekdayContainer.children[b].innerHTML=`
      <span class='flatpickr-weekday'>
        `+f.join("</span><span class='flatpickr-weekday'>")+`
      </span>
      `}}function Bn(){t.calendarContainer.classList.add("hasWeeks");var h=at("div","flatpickr-weekwrapper");h.appendChild(at("span","flatpickr-weekday",t.l10n.weekAbbreviation));var f=at("div","flatpickr-weeks");return h.appendChild(f),{weekWrapper:h,weekNumbers:f}}function Ne(h,f){f===void 0&&(f=!0);var b=f?h:h-t.currentMonth;b<0&&t._hidePrevMonthArrow===!0||b>0&&t._hideNextMonthArrow===!0||(t.currentMonth+=b,(t.currentMonth<0||t.currentMonth>11)&&(t.currentYear+=t.currentMonth>11?1:-1,t.currentMonth=(t.currentMonth+12)%12,ot("onYearChange"),Nt()),gt(),ot("onMonthChange"),ee())}function ut(h,f){if(h===void 0&&(h=!0),f===void 0&&(f=!0),t.input.value="",t.altInput!==void 0&&(t.altInput.value=""),t.mobileInput!==void 0&&(t.mobileInput.value=""),t.selectedDates=[],t.latestSelectedDateObj=void 0,f===!0&&(t.currentYear=t._initialDate.getFullYear(),t.currentMonth=t._initialDate.getMonth()),t.config.enableTime===!0){var b=Hr(t.config),w=b.hours,R=b.minutes,N=b.seconds;_(w,R,N)}t.redraw(),h&&ot("onChange")}function wn(){t.isOpen=!1,t.isMobile||(t.calendarContainer!==void 0&&t.calendarContainer.classList.remove("open"),t._input!==void 0&&t._input.classList.remove("active")),ot("onClose")}function vt(){t.config!==void 0&&ot("onDestroy");for(var h=t._handlers.length;h--;)t._handlers[h].remove();if(t._handlers=[],t.mobileInput)t.mobileInput.parentNode&&t.mobileInput.parentNode.removeChild(t.mobileInput),t.mobileInput=void 0;else if(t.calendarContainer&&t.calendarContainer.parentNode)if(t.config.static&&t.calendarContainer.parentNode){var f=t.calendarContainer.parentNode;if(f.lastChild&&f.removeChild(f.lastChild),f.parentNode){for(;f.firstChild;)f.parentNode.insertBefore(f.firstChild,f);f.parentNode.removeChild(f)}}else t.calendarContainer.parentNode.removeChild(t.calendarContainer);t.altInput&&(t.input.type="text",t.altInput.parentNode&&t.altInput.parentNode.removeChild(t.altInput),delete t.altInput),t.input&&(t.input.type=t.input._type,t.input.classList.remove("flatpickr-input"),t.input.removeAttribute("readonly")),["_showTimeInput","latestSelectedDateObj","_hideNextMonthArrow","_hidePrevMonthArrow","__hideNextMonthArrow","__hidePrevMonthArrow","isMobile","isOpen","selectedDateElem","minDateHasTime","maxDateHasTime","days","daysContainer","_input","_positionElement","innerContainer","rContainer","monthNav","todayDateElem","calendarContainer","weekdayContainer","prevMonthNav","nextMonthNav","monthsDropdownContainer","currentMonthElement","currentYearElement","navigationCurrentMonth","selectedDateElem","config"].forEach(function(b){try{delete t[b]}catch{}})}function ft(h){return t.calendarContainer.contains(h)}function G(h){if(t.isOpen&&!t.config.inline){var f=ie(h),b=ft(f),w=f===t.input||f===t.altInput||t.element.contains(f)||h.path&&h.path.indexOf&&(~h.path.indexOf(t.input)||~h.path.indexOf(t.altInput)),R=!w&&!b&&!ft(h.relatedTarget),N=!t.config.ignoredFocusElements.some(function(W){return W.contains(f)});R&&N&&(t.config.allowInput&&t.setDate(t._input.value,!1,t.config.altInput?t.config.altFormat:t.config.dateFormat),t.timeContainer!==void 0&&t.minuteElement!==void 0&&t.hourElement!==void 0&&t.input.value!==""&&t.input.value!==void 0&&p(),t.close(),t.config&&t.config.mode==="range"&&t.selectedDates.length===1&&t.clear(!1))}}function ce(h){if(!(!h||t.config.minDate&&h<t.config.minDate.getFullYear()||t.config.maxDate&&h>t.config.maxDate.getFullYear())){var f=h,b=t.currentYear!==f;t.currentYear=f||t.currentYear,t.config.maxDate&&t.currentYear===t.config.maxDate.getFullYear()?t.currentMonth=Math.min(t.config.maxDate.getMonth(),t.currentMonth):t.config.minDate&&t.currentYear===t.config.minDate.getFullYear()&&(t.currentMonth=Math.max(t.config.minDate.getMonth(),t.currentMonth)),b&&(t.redraw(),ot("onYearChange"),Nt())}}function Wt(h,f){var b;f===void 0&&(f=!0);var w=t.parseDate(h,void 0,f);if(t.config.minDate&&w&&re(w,t.config.minDate,f!==void 0?f:!t.minDateHasTime)<0||t.config.maxDate&&w&&re(w,t.config.maxDate,f!==void 0?f:!t.maxDateHasTime)>0)return!1;if(!t.config.enable&&t.config.disable.length===0)return!0;if(w===void 0)return!1;for(var R=!!t.config.enable,N=(b=t.config.enable)!==null&&b!==void 0?b:t.config.disable,W=0,M=void 0;W<N.length;W++){if(M=N[W],typeof M=="function"&&M(w))return R;if(M instanceof Date&&w!==void 0&&M.getTime()===w.getTime())return R;if(typeof M=="string"){var z=t.parseDate(M,void 0,!0);return z&&z.getTime()===w.getTime()?R:!R}else if(typeof M=="object"&&w!==void 0&&M.from&&M.to&&w.getTime()>=M.from.getTime()&&w.getTime()<=M.to.getTime())return R}return!R}function Rt(h){return t.daysContainer!==void 0?h.className.indexOf("hidden")===-1&&h.className.indexOf("flatpickr-disabled")===-1&&t.daysContainer.contains(h):!1}function Ie(h){var f=h.target===t._input,b=t._input.value.trimEnd()!==Et();f&&b&&!(h.relatedTarget&&ft(h.relatedTarget))&&t.setDate(t._input.value,!0,h.target===t.altInput?t.config.altFormat:t.config.dateFormat)}function Ke(h){var f=ie(h),b=t.config.wrap?i.contains(f):f===t._input,w=t.config.allowInput,R=t.isOpen&&(!w||!b),N=t.config.inline&&b&&!w;if(h.keyCode===13&&b){if(w)return t.setDate(t._input.value,!0,f===t.altInput?t.config.altFormat:t.config.dateFormat),t.close(),f.blur();t.open()}else if(ft(f)||R||N){var W=!!t.timeContainer&&t.timeContainer.contains(f);switch(h.keyCode){case 13:W?(h.preventDefault(),p(),ue()):we(h);break;case 27:h.preventDefault(),ue();break;case 8:case 46:b&&!t.config.allowInput&&(h.preventDefault(),t.clear());break;case 37:case 39:if(!W&&!b){h.preventDefault();var M=o();if(t.daysContainer!==void 0&&(w===!1||M&&Rt(M))){var z=h.keyCode===39?1:-1;h.ctrlKey?(h.stopPropagation(),Ne(z),Ot(ht(1),0)):Ot(void 0,z)}}else t.hourElement&&t.hourElement.focus();break;case 38:case 40:h.preventDefault();var I=h.keyCode===40?1:-1;t.daysContainer&&f.$i!==void 0||f===t.input||f===t.altInput?h.ctrlKey?(h.stopPropagation(),ce(t.currentYear-I),Ot(ht(1),0)):W||Ot(void 0,I*7):f===t.currentYearElement?ce(t.currentYear-I):t.config.enableTime&&(!W&&t.hourElement&&t.hourElement.focus(),p(h),t._debouncedChange());break;case 9:if(W){var H=[t.hourElement,t.minuteElement,t.secondElement,t.amPM].concat(t.pluginElements).filter(function(pt){return pt}),it=H.indexOf(f);if(it!==-1){var Ft=H[it+(h.shiftKey?-1:1)];h.preventDefault(),(Ft||t._input).focus()}}else!t.config.noCalendar&&t.daysContainer&&t.daysContainer.contains(f)&&h.shiftKey&&(h.preventDefault(),t._input.focus());break}}if(t.amPM!==void 0&&f===t.amPM)switch(h.key){case t.l10n.amPM[0].charAt(0):case t.l10n.amPM[0].charAt(0).toLowerCase():t.amPM.textContent=t.l10n.amPM[0],k(),ne();break;case t.l10n.amPM[1].charAt(0):case t.l10n.amPM[1].charAt(0).toLowerCase():t.amPM.textContent=t.l10n.amPM[1],k(),ne();break}(b||ft(f))&&ot("onKeyDown",h)}function Zt(h,f){if(f===void 0&&(f="flatpickr-day"),!(t.selectedDates.length!==1||h&&(!h.classList.contains(f)||h.classList.contains("flatpickr-disabled")))){for(var b=h?h.dateObj.getTime():t.days.firstElementChild.dateObj.getTime(),w=t.parseDate(t.selectedDates[0],void 0,!0).getTime(),R=Math.min(b,t.selectedDates[0].getTime()),N=Math.max(b,t.selectedDates[0].getTime()),W=!1,M=0,z=0,I=R;I<N;I+=Af.DAY)Wt(new Date(I),!0)||(W=W||I>R&&I<N,I<w&&(!M||I>M)?M=I:I>w&&(!z||I<z)&&(z=I));var H=Array.from(t.rContainer.querySelectorAll("*:nth-child(-n+"+t.config.showMonths+") > ."+f));H.forEach(function(it){var Ft=it.dateObj,pt=Ft.getTime(),Se=M>0&&pt<M||z>0&&pt>z;if(Se){it.classList.add("notAllowed"),["inRange","startRange","endRange"].forEach(function(me){it.classList.remove(me)});return}else if(W&&!Se)return;["startRange","inRange","endRange","notAllowed"].forEach(function(me){it.classList.remove(me)}),h!==void 0&&(h.classList.add(b<=t.selectedDates[0].getTime()?"startRange":"endRange"),w<b&&pt===w?it.classList.add("startRange"):w>b&&pt===w&&it.classList.add("endRange"),pt>=M&&(z===0||pt<=z)&&vf(pt,w,b)&&it.classList.add("inRange"))})}}function pe(){t.isOpen&&!t.config.static&&!t.config.inline&&ge()}function $e(h,f){if(f===void 0&&(f=t._positionElement),t.isMobile===!0){if(h){h.preventDefault();var b=ie(h);b&&b.blur()}t.mobileInput!==void 0&&(t.mobileInput.focus(),t.mobileInput.click()),ot("onOpen");return}else if(t._input.disabled||t.config.inline)return;var w=t.isOpen;t.isOpen=!0,w||(t.calendarContainer.classList.add("open"),t._input.classList.add("active"),ot("onOpen"),ge(f)),t.config.enableTime===!0&&t.config.noCalendar===!0&&t.config.allowInput===!1&&(h===void 0||!t.timeContainer.contains(h.relatedTarget))&&setTimeout(function(){return t.hourElement.select()},50)}function te(h){return function(f){var b=t.config["_"+h+"Date"]=t.parseDate(f,t.config.dateFormat),w=t.config["_"+(h==="min"?"max":"min")+"Date"];b!==void 0&&(t[h==="min"?"minDateHasTime":"maxDateHasTime"]=b.getHours()>0||b.getMinutes()>0||b.getSeconds()>0),t.selectedDates&&(t.selectedDates=t.selectedDates.filter(function(R){return Wt(R)}),!t.selectedDates.length&&h==="min"&&D(b),ne()),t.daysContainer&&(Xe(),b!==void 0?t.currentYearElement[h]=b.getFullYear().toString():t.currentYearElement.removeAttribute(h),t.currentYearElement.disabled=!!w&&b!==void 0&&w.getFullYear()===b.getFullYear())}}function Fe(){var h=["wrap","weekNumbers","allowInput","allowInvalidPreload","clickOpens","time_24hr","enableTime","noCalendar","altInput","shorthandCurrentMonth","inline","static","enableSeconds","disableMobile"],f=Mt(Mt({},JSON.parse(JSON.stringify(i.dataset||{}))),e),b={};t.config.parseDate=f.parseDate,t.config.formatDate=f.formatDate,Object.defineProperty(t.config,"enable",{get:function(){return t.config._enable},set:function(H){t.config._enable=Qe(H)}}),Object.defineProperty(t.config,"disable",{get:function(){return t.config._disable},set:function(H){t.config._disable=Qe(H)}});var w=f.mode==="time";if(!f.dateFormat&&(f.enableTime||w)){var R=St.defaultConfig.dateFormat||Dn.dateFormat;b.dateFormat=f.noCalendar||w?"H:i"+(f.enableSeconds?":S":""):R+" H:i"+(f.enableSeconds?":S":"")}if(f.altInput&&(f.enableTime||w)&&!f.altFormat){var N=St.defaultConfig.altFormat||Dn.altFormat;b.altFormat=f.noCalendar||w?"h:i"+(f.enableSeconds?":S K":" K"):N+(" h:i"+(f.enableSeconds?":S":"")+" K")}Object.defineProperty(t.config,"minDate",{get:function(){return t.config._minDate},set:te("min")}),Object.defineProperty(t.config,"maxDate",{get:function(){return t.config._maxDate},set:te("max")});var W=function(H){return function(it){t.config[H==="min"?"_minTime":"_maxTime"]=t.parseDate(it,"H:i:S")}};Object.defineProperty(t.config,"minTime",{get:function(){return t.config._minTime},set:W("min")}),Object.defineProperty(t.config,"maxTime",{get:function(){return t.config._maxTime},set:W("max")}),f.mode==="time"&&(t.config.noCalendar=!0,t.config.enableTime=!0),Object.assign(t.config,b,f);for(var M=0;M<h.length;M++)t.config[h[M]]=t.config[h[M]]===!0||t.config[h[M]]==="true";Fr.filter(function(H){return t.config[H]!==void 0}).forEach(function(H){t.config[H]=Br(t.config[H]||[]).map(a)}),t.isMobile=!t.config.disableMobile&&!t.config.inline&&t.config.mode==="single"&&!t.config.disable.length&&!t.config.enable&&!t.config.weekNumbers&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);for(var M=0;M<t.config.plugins.length;M++){var z=t.config.plugins[M](t)||{};for(var I in z)Fr.indexOf(I)>-1?t.config[I]=Br(z[I]).map(a).concat(t.config[I]):typeof f[I]>"u"&&(t.config[I]=z[I])}f.altInputClass||(t.config.altInputClass=Be().className+" "+t.config.altInputClass),ot("onParseConfig")}function Be(){return t.config.wrap?i.querySelector("[data-input]"):i}function le(){typeof t.config.locale!="object"&&typeof St.l10ns[t.config.locale]>"u"&&t.config.errorHandler(new Error("flatpickr: invalid locale "+t.config.locale)),t.l10n=Mt(Mt({},St.l10ns.default),typeof t.config.locale=="object"?t.config.locale:t.config.locale!=="default"?St.l10ns[t.config.locale]:void 0),an.D="("+t.l10n.weekdays.shorthand.join("|")+")",an.l="("+t.l10n.weekdays.longhand.join("|")+")",an.M="("+t.l10n.months.shorthand.join("|")+")",an.F="("+t.l10n.months.longhand.join("|")+")",an.K="("+t.l10n.amPM[0]+"|"+t.l10n.amPM[1]+"|"+t.l10n.amPM[0].toLowerCase()+"|"+t.l10n.amPM[1].toLowerCase()+")";var h=Mt(Mt({},e),JSON.parse(JSON.stringify(i.dataset||{})));h.time_24hr===void 0&&St.defaultConfig.time_24hr===void 0&&(t.config.time_24hr=t.l10n.time_24hr),t.formatDate=gc(t),t.parseDate=ho({config:t.config,l10n:t.l10n})}function ge(h){if(typeof t.config.position=="function")return void t.config.position(t,h);if(t.calendarContainer!==void 0){ot("onPreCalendarPosition");var f=h||t._positionElement,b=Array.prototype.reduce.call(t.calendarContainer.children,function(X,mt){return X+mt.offsetHeight},0),w=t.calendarContainer.offsetWidth,R=t.config.position.split(" "),N=R[0],W=R.length>1?R[1]:null,M=f.getBoundingClientRect(),z=window.innerHeight-M.bottom,I=N==="above"||N!=="below"&&z<b&&M.top>b,H=window.pageYOffset+M.top+(I?-b-2:f.offsetHeight+2);if(jt(t.calendarContainer,"arrowTop",!I),jt(t.calendarContainer,"arrowBottom",I),!t.config.inline){var it=window.pageXOffset+M.left,Ft=!1,pt=!1;W==="center"?(it-=(w-M.width)/2,Ft=!0):W==="right"&&(it-=w-M.width,pt=!0),jt(t.calendarContainer,"arrowLeft",!Ft&&!pt),jt(t.calendarContainer,"arrowCenter",Ft),jt(t.calendarContainer,"arrowRight",pt);var Se=window.document.body.offsetWidth-(window.pageXOffset+M.right),me=it+w>window.document.body.offsetWidth,tn=Se+w>window.document.body.offsetWidth;if(jt(t.calendarContainer,"rightMost",me),!t.config.static)if(t.calendarContainer.style.top=H+"px",!me)t.calendarContainer.style.left=it+"px",t.calendarContainer.style.right="auto";else if(!tn)t.calendarContainer.style.left="auto",t.calendarContainer.style.right=Se+"px";else{var Vt=je();if(Vt===void 0)return;var Hn=window.document.body.offsetWidth,m=Math.max(0,Hn/2-w/2),F=".flatpickr-calendar.centerMost:before",O=".flatpickr-calendar.centerMost:after",$=Vt.cssRules.length,nt="{left:"+M.left+"px;right:auto;}";jt(t.calendarContainer,"rightMost",!1),jt(t.calendarContainer,"centerMost",!0),Vt.insertRule(F+","+O+nt,$),t.calendarContainer.style.left=m+"px",t.calendarContainer.style.right="auto"}}}}function je(){for(var h=null,f=0;f<document.styleSheets.length;f++){var b=document.styleSheets[f];if(b.cssRules){try{b.cssRules}catch{continue}h=b;break}}return h??Cn()}function Cn(){var h=document.createElement("style");return document.head.appendChild(h),h.sheet}function Xe(){t.config.noCalendar||t.isMobile||(Nt(),ee(),gt())}function ue(){t._input.focus(),window.navigator.userAgent.indexOf("MSIE")!==-1||navigator.msMaxTouchPoints!==void 0?setTimeout(t.close,0):t.close()}function we(h){h.preventDefault(),h.stopPropagation();var f=function(H){return H.classList&&H.classList.contains("flatpickr-day")&&!H.classList.contains("flatpickr-disabled")&&!H.classList.contains("notAllowed")},b=pc(ie(h),f);if(b!==void 0){var w=b,R=t.latestSelectedDateObj=new Date(w.dateObj.getTime()),N=(R.getMonth()<t.currentMonth||R.getMonth()>t.currentMonth+t.config.showMonths-1)&&t.config.mode!=="range";if(t.selectedDateElem=w,t.config.mode==="single")t.selectedDates=[R];else if(t.config.mode==="multiple"){var W=De(R);W?t.selectedDates.splice(parseInt(W),1):t.selectedDates.push(R)}else t.config.mode==="range"&&(t.selectedDates.length===2&&t.clear(!1,!1),t.latestSelectedDateObj=R,t.selectedDates.push(R),re(R,t.selectedDates[0],!0)!==0&&t.selectedDates.sort(function(H,it){return H.getTime()-it.getTime()}));if(k(),N){var M=t.currentYear!==R.getFullYear();t.currentYear=R.getFullYear(),t.currentMonth=R.getMonth(),M&&(ot("onYearChange"),Nt()),ot("onMonthChange")}if(ee(),gt(),ne(),!N&&t.config.mode!=="range"&&t.config.showMonths===1?rt(w):t.selectedDateElem!==void 0&&t.hourElement===void 0&&t.selectedDateElem&&t.selectedDateElem.focus(),t.hourElement!==void 0&&t.hourElement!==void 0&&t.hourElement.focus(),t.config.closeOnSelect){var z=t.config.mode==="single"&&!t.config.enableTime,I=t.config.mode==="range"&&t.selectedDates.length===2&&!t.config.enableTime;(z||I)&&ue()}A()}}var et={locale:[le,Me],showMonths:[Pe,u,An],minDate:[P],maxDate:[P],positionElement:[Ee],clickOpens:[function(){t.config.clickOpens===!0?(C(t._input,"focus",t.open),C(t._input,"click",t.open)):(t._input.removeEventListener("focus",t.open),t._input.removeEventListener("click",t.open))}]};function Ce(h,f){if(h!==null&&typeof h=="object"){Object.assign(t.config,h);for(var b in h)et[b]!==void 0&&et[b].forEach(function(w){return w()})}else t.config[h]=f,et[h]!==void 0?et[h].forEach(function(w){return w()}):Fr.indexOf(h)>-1&&(t.config[h]=Br(f));t.redraw(),ne(!0)}function Ge(h,f){var b=[];if(h instanceof Array)b=h.map(function(w){return t.parseDate(w,f)});else if(h instanceof Date||typeof h=="number")b=[t.parseDate(h,f)];else if(typeof h=="string")switch(t.config.mode){case"single":case"time":b=[t.parseDate(h,f)];break;case"multiple":b=h.split(t.config.conjunction).map(function(w){return t.parseDate(w,f)});break;case"range":b=h.split(t.l10n.rangeSeparator).map(function(w){return t.parseDate(w,f)});break}else t.config.errorHandler(new Error("Invalid date supplied: "+JSON.stringify(h)));t.selectedDates=t.config.allowInvalidPreload?b:b.filter(function(w){return w instanceof Date&&Wt(w,!1)}),t.config.mode==="range"&&t.selectedDates.sort(function(w,R){return w.getTime()-R.getTime()})}function xn(h,f,b){if(f===void 0&&(f=!1),b===void 0&&(b=t.config.dateFormat),h!==0&&!h||h instanceof Array&&h.length===0)return t.clear(f);Ge(h,b),t.latestSelectedDateObj=t.selectedDates[t.selectedDates.length-1],t.redraw(),P(void 0,f),D(),t.selectedDates.length===0&&t.clear(!1),ne(f),f&&ot("onChange")}function Qe(h){return h.slice().map(function(f){return typeof f=="string"||typeof f=="number"||f instanceof Date?t.parseDate(f,void 0,!0):f&&typeof f=="object"&&f.from&&f.to?{from:t.parseDate(f.from,void 0),to:t.parseDate(f.to,void 0)}:f}).filter(function(f){return f})}function Ze(){t.selectedDates=[],t.now=t.parseDate(t.config.now)||new Date;var h=t.config.defaultDate||((t.input.nodeName==="INPUT"||t.input.nodeName==="TEXTAREA")&&t.input.placeholder&&t.input.value===t.input.placeholder?null:t.input.value);h&&Ge(h,t.config.dateFormat),t._initialDate=t.selectedDates.length>0?t.selectedDates[0]:t.config.minDate&&t.config.minDate.getTime()>t.now.getTime()?t.config.minDate:t.config.maxDate&&t.config.maxDate.getTime()<t.now.getTime()?t.config.maxDate:t.now,t.currentYear=t._initialDate.getFullYear(),t.currentMonth=t._initialDate.getMonth(),t.selectedDates.length>0&&(t.latestSelectedDateObj=t.selectedDates[0]),t.config.minTime!==void 0&&(t.config.minTime=t.parseDate(t.config.minTime,"H:i")),t.config.maxTime!==void 0&&(t.config.maxTime=t.parseDate(t.config.maxTime,"H:i")),t.minDateHasTime=!!t.config.minDate&&(t.config.minDate.getHours()>0||t.config.minDate.getMinutes()>0||t.config.minDate.getSeconds()>0),t.maxDateHasTime=!!t.config.maxDate&&(t.config.maxDate.getHours()>0||t.config.maxDate.getMinutes()>0||t.config.maxDate.getSeconds()>0)}function Sn(){if(t.input=Be(),!t.input){t.config.errorHandler(new Error("Invalid input element specified"));return}t.input._type=t.input.type,t.input.type="text",t.input.classList.add("flatpickr-input"),t._input=t.input,t.config.altInput&&(t.altInput=at(t.input.nodeName,t.config.altInputClass),t._input=t.altInput,t.altInput.placeholder=t.input.placeholder,t.altInput.disabled=t.input.disabled,t.altInput.required=t.input.required,t.altInput.tabIndex=t.input.tabIndex,t.altInput.type="text",t.input.setAttribute("type","hidden"),!t.config.static&&t.input.parentNode&&t.input.parentNode.insertBefore(t.altInput,t.input.nextSibling)),t.config.allowInput||t._input.setAttribute("readonly","readonly"),Ee()}function Ee(){t._positionElement=t.config.positionElement||t._input}function xe(){var h=t.config.enableTime?t.config.noCalendar?"time":"datetime-local":"date";t.mobileInput=at("input",t.input.className+" flatpickr-mobile"),t.mobileInput.tabIndex=1,t.mobileInput.type=h,t.mobileInput.disabled=t.input.disabled,t.mobileInput.required=t.input.required,t.mobileInput.placeholder=t.input.placeholder,t.mobileFormatStr=h==="datetime-local"?"Y-m-d\\TH:i:S":h==="date"?"Y-m-d":"H:i:S",t.selectedDates.length>0&&(t.mobileInput.defaultValue=t.mobileInput.value=t.formatDate(t.selectedDates[0],t.mobileFormatStr)),t.config.minDate&&(t.mobileInput.min=t.formatDate(t.config.minDate,"Y-m-d")),t.config.maxDate&&(t.mobileInput.max=t.formatDate(t.config.maxDate,"Y-m-d")),t.input.getAttribute("step")&&(t.mobileInput.step=String(t.input.getAttribute("step"))),t.input.type="hidden",t.altInput!==void 0&&(t.altInput.type="hidden");try{t.input.parentNode&&t.input.parentNode.insertBefore(t.mobileInput,t.input.nextSibling)}catch{}C(t.mobileInput,"change",function(f){t.setDate(ie(f).value,!1,t.mobileFormatStr),ot("onChange"),ot("onClose")})}function It(h){if(t.isOpen===!0)return t.close();t.open(h)}function ot(h,f){if(t.config!==void 0){var b=t.config[h];if(b!==void 0&&b.length>0)for(var w=0;b[w]&&w<b.length;w++)b[w](t.selectedDates,t.input.value,t,f);h==="onChange"&&(t.input.dispatchEvent(Te("change")),t.input.dispatchEvent(Te("input")))}}function Te(h){var f=document.createEvent("Event");return f.initEvent(h,!0,!0),f}function De(h){for(var f=0;f<t.selectedDates.length;f++){var b=t.selectedDates[f];if(b instanceof Date&&re(b,h)===0)return""+f}return!1}function jn(h){return t.config.mode!=="range"||t.selectedDates.length<2?!1:re(h,t.selectedDates[0])>=0&&re(h,t.selectedDates[1])<=0}function ee(){t.config.noCalendar||t.isMobile||!t.monthNav||(t.yearElements.forEach(function(h,f){var b=new Date(t.currentYear,t.currentMonth,1);b.setMonth(t.currentMonth+f),t.config.showMonths>1||t.config.monthSelectorType==="static"?t.monthElements[f].textContent=Wi(b.getMonth(),t.config.shorthandCurrentMonth,t.l10n)+" ":t.monthsDropdownContainer.value=b.getMonth().toString(),h.value=b.getFullYear().toString()}),t._hidePrevMonthArrow=t.config.minDate!==void 0&&(t.currentYear===t.config.minDate.getFullYear()?t.currentMonth<=t.config.minDate.getMonth():t.currentYear<t.config.minDate.getFullYear()),t._hideNextMonthArrow=t.config.maxDate!==void 0&&(t.currentYear===t.config.maxDate.getFullYear()?t.currentMonth+1>t.config.maxDate.getMonth():t.currentYear>t.config.maxDate.getFullYear()))}function Et(h){var f=h||(t.config.altInput?t.config.altFormat:t.config.dateFormat);return t.selectedDates.map(function(b){return t.formatDate(b,f)}).filter(function(b,w,R){return t.config.mode!=="range"||t.config.enableTime||R.indexOf(b)===w}).join(t.config.mode!=="range"?t.config.conjunction:t.l10n.rangeSeparator)}function ne(h){h===void 0&&(h=!0),t.mobileInput!==void 0&&t.mobileFormatStr&&(t.mobileInput.value=t.latestSelectedDateObj!==void 0?t.formatDate(t.latestSelectedDateObj,t.mobileFormatStr):""),t.input.value=Et(t.config.dateFormat),t.altInput!==void 0&&(t.altInput.value=Et(t.config.altFormat)),h!==!1&&ot("onValueUpdate")}function zt(h){var f=ie(h),b=t.prevMonthNav.contains(f),w=t.nextMonthNav.contains(f);b||w?Ne(b?-1:1):t.yearElements.indexOf(f)>=0?f.select():f.classList.contains("arrowUp")?t.changeYear(t.currentYear+1):f.classList.contains("arrowDown")&&t.changeYear(t.currentYear-1)}function Un(h){h.preventDefault();var f=h.type==="keydown",b=ie(h),w=b;t.amPM!==void 0&&b===t.amPM&&(t.amPM.textContent=t.l10n.amPM[he(t.amPM.textContent===t.l10n.amPM[0])]);var R=parseFloat(w.getAttribute("min")),N=parseFloat(w.getAttribute("max")),W=parseFloat(w.getAttribute("step")),M=parseInt(w.value,10),z=h.delta||(f?h.which===38?1:-1:0),I=M+W*z;if(typeof w.value<"u"&&w.value.length===2){var H=w===t.hourElement,it=w===t.minuteElement;I<R?(I=N+I+he(!H)+(he(H)&&he(!t.amPM)),it&&q(void 0,-1,t.hourElement)):I>N&&(I=w===t.hourElement?I-N-he(!t.amPM):R,it&&q(void 0,1,t.hourElement)),t.amPM&&H&&(W===1?I+M===23:Math.abs(I-M)>W)&&(t.amPM.textContent=t.l10n.amPM[he(t.amPM.textContent===t.l10n.amPM[0])]),w.value=Yt(I)}}return r(),t}function Rn(i,e){for(var t=Array.prototype.slice.call(i).filter(function(a){return a instanceof HTMLElement}),n=[],r=0;r<t.length;r++){var o=t[r];try{if(o.getAttribute("data-fp-omit")!==null)continue;o._flatpickr!==void 0&&(o._flatpickr.destroy(),o._flatpickr=void 0),o._flatpickr=Cf(o,e||{}),n.push(o._flatpickr)}catch(a){console.error(a)}}return n.length===1?n[0]:n}typeof HTMLElement<"u"&&typeof HTMLCollection<"u"&&typeof NodeList<"u"&&(HTMLCollection.prototype.flatpickr=NodeList.prototype.flatpickr=function(i){return Rn(this,i)},HTMLElement.prototype.flatpickr=function(i){return Rn([this],i)});var St=function(i,e){return typeof i=="string"?Rn(window.document.querySelectorAll(i),e):i instanceof Node?Rn([i],e):Rn(i,e)};St.defaultConfig={};St.l10ns={en:Mt({},di),default:Mt({},di)};St.localize=function(i){St.l10ns.default=Mt(Mt({},St.l10ns.default),i)};St.setDefaults=function(i){St.defaultConfig=Mt(Mt({},St.defaultConfig),i)};St.parseDate=ho({});St.formatDate=gc({});St.compareDates=re;typeof jQuery<"u"&&typeof jQuery.fn<"u"&&(jQuery.fn.flatpickr=function(i){return Rn(this,i)});Date.prototype.fp_incr=function(i){return new Date(this.getFullYear(),this.getMonth(),this.getDate()+(typeof i=="string"?parseInt(i,10):i))};typeof window<"u"&&(window.flatpickr=St);
